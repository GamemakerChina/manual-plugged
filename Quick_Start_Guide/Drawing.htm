<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../assets/import/layer/layer.js"></script><script type="text/javascript" src="../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption,blockquote").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption,.expandtext").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="..",gTopicId="2.0_8"</script><script type="text/javascript" src="../template/scripts/rh.min.js"></script><script type="text/javascript" src="../template/scripts/common.min.js"></script><script type="text/javascript" src="../template/scripts/topic.min.js"></script><script type="text/javascript" src="../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Drawing</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../assets/css/default.css" type="text/css"><script src="../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Some basic code to show people how things are drawn."><meta name="rh-index-keywords" content="Quick Start - Drawing"><meta name="search-keywords" content="drawing,draw event,GUI layer"><meta name="robots" content="NOODP"><meta name="brsnext" value="Quick_Start_Guide/Movement_And_Controls.htm"><meta name="brsprev" value="Quick_Start_Guide/Rooms.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Drawing"><span>Drawing</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>Drawing</h1><p>This section (and the following section on <a href="Movement_And_Controls.htm">Movement and Controls</a>) is aimed at giving you practical examples of GML or GML Visual to enable you to get started as quickly as possible making your first game projects. We won't be explaining things in too much depth as we want you to get started making stuff as quickly as possible, so we encourage you to explore any links as you go along and to use the "search" function of the manual to look for additional information on anything you aren't sure about.</p><p>In this section we're going to concentrate on simply drawing information to the screen, both as text and as images, and also explain a bit more about the different <strong>Draw Events</strong>, specifically, the main <strong>Draw</strong>&nbsp;event and the <strong>Draw GUI</strong> event (note that in some of the examples you will be required to add other events, but we'll explain these as we come to them).</p><p><img alt="The Draw Events" class="center" height="378" src="../assets/Images/QS_Guide/QS_DrawEvents.png" width="268"></p><p>Before going any further, you might want to make a new project (either GML or GML Visual) from the <a href="../Introduction/The_Start_Page.htm">Start Page</a>, and add (or create) a few sprites as well as an object or two, as we'll be giving you some code that you can test using these. Even a white square will work for now as the sprite for our object!</p><p>Now, as mentioned in the section on <a href="Objects_And_Instances.htm">Objects And Instances</a>, if you don't add a Draw Event to the object, then <span data-keyref="GameMaker Name">GameMaker</span> will default draw, meaning that if the object has a sprite assigned to it this sprite will be drawn, complete with any transforms that have been added. What do we mean by transforms? Well, each object has a number of built-in&nbsp;<a class="tooltip" title="A variable is a named value within a program which can be modified, stored and displayed whenever required. For example, if we have an integer variable with a name XYZ and it stores a value 10, we can then do things like A = XYZ + 10, which will set the value of the variable A to 20, since XYZ is 10 and we are adding 10 to it. You can also change variable values using operators, so doing XYZ = XYZ + 100 would modify the value of our XYZ variable to be equal to 110. Variables can also be used to store identifiers and references to different assets.">variable</a><span class="glossextra">s</span> that will control how an instance of the object draws its sprite when default drawing, and you can change these variables as the game runs to change the way the sprite is drawn.</p><p class="note"><strong>NOTE</strong>: You can find a list of all the built in variables that can be used for transforming instance sprites <a href="../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Instance_Variables/Sprite_Instance_Variables.htm">here</a>. GML Visual users have some dedicated actions that affect these variables, which you can find <a href="../Drag_And_Drop/Drag_And_Drop_Reference/Drawing/Drawing_Actions.htm">here</a>, and you can also use the actual variables themselves along with the <a href="../Drag_And_Drop/Drag_And_Drop_Reference/Instance/Get_Instance_Variable.htm">Get Instance Variable</a>&nbsp;and <a href="../Drag_And_Drop/Drag_And_Drop_Reference/Instance/Set_Instance_Variable.htm">Set Instance Variable</a>&nbsp;actions.</p><p>Let's look at some examples:</p><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop_down" href="#"><span data-open-text="true" data-skip-index="true">Changing Alpha (Transparency)</span><span data-close-text="true">Changing Alpha (Transparency)</span></a></p><div class="droptext" data-targetname="drop_down"><p class="dropspot">The <strong>alpha</strong> value is what controls the transparency of what's being drawn, and in <span data-keyref="GameMaker Name">GameMaker</span>, you can use the <span class="inline">image_alpha</span> built-in variable to change how transparent the assigned sprite is. To see how this works, open (or create) an object, assign it a sprite, and then give the object a <strong>Create Event</strong>. In the Create Event, simply add the following GML Visual or GML:</p><p class="dropspot"><img alt="GML VisualDraw Example For Transparency" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_1.png"></p><p class="code">var _val = random(1);<br>image_alpha = _val;</p><p class="dropspot">Image alpha is calculated as a value from 0 to 1, where 0 is fully transparent and 1 is fully opaque (by default it's set to 1). So in this example, all we're doing is setting the image alpha to a random decimal value from 0 to 1. Place a few instances of this object in a room, and then click the <strong>Play</strong> button <img alt="Play Icon" class="icon" src="../assets/Images/Icons/Icon_PlayGame.png">&nbsp;at the top of the IDE.</p><p class="dropspot">You should see that each instance of the object draws its sprite with a different transparency, eg:</p><p class="dropspot"><img alt="Example Of Sprites Drawn With Different Alpha Values" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_1.png"></p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop_down1" href="#"><span data-open-text="true" data-skip-index="true">Changing Colour Blend (Tinting)</span><span data-close-text="true">Changing Colour Blend (Tinting)</span></a></p><div class="droptext" data-targetname="drop_down1"><p class="dropspot">When your object is default drawing a sprite, this sprite is actually being drawn <strong>blended</strong> (or <strong>tinted</strong>) with a colour, and this colour value is stored in the <span class="inline">image_blend</span> built-in variable. By default this colour is white, which essentially means that no colour will be added to the sprite when it is shown on the screen. However, you can use other colours to achieve special effects, for example, use red to show the instance has received some damage.</p><p class="dropspot">In this example, we're going to blend different colours with the sprite while a key is pressed and held down, and so you'll need to open (or create) an object, assign it a sprite, and then give the object a <strong>Key Down &lt;Space&gt; Event</strong>.</p><p class="dropspot"><img alt="Add Key Down Event" class="center" src="../assets/Images/QS_Guide/QS_Add_SpaceKeyPressEvent.png"></p><p class="dropspot">In this Key Down Event, add the following GML Visual or GML:</p><p class="dropspot"><img alt="GML VisualExample Using Key Down Event" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_2.png"></p><p class="code">var _col = choose(c_red, c_green, c_blue, c_yellow, c_fuchsia, c_orange);<br>image_blend = _col;</p><p class="dropspot">Place a few instances of this object in a room, and then click the Play button <img alt="Play Icon" class="icon" src="../assets/Images/Icons/Icon_PlayGame.png"> at the top of the IDE, and test holding down and releasing the <em>Space</em> key. You should see that each instance will change it's colour rapidly while the key is held down, and stop changing when it is released:</p><p class="dropspot"><img alt="Example Showing Colour Blending" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_2.png"></p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop_down2" href="#"><span data-open-text="true" data-skip-index="true">Changing Scale</span><span data-close-text="true">Changing Scale</span></a></p><div class="droptext" data-targetname="drop_down2"><p class="dropspot">Another of the properties that we can change for our sprite is the <strong>scale</strong> value, permitting us to draw it bigger or smaller whenever we want. Scale is caculated independently along the X and Y axis by two seperate variables, the <span class="inline">image_xscale</span> variable and the <span class="inline">image_yscale</span> variable. By default these are set to 1, and they act like <strong>multipliers</strong>, so a value of 0.5 would be half scale and a value of 2 would be double the scale.</p><p class="note"><strong>IMPORTANT!</strong> Changing the assigned sprite scale using these variables <strong>will also change the size of the bounding box to match</strong>, which means that the collision detection area for the sprite will also scale.</p><p class="dropspot">In this example, we're going to use some simple maths to make an instance scale the sprite up and down in a loop. To start with, open (or create) an object, assign it a sprite, and then give the object a <strong>Create Event</strong>. In this event add the following:</p><p class="dropspot"><img alt="GML VisualSet Variable Example" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_3_1.png"></p><p class="code">timer = 0;</p><p class="dropspot">Now add a <strong>Step Event</strong> to the object with this:</p><p class="dropspot"><img alt="GML VisualActions To Change Sprite Scale" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_3_2.png"></p><p class="code">timer = timer + 1;<br>var _val = dsin(timer);<br>image_xscale = 1 + _val;<br>image_yscale = 1 + _val;</p><p class="dropspot">Here we're using the maths function <a href="../GameMaker_Language/GML_Reference/Maths_And_Numbers/Angles_And_Distance/dsin.htm"><span class="inline">dsin()</span></a>&nbsp;to generate a value between -1 and 1 using the timer variable, and then applying that to the scale variables. After placing some instances into a room and pressing the <strong>Play</strong> button <img alt="Play Icon" class="icon" src="../assets/Images/Icons/Icon_PlayGame.png">, you should see how the instances scale up and down from a scale of 0 to a scale of 2 and then back again.</p><p class="dropspot"><img class="center" src="../assets/Images/QS_Guide/QS_DrawExample_3.gif" title="Animation Showing Sprite Scaling"></p><p class="dropspot">One last thing... change the " <span class="inline">image_yscale</span>" section to " <span class="inline">1 - _val</span>" and see what happens!</p><p class="dropspot">&nbsp;</p></div><p>&nbsp;</p><p>The above examples illustrate just some of the many ways that you can manipulate the object sprite when <span data-keyref="GameMaker Name">GameMaker</span> is default drawing, but what about if you want to draw more than one thing for an object? In those cases you need to use the <strong>Draw Event</strong> to explicitly tell <span data-keyref="GameMaker Name">GameMaker</span> what to draw, which is what we'll do in the following examples.</p><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop_down3" href="#"><span data-open-text="true" data-skip-index="true">Drawing Two (or more) Sprites Together</span><span data-close-text="true">Drawing Two (or more) Sprites Together</span></a></p><div class="droptext" data-targetname="drop_down3"><p class="dropspot">For this example, you'll need two sprites and one object. Call the sprites " <span class="inline">spr_One</span>" and " <span class="inline">spr_Two</span>", and then set the " <span class="inline">spr_One</span>" origin to the center and for " <span class="inline">spr_Two</span>" set its origin to the middle-left:</p><p class="dropspot"><img alt="Show Origins For Sprites" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_4_1.png">Assign the first sprite (" <span class="inline">spr_One</span>" with the center origin) to the object you have created and then add a <strong>Create Even</strong>t. In the Create Event add the following GML Visual or GML:</p><p class="dropspot"><img alt="Set Draw Angle Variable In DnD" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_4_1.png"></p><p class="code">draw_angle = 0;</p><p class="dropspot">We are going to use this variable to rotate " <span class="inline">spr_Two</span>" over time, and draw it overlayed on the sprite assigned to the object (" <span class="inline">spr_One</span>"). To do this we need to add a <strong>Draw Event</strong> to the object. By doing this we are telling <span data-keyref="GameMaker Name">GameMaker</span> that we want to take over what the instance draws, which means that our code will include a call to the <a href="../GameMaker_Language/GML_Reference/Drawing/Sprites_And_Tiles/draw_self.htm"><span class="inline">draw_self()</span></a>&nbsp;function or <a href="../Drag_And_Drop/Drag_And_Drop_Reference/Drawing/Draw_Self.htm"><strong>Draw Self</strong></a>&nbsp;action. This action simply replicates what the object does when no Draw Event is present and it is default drawing the assigned sprite. We'll then draw the second sprite that we want to use as the overlay sprite that is rotating. The GML Visual and GML looks like this:</p><p class="dropspot"><img alt="Draw Two Sprites With DnD" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_4_2.png"></p><p class="code">draw_self();<br>draw_angle = draw_angle + 0.5;<br>draw_sprite_ext(spr_Two, 0, x, y, 1, 1, draw_angle, c_red, 1);</p><p class="dropspot">Add a number of instances of the object into the room editor and then press the <strong>Play</strong> button <img alt="Play Icon" class="icon" src="../assets/Images/Icons/Icon_PlayGame.png"> at the top of the <a class="tooltip" title="The IDE, or Integrated Development Environment, is a software application that provides comprehensive facilities to computer programmers for software development. In this case, the entire frontend of GameMaker Studio 2 is considered the IDE, and includes sections to create graphics, add sounds, and add code to make your games.">IDE</a>. If all has gone correctly you should see something like this now:</p><p class="dropspot"><img alt="Animation Drawing Two Sprites Together" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_4_2.gif"></p><p class="dropspot">Before we leave this example, let's just tweak it a little bit and instead of having " <span class="inline">spr_Two</span>" simply rotate, we'll make it point towards the mouse position. For that we need to change the Draw Event GML Visual or GML to look like this:</p><p class="dropspot"><img alt="Edited Draw Code For Drawing Two Sprites With DnD" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_4_3.png"></p><p class="code">draw_self();<br>draw_angle = point_direction(x, y, mouse_x, mouse_y);<br>draw_sprite_ext(spr_Two, 0, x, y, 1, 1, draw_angle, c_red, 1);</p><p class="dropspot">Run the project again and this time you'll see something very different!</p><p class="dropspot"><img alt="Animation Drawing Two Sprites Pointing At Mouse" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_4_3.gif">The sprite now points towards the mouse regardless of where you move it to! As you can see, layering sprites is a great way to add details to an object or to have something move independently of the "base" sprite assigned to the object, and it's a powerful tool that you'll probably use a lot in your own projects.</p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop_down4" href="#"><span data-open-text="true" data-skip-index="true">Drawing Things Other Than Sprites</span><span data-close-text="true">Drawing Things Other Than Sprites</span></a></p><div class="droptext" data-targetname="drop_down4"><p class="dropspot">You can draw things in the Draw Event other than sprites too, like text, or shapes. In this example, we'll use the GML Visual or GML <span class="inline">draw_self()</span>&nbsp;function to draw the object sprite, but we'll also draw some other stuff, starting with some <strong>text</strong>. For this example, you'll need a sprite and an object (with the sprite assigned to it). In the object, first add a <strong>Create Event</strong> with this GML Visual or GML:</p><p class="dropspot"><img alt="Setting Variables Using DnD" class="center" height="506" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_5_1_1.png" width="317"></p><p class="code">name = choose("Fred", "Jonas", "Sharon", "Kate", "Frank", "John", "Monica", "Amanda");<br>number = irandom(100);</p><p class="dropspot">All this does is tell&nbsp;<span data-keyref="GameMaker Name">GameMaker</span> to choose one of the listed names and assign it to a variable, as well as generate a random number from 0 to 100 for each instance of the object. We want to draw these values to the screen, and so for that you need to now add a <strong>Draw Event</strong> and in it add the following GML Visual or GML:</p><p class="dropspot"><img alt="Drawing Text Using DnD" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_5_1.png"></p><p class="code">draw_self();<br>draw_set_halign(fa_center);<br>draw_text(x, y + 32, "My name is " + name);<br>draw_text(x, y + 48, "My number is " + string(number));</p><p class="dropspot">You'll notice in the above code that we use the <a href="../GameMaker_Language/GML_Reference/Strings/string.htm"><span class="inline">string()</span></a>&nbsp;function or <a href="../Drag_And_Drop/Drag_And_Drop_Reference/Data_Types/Number_To_String.htm"><strong>Number To String</strong></a>&nbsp;action on the "number " variable that we want to draw. This is because all text has to be made up of <em>characters</em>, not values, and so we need to use this function/action to convert the number value into those characters that we want to draw. In this case we are taking the random number we generated and turning it into a "string" of characters that can be drawn. Also note that we set the text <strong>alignment</strong>. This simply tells <span data-keyref="GameMaker Name">GameMaker</span> where to start drawing the text relative to the given position, and in this case we want the text to be centered along the x-axis.</p><p class="dropspot">Add a number of instances of the object into the room editor and then press the Play button <img alt="Play Icon" class="icon" src="../assets/Images/Icons/Icon_PlayGame.png">&nbsp; at the top of the IDE. You should see something like this:</p><p class="dropspot"><img alt="Sprites Being Drawn Along With Text" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_5_1.png"></p><p class="dropspot">In all the examples so far we've been drawing the sprite assigned to the instance, but that doesn't always have to be the case. <strong>You can draw anything you want</strong> in the draw event, regardless of the sprite assigned. To illustrate this point, we'll change the code that we have currently by removing the <span class="inline">draw_self()</span> call and replace with a function to draw a coloured ellipse, like this:</p><p class="dropspot"><img alt="Drawing Shapes Along With Text Using DnD" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_5_2.png"></p><p class="code">draw_ellipse_colour(x - 50, y - 32, x + 50, y + 32, c_fuchsia, c_lime, false);<br>draw_set_halign(fa_center);<br>draw_text(x, y + 32, "My name is " + name);<br>draw_text(x, y + 48, "My number is " + string(number));</p><p class="dropspot">Run the project again and you should see this:</p><p class="dropspot"><img alt="Example Of Drawing Shapes And Text Together" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_5_2.png"></p><p class="dropspot">One important thing to note about this, is that even though we aren't drawing the assigned sprite, <strong>it will still be used for collision detection</strong>. So, while you may be drawing one thing, collisions will still be calculated based on the assigned sprite as if it was placed in the room along with the instance, even if it's not visible. This is quite handy actually, as it means you can draw different sprites, but maintain a single <strong>collision mask</strong> based on the assigned sprite. Also note that you can still apply the different transforms like X/Y scale, and collisions will be based on the changed size, even though there is nothing being drawn to show this.</p></div><p>&nbsp;</p><p>&nbsp;</p><h1>The GUI Layer</h1><p>We mentioned at the top of the page that we'd be talking about the <strong>Draw GUI Event</strong> as well as the Draw Event, so let's look at that now. The Draw GUI Event works on something called the <strong><a class="tooltip" title="Short for 'Graphical User Interface', which is a user interface that includes graphical elements, such as windows, icons and buttons. In GameMaker you have a specific set of object events (Draw GUI Events) that can draw to this layer specifically designed for things like score, lives, inventories, etc...">GUI</a> Layer</strong>, which is a special drawing layer of a fixed width and height that is drawn over the instances in the room. The great thing about the GUI layer is that <em>it doesn't move with the room camera</em>, so it's the ideal place to add static GUI items, like scores, healthbars and other information that your game requires to communicate to the user. You can find out more information on the GUI layer from the <a href="../The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Events</a>&nbsp;section of the manual.</p><p class="note"><strong>NOTE</strong>: Rooms can be larger than the screen size, so you can have large levels for the player to move around in. This means that in the Room Editor (or in code) you need to define a <strong>camera</strong> that follows the action of your game. This is basically a way of setting up a fixed area of the screen to display different parts of the larger room based on - for example - the player position in the room, and is used in a lot of games. Think of the way that the view always follows the main character in classic games like Mario or Zelda. That's done with cameras. For more information see the section <a href="../The_Asset_Editors/Room_Properties/Room_Properties.htm">Room Properties</a> on the Room Editor&nbsp;section of the manual.</p><p>The following examples are all going to be using the <strong>Draw GUI</strong> event, so you'll need to create an object and add that event to it. Note that the object doesn't need a sprite assigned, as we are not wanting to default draw anything, nor do we need it to detect collisions. Objects like this, that are only designed for drawing things or controlling certain aspects of the game are often called <strong>Controller Objects</strong>. Also note that we will be using the same object for all the examples, so we recommend that you go through them one after the other (although this is not strictly necessary).</p><p><img alt="Draw GUI Event In An Object" class="center" src="../assets/Images/QS_Guide/QS_DrawGUIObject.png"> <a class="dropspot" data-rhwidget="DropSpot" data-target="drop_down5" href="#"><span data-open-text="true" data-skip-index="true">Drawing Text</span><span data-close-text="true">Drawing Text</span></a></p><div class="droptext" data-targetname="drop_down5"><p class="dropspot">When drawing to the GUI layer, the top-left corner is the origin position, and to the right is +X and down is +Y. This makes positioning text and graphics very easy, as you'll see in this example. All we're going to do here is draw a value that represents the player score, so in our object we'll need to add a <strong>Create Event</strong> to initialise a variable to hold this value, like this:</p><p class="dropspot"><img alt="Defining A Variable Using DnD" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_6_1.png"></p><p class="code">player_score = 0;</p><p class="dropspot">We also want to add a <strong>Keyboard Down &lt;Space&gt; Event</strong> to the object, as we'll be using that to increment the score every time you press the Space key.</p><p class="dropspot"><img alt="Adding A Space Key Pressed Event" class="center" src="../assets/Images/QS_Guide/QS_Add_SpaceKeyPressEvent.png"></p><p class="dropspot">In this event add the following:</p><p class="dropspot"><img alt="GML VisualActions In The Space Key Event" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_6_2.png"></p><p class="code">var _val = irandom(100);<br>player_score = player_score + _val;</p><p class="dropspot">Finally, let's draw the score value in the Draw GUI event, like this:</p><p class="dropspot">In this event add the following:</p><p class="dropspot"><img alt="Drawing Text To The GUI Layer Using DnD" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_6_3.png"></p><p class="code">draw_set_halign(fa_left);<br>draw_set_colour(c_yellow);<br>draw_text(32, 32, "SCORE:");<br>draw_set_colour(c_white);<br>var _str = string(player_score);<br>draw_text_transformed(32, 48, _str, 2, 2, 0);</p><p class="dropspot">You'll notice how we've&nbsp;used <a class="tooltip" title="In computer programming, the term hard-coded is used to describe code that is considered fixed and not likely to change. Hardcoded features are built into hardware or software in such a way that they cannot be modified later on. For example, if you are making a game and 'hard-code' the player health to 10, then you would be using the value 10 throughout the game code rather than using a variable.">hard-coded</a>&nbsp;(or fixed) values for the x/y position of the text to be drawn, since we don't need it to be relative to any instance as we are drawing to the GUI layer. We've also used the "set colour" function to change the colour of the text, as well as the "transformed" fucntion to make the actual score value larger, which illustrates how you can go about customising text elements in your own games.</p><p class="dropspot">Add a single instance of this object to your room now and then press the <strong>Play</strong> button <img alt="Play Icon" class="icon" src="../assets/Images/Icons/Icon_PlayGame.png">. When the game runs press and release the <span class="inline">&lt;Space&gt;</span> key and you should see the score value increase.</p><p class="dropspot"><img alt="Animation Showing Text Being Drawn To The GUI Layer" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_6.gif"></p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop_down6" href="#"><span data-open-text="true" data-skip-index="true">Drawing Sprites</span><span data-close-text="true">Drawing Sprites</span></a></p><div class="droptext" data-targetname="drop_down6"><p class="dropspot">In this example, we are going to use the GUI layer to draw some sprites. The most obvious use for this is to draw the players lives, so lets go ahead and do just that! You'll need a sprite for this example - which should be about 64x64 pixels - but it shouldn't be assigned to the object, as we'll be drawing it ourselves.</p><p class="dropspot">To start with, we need to add some new variables to the object in the <strong>Create Event</strong> (if you've done the previous example, add the following below what's already there):</p><p class="dropspot"><img alt="Defining Variables Using DnD" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_7_1.png"></p><p class="code">player_lives = 3;<br>gui_w = display_get_gui_width();</p><p class="dropspot">In this code we initialise a variable for the player lives, but we also create a variable to hold the width of the GUI layer, so that we can position things correctly relative to the right of the screen. We could just hardcode a value into the code and use that, but that would mean that if we make any changes to the size of the room, or if we add cameras etc... later, then we'd need to go through the code and change the value everywhere. Using the <a href="../GameMaker_Language/GML_Reference/Cameras_And_Display/display_get_gui_width.htm"><span class="inline">display_get_gui_width()</span></a>&nbsp;function instead means that we don't need to worry about any future changes like that as the code will adapt automatically to whatever size the GUI layer ends up.</p><p class="dropspot">Next we want to add a <strong>Keyboard Pressed &lt;Enter&gt; Event</strong> to the object, as we'll be using that to change the number of lives every time the Enter key is pressed:</p><p class="dropspot"><img alt="Adding An Enter Key Pressed Event" class="center" src="../assets/Images/QS_Guide/QS_Add_EnterKeyPressEvent.png"></p><p class="dropspot">In this event add the following:</p><p class="dropspot"><img alt="GML VisualIn The Enter Key Down Event" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_7_2.png"></p><p class="code">player_lives = player_lives - 1;<br><br>if (player_lives &lt; 0)<br>{<br>player_lives = 3;<br>}</p><p class="dropspot">Finally, we need to draw the sprites to the display. For this we'll be using a " <span class="inline">for</span>" loop (information using GML <a href="../GameMaker_Language/GML_Overview/Language_Features/for.htm">here</a>&nbsp;and for GML Visual <a href="../Drag_And_Drop/Drag_And_Drop_Reference/Loops/For.htm">here</a>), along with the GUI width variable to position everything in the top right corner of the screen. So, add this into the Draw Gui Event (after any other actions that it may have from previous examples):</p><p class="dropspot"><img alt="GML VisualActions To Draw Sprites To The GUI Layer" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_7_3.png"></p><p class="code">for (var i = 0; i &lt; player_lives; i += 1)<br>{<br>var _xx = gui_w - 48 - (i * 70);<br>draw_sprite(spr_Heart, 0, _xx, 48);<br>}</p><p class="dropspot">If you haven't already added an instance of this object to a room, go ahead and add it now (only one!), then press the <strong>Play</strong> button <img alt="Play Icon" class="icon" height="24" src="../assets/Images/Icons/Icon_PlayGame.png" width="24">. Once the game is running press the <span class="inline">&lt;Enter&gt;</span> key various times to see the lives change.</p><p class="dropspot"><img alt="Animation Drawing Sprites To The GUI Layer" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_7.gif"></p><p class="dropspot">Before you leave this example, you should experiment with the number of lives and see what happens. At the moment it's set to 3, but change the Create Event and the Key Pressed event to set the value to 5, or 10... if you've done everything right, then the code should adapt and draw them all correctly!</p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop_down7" href="#"><span data-open-text="true" data-skip-index="true">Drawing A Healthbar</span><span data-close-text="true">Drawing A Healthbar</span></a></p><div class="droptext" data-targetname="drop_down7"><p class="dropspot">This final example covers drawing a healthbar to the GUI layer. There are a number of ways that this can be done, but <span data-keyref="GameMaker Name">GameMaker</span> has a built in function specifically for doing healthbars, so that's what we'll be using here, although you can create your own using sprites or shapes too. To start with, as before, we need to initialise a varaible to hold the health value, so add the following GML Visual or GML into the <strong>Create Event</strong> of the object (after any other code that may already be there):</p><p class="dropspot"><img alt="Defining A Variable Using DnD" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_8_1.png"></p><p class="code">player_health = 100;</p><p class="dropspot">We want to use the arrow keys to change the health value up or down depending on which arrow key is pressed, and we could do that by adding in two <strong>Keyboard Pressed &lt;Arrow&gt;</strong> events, however it's probably easier to use a <strong>Step Event</strong> and some code to check for the keys, so go ahead and add a <strong>Step Event</strong> now with the following GML Visual or GML:</p><p class="dropspot"><img alt="Step Event GML VisualActions" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_8_2.png"></p><p class="code">if (keyboard_check(vk_up))<br>{<br>&nbsp; &nbsp; if (player_health &lt; 100)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; player_health = player_health + 1;<br>&nbsp; &nbsp; }<br>}<br><br>if (keyboard_check(vk_down))<br>{<br>&nbsp; &nbsp; if (player_health &gt; 0)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; player_health = player_health - 1;<br>&nbsp; &nbsp; }<br>}</p><p class="dropspot">With that done, we can actually get around to drawing the healthbar, which is done in the Draw GUI event, adding the following (after anything else that is already there):</p><p class="dropspot"><img alt="GML VisualFor The Draw GUI Event To Draw A Healthbar" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_DnD_8_3.png"></p><p class="code">var _xx = display_get_gui_width() / 2;<br><br>draw_healthbar(_xx - 50, 24, _xx + 50, 40, player_health, c_black, c_red, c_lime, 0, true, true);</p><p class="dropspot">Add an instance of this object to a room if you haven't already done so (only one, though!), and then press the <strong>Play</strong> button <img alt="Play Icon" class="icon" src="../assets/Images/Icons/Icon_PlayGame.png">. Once the game is running press the <span class="inline">&lt;Up Arrow&gt;</span> and <span class="inline">&lt;Down Arrow&gt;</span> keys various times to see the health change.</p><p class="dropspot"><img alt="Animation Of Drawing A Healthbar" class="center" src="../assets/Images/QS_Guide/QS_DrawExample_8.gif"></p></div><p>&nbsp;</p><p>We hope that after doing these examples you have a bit more confidence when using <span data-keyref="GameMaker Name">GameMaker</span> and a bit more understanding of how it all works. The next section will explore how to get these things you've been drawing to move around the room as well as accept - and respond to - user input.</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="../Content.htm">Index</a></div><div style="float:right">Next: <a href="Movement_And_Controls.htm">Movement And Controls</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>