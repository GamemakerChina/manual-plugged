<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/main.css"><script>let str;removeHtml=function(e){return e=(e=(e=(e=e.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(e){return e.match(/(<([^>]+)>)/gi)},setTranslator=function(e,t,a){let n;n=a?e.attr(a):e.html();let l=t[removeHtml(n)];if(null!=l&&l.length){t=retHtml(n);let o=0;t&&t.forEach(function(e,t){var a=l.replace("{"+o+"}",e);l=a===l?l.replace("{}",e):a,o++}),a?e.attr(a,l):e.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){var e=`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`;$(".header").length?$(".header").append(e):($(".topic-header").append(e),$(".topic-header button").css("position","relative").css("top","44px"))},removeExtensionFromHash=function(e){return e.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")};let json_global,json_file={'"{}filename{}": The complete path to the file you requested.':'"{}filename{}"：您请求的文件的完整路径。','"{}id{}": The ID of the resource that you have loaded. This will be the same as the variable that you have assigned the resource to.':'"{}id{}"：您加载的资源的ID。这将与您为其分配资源的变量相同。','"{}status{}": Returns a value of less than 0 for an error.':'"{}status{}"：返回小于 0 的错误值。',"Image Loaded":"图像已加载","The above code will first check the {}id{} of the DS map that has been created, then check the {}status{} of the callback. If the value is greater than or equal to 0 (signalling success) the result from the callback will then be used to set the sprite index to the newly loaded image.":"上面的代码将首先检查已创建的DS映射的{}id{}，然后检查回调的{}状态{}。如果值大于或等于0(表示成功)，则结果来自然后将使用回调将精灵索引设置为新加载的图像。","This will now start to load the image into the device or the browser, but it will not block {}GameMaker{} while it waits for the file to be loaded. Instead {}GameMaker{} will keep running as normal until the image is loaded and the {}callback{} triggers the {}Image Loaded Event{}, where a {}DS Map{}&nbsp;is created and stored in the special variable {}{}async_load{}{}. The map contains the following information:":"这现在将开始将图像加载到设备或浏览器中，但在等待加载文件时不会阻止 {}GameMaker{}。相反，{}GameMaker{} 将继续正常运行，直到图像被加载并且 {} 回调 {} 触发 {} 图像加载事件 {}，其中创建了 {}DS Map{} 并将其存储在特殊变量中{}{}async_load{}{}。地图包含以下信息：","You would then assign the newly loaded image to a sprite in this event. The following code example demonstrates how the returned information would be used:":"然后，在此事件中将新加载的图像分配给精灵。以下代码示例演示如何使用返回的信息：","{}Image Loaded{}":"{}图像已加载{}","{}This event is triggered when you load an image into {}GameMaker{}&nbsp;either on HTML5, or through a&nbsp;{}URL{}. For example, say you want to load a sprite image, and only change the current sprite for the instance to the new one after it has loaded. You would have something like this in the Create event (or any other event):":"{} 当您在 HTML5 上或通过 {}URL{} 将图像加载到 {}GameMaker{} 时，会触发此事件。例如，假设您要加载精灵图像，并且仅在加载后将实例的当前精灵更改为新精灵。您将在创建事件 (或任何其他事件) 中拥有类似的内容："},get_json_global=$.ajax({url:"/global.json",type:"GET",dataType:"json",async:!1,success:function(e){json_global=e}});$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json_file)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../..",gTopicId="6.3.1.2.0_8"</script><script type="text/javascript" src="../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Image Loaded</title><meta name="generator" content="Adobe RoboHelp 2022"><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page detailing the Image Loaded async event."><meta name="rh-index-keywords" content="Objects - Async Image Loaded Event"><meta name="search-keywords" content="Image Loaded,ev_async_web_image_load"><link rel="stylesheet" type="text/css" href="../../../assets/css/default.css"><script src="../../../assets/scripts/main_script.js" type="module"></script><meta name="brsnext" value="The_Asset_Editors/Object_Properties/Async_Events/Networking.htm"><meta name="brsprev" value="The_Asset_Editors/Object_Properties/Async_Events/IAP.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Image Loaded"><span>Image Loaded</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">Image Loaded</span></h1><p><img alt="Image Loaded Event" class="center" src="../../../assets/Images/Asset_Editors/Async_ImageLoaded.png">This event is triggered when you load an image into <span data-keyref="GameMaker Name">GameMaker</span>&nbsp;either on HTML5, or through a&nbsp;<a class="tooltip" title="Short for 'Universal Resource Locator', and is basically the address of something on the internet.">URL</a>. For example, say you want to load a sprite image, and only change the current sprite for the instance to the new one after it has loaded. You would have something like this in the Create event (or any other event):</p><p class="code">var _url =&nbsp;"http://www.angusgames.com/game/background1.png";<br>spr = sprite_add(_url, 0, false, false, 0, 0);</p><p>This will now start to load the image into the device or the browser, but it will not block <span data-keyref="GameMaker Name">GameMaker</span> while it waits for the file to be loaded. Instead <span data-keyref="GameMaker Name">GameMaker</span> will keep running as normal until the image is loaded and the <a class="tooltip" title="A callback is simply a function that runs and then triggers another function (or code block) when it has finished doing whatever it was assigned to do. For example, the funtion sprite_add() will trigger a callback in the asynchronous Image Loaded event when the sprite has been loaded.">callback</a> triggers the <strong>Image Loaded Event</strong>, where a <a href="../../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm">DS Map</a>&nbsp;is created and stored in the special variable <a href="../../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm"><span class="inline">async_load</span></a>. The map contains the following information:</p><ul class="dropspotlist"><li class="dropspot">"<span class="inline">filename</span>": The complete path to the file you requested.</li><li class="dropspot">"<span class="inline">id</span>": The ID of the resource that you have loaded. This will be the same as the variable that you have assigned the resource to.</li><li class="dropspot">"<span class="inline">status</span>": Returns a value of less than 0 for an error.</li></ul><p>You would then assign the newly loaded image to a sprite in this event. The following code example demonstrates how the returned information would be used:</p><p class="code">if (ds_map_find_value(async_load, "id") == spr)<br>{<br>&nbsp; &nbsp; if (ds_map_find_value(async_load, "status") &gt;= 0)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; sprite_index = spr;<br>&nbsp; &nbsp; }<br>}</p><p>The above code will first check the <span class="inline">id</span> of the DS map that has been created, then check the <span class="inline">status</span> of the callback. If the value is greater than or equal to 0 (signalling success) the result from the callback will then be used to set the sprite index to the newly loaded image.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="../Async_Events.htm">Async Events</a></div><div style="float:right">Next: <a href="Networking.htm">Networking</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>