<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption,blockquote").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption,.expandtext").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../..",gTopicId="6.2.0_6"</script><script type="text/javascript" src="../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Source Examples</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../assets/css/default.css" type="text/css"><script src="../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Gurpreet S. Matharoo"><meta name="topic-comment" content="Page containing extended examples for extensions"><meta name="rh-index-keywords" content="Source Extension Examples"><meta name="search-keywords" content="source android ios extensions native"><meta name="brsnext" value="The_Asset_Editors/Fonts.htm"><meta name="brsprev" value="The_Asset_Editors/Extension_Creation/HTML5_Extensions.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Source Examples"><span>Source Examples</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>Source Examples</h1><p>This page contains examples and information on extension source code for Android and iOS, to help you create your own native extensions for those platforms.</p><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down" href="#"><span data-open-text="true" data-skip-index="true">Android (Base Example)</span><span data-close-text="true">Android (Base Example)</span></a></p><div class="droptext" data-targetname="drop-down"><p>Our example extension for Android will contain functions that do the following:</p><ul class="dropspotlist"><li>Return two numbers added together</li><li>Return a string consisting of an input string and value</li><li>Return a string consisting of two input strings</li><li>Trigger the <a href="../Object_Properties/Async_Events/Social.htm">Async - Social</a> event and fill values in its <span class="inline">async_load</span> map</li></ul><p>This extension will make use of a <span class="inline">.java</span> file, the contents of which are given&nbsp;below (click to open):</p><p class="note"><a data-height="800" data-rhwidget="HyperlinkPopover" data-width="1000" href="Source_Files/GenericTest.htm">GenericTest.java</a></p><p>To add such a file to your extension, you need to go under its&nbsp;<a href="Android_Extensions.htm">Android Properties</a>&nbsp;and first enter a class name (for this example, "GenericTest"),&nbsp;then&nbsp;click on "Add Source" and select the <span class="inline">.java</span> file. This will add the selected file to your project directory --&nbsp;you can&nbsp;right-click on your extension, select "Open in Explorer" and see the source files there.</p><p>You can now add a new placeholder file to your extension and create functions inside it&nbsp;with the following properties:</p><ul class="dropspotlist"><li><em>function / external name:</em><span class="inline">AddTwoNumbers</span><br><em>help:</em><span class="inline">AddTwoNumbers(value1, value2)</span><br><em>arguments:</em><span class="inline">double,&nbsp;</span><span class="inline">double</span><br><em>return type:</em><span class="inline">double</span></li><li><em>function / external name:</em><span class="inline">HowManyObjects</span><br><em>help:</em><span class="inline">HowManyObjects(value1, value2, string)</span><br><em>arguments:</em><span class="inline">double,&nbsp;</span><span class="inline">double,&nbsp;</span><span class="inline">string</span><br><em>return type:</em><span class="inline">string</span></li><li><em>function / external name:</em><span class="inline">BuildAString</span><br><em>help:</em><span class="inline">BuildAString(string1, string2)</span><br><em>arguments:</em><span class="inline">string,&nbsp;</span><span class="inline">string</span><br><em>return type:</em><span class="inline">string</span></li><li><em>function / external name:</em><span class="inline">ReturnAsync</span><br><em>help:</em><span class="inline">ReturnAsync(value1, value2)</span><br><em>arguments:</em><span class="inline">double,</span><span>&nbsp;</span><span class="inline">double</span><br><em>return type:</em><span class="inline">double</span></li></ul><p>Here is an example of the <span class="inline">AddTwoNumbers()</span> function:</p><p><img class="center" src="../../assets/Images/Asset_Editors/Editor_Extensions_EE1_Function.png">You can now call these functions from your game code and use them like&nbsp;any other built-in function:</p><p class="code">var result1 = string(AddTwoNumbers(irandom(100), 50));<br>var result2 = BuildAString("Hello", "World");<br>var result3 = HowManyObjects(irandom(1000), irandom(1000), "Targets");<br>ReturnAsync(irandom(1000), irandom(1000));</p><p>The <span class="inline">ReturnAsync()</span> function will trigger the&nbsp;<a href="../Object_Properties/Async_Events/Social.htm">Async - Social</a> event, so you will need to add that event to your object and read data from its <span class="inline">async_load</span> map (which is filled by the extension's source code given above).</p><p class="code">var type = async_load[? "type"];<br><br>if (type == "finished")<br>{<br>&nbsp; &nbsp; var result4 = "value1: " + string(async_load[? "argument0"]) + ", ";<br>&nbsp; &nbsp; result4 += "value2: " + string(async_load[? "argument1"]);<br>}</p><p>&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down1" href="#"><span data-open-text="true" data-skip-index="true">iOS (Base Example)</span><span data-close-text="true">iOS (Base Example)</span></a></p><div class="droptext" data-targetname="drop-down1"><p>The example provided for iOS is the same as the Android example given above; only the source files differ, which we'll cover in this section.</p><p>iOS extensions make use of an <span class="inline">.h</span> and an <span class="inline">.mm</span> file, and the contents of both are given below (click to open):</p><p class="note"><a data-height="800" data-rhwidget="HyperlinkPopover" data-width="1000" href="Source_Files/GenericTest-iOS.htm">GenericTest iOS Source Files</a></p><p>To add these files to your extension, you first need to go under its <a href="iOS_Extensions.htm">iOS Properties</a> and enter a class name (for this example, "GenericTest").&nbsp;You can then use either the "Enter framework path" option (if the files are present on your macOS machine used for building) or the "Add Source" option (if they are on your development machine); regardless of the option you use, you will need to point them to the directory that contains your <span class="inline">.h</span> and <span class="inline">.mm</span> files.</p><p>You can add these source files to the same extension that was set up in the previous section for Android, meaning that any functions already defined in that extension will now work on iOS too (given that the <em>External Names</em> of all functions on Android and iOS are the same). If you are creating a new extension, you can simply create the functions&nbsp;in the same way as previously described.</p><p>&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down5" href="#"><span data-open-text="true" data-skip-index="true">Android (Callbacks)</span><span data-close-text="true">Android (Callbacks)</span></a></p><div class="droptext" data-targetname="drop-down5"><p>You can use the following callback functions in your <span class="inline">.java</span> extension files:</p><p class="code">public void onStart()<br>public void onRestart()<br>public void onStop()<br>public void onDestroy()<br>public void onPause()<br>public void onResume()<br>public void onActivityResult(int requestCode, int resultCode, Intent data)<br>public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults)<br>public void onNewIntent(android.content.Intent newIntent)<br>public void onWindowFocusChanged(boolean hasFocus)<br>public void onConfigurationChanged(Configuration newConfig)<br></p><p><br></p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down7" href="#"><span data-open-text="true" data-skip-index="true">iOS (Callbacks)</span><span data-close-text="true">iOS (Callbacks)</span></a></p><div class="droptext" data-targetname="drop-down7"><p>You can use the following callback functions in your <span class="inline">.mm</span> extension files:</p><p class="code">-(void) Init<br>-(void) onLaunch:(NSDictionary*)launchOptions<br>-(void) onResume<br>-(void) onPause<br>-(void) applicationDidEnterBackground:(UIApplication *)application<br>-(void) applicationWillEnterForeground:(UIApplication *)application<br>-(void) onStop<br>-(void) applicationProtectedDataDidBecomeAvailable:(UIApplication *)application<br>-(void) applicationProtectedDataWillBecomeUnavailable:(UIApplication *)application<br>-(void) applicationDidReceiveMemoryWarning:(UIApplication *)application<br>-(void) applicationSignificantTimeChange:(UIApplication *)application<br>-(void) application:(UIApplication *)application willEncodeRestorableStateWithCoder:(NSCoder *)coder<br>-(void) application:(UIApplication *)application didDecodeRestorableStateWithCoder:(NSCoder *)coder<br>-(void) application:(UIApplication *)application didUpdateUserActivity:(NSUserActivity *)userActivity<br>-(void) application:(UIApplication *)application didFailToContinueUserActivityWithType:(NSString *)userActivityType error:(NSError *)error<br>-(void) application:(UIApplication *)application handleWatchKitExtensionRequest:(NSDictionary *)userInfo reply:(void (^)(NSDictionary *replyInfo))reply<br>-(void) applicationShouldRequestHealthAuthorization:(UIApplication *)application<br>-(void) openURL:(NSURL *)url sourceApplication:(NSString *) sourceApplication annotation:(id)annotation<br>-(void) application:(UIApplication *)application userDidAcceptCloudKitShareWithMetadata:(CKShareMetadata *)cloudKitShareMetadata</p><p>&nbsp;</p></div><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="../Extensions.htm">The Extension Editor</a></div><div style="float:right">Next:&nbsp;<a href="Creating_An_Extension.htm">Creating An Extension</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>