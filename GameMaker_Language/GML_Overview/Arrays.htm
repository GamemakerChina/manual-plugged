<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption,blockquote").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption,.expandtext").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../..",gTopicId="8.2.1.1_9"</script><script type="text/javascript" src="../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Arrays</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../assets/css/default.css" type="text/css"><script src="../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining Arrays"><meta name="rh-index-keywords" content="Arrays"><meta name="search-keywords" content="Arrays"><meta name="brsnext" value="GameMaker_Language/GML_Overview/Structs.htm"><meta name="brsprev" value="GameMaker_Language/GML_Overview/Functions/Static_Variables.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Arrays"><span>Arrays</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>Arrays</h1><p>Arrays&nbsp;can be extremely useful and are an essential part of making games. It is essentially a type of variable that can hold multiple values as a "list" -- consider the following code:</p><p class="code">numbers = [ 0, 1, 2, 3, 4, 5 ];<br><br>fruits = [ "Apples", "Oranges", "Mangoes" ];</p><p>Using the <span class="inline2">[item, item, item]</span> syntax we are creating an array that is stored in a variable. The items stored in an array can later be accessed through that variable using an integer number, starting at <span class="inline">0</span>, which is placed inside <span class="inline2">[]</span> brackets:</p><p class="code">first_fruit = fruits[ 0 ];<br>second_fruit = fruits[ 1 ];<br>// ...and so on.</p><p><label for="aone">A basic array is classed as having 1 <strong>dimension</strong>, but you can have arrays with more than one dimension too. The sections below explain both types of arrays:</label></p><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down1" href="#"><span data-open-text="true" data-skip-index="true">1-Dimensional Arrays</span><span data-close-text="true">1-Dimensional Arrays</span></a></p><div class="droptext" data-targetname="drop-down1"><p class="dropspot">Before going any further let's clarify what an array actually is and how it's structured. An array is simply a <a href="Data_Types.htm">data type</a> that is assigned to a variable, and it can contain not just one value, but multiple values. The image below shows a schematic for a basic array:</p><p class="dropspot"><img class="center" src="../../assets/Images/Scripting_Reference/GML/Overview/1DArrayExample.png"></p><p class="dropspot">This is called a <strong>1D</strong> (one-dimensional) array, and as you can see the array is stored in the variable "<span class="inline">a</span>" and contains multiple values. To access the array you would do something like the following:</p><p class="code">var _val = a[0];<br>show_debug_message(_val);</p><p class="dropspot">The above code gets the value from position 0 of&nbsp;the array "<span class="inline">a</span>" then outputs it to the console, which - based on the contents of the array shown in the image above - would output 125. If you did the following:</p><p class="code">var _val = a[3];<br>show_debug_message(_val);</p><p class="dropspot">The output would show "Hi!".</p><p class="dropspot">As you can see, you give the array a variable name and then a value in square brackets <span class="inline">[]</span>, where the value is the position in the array to get the data from. So&nbsp;essentially, an array is a container with a number of slots to store values, and each position in the container has a specific number to identify it, which is what we put in the <span class="inline">[]</span>. It's worth noting that the contents of an array <b>always&nbsp;start&nbsp;at 0</b> and can <i>never be negative</i><em>!</em></p><h3 class="dropspot">&nbsp; &nbsp; &nbsp; &nbsp;Creating Arrays</h3><p class="dropspot">We've shown how to check an array for data, but how do we create the array to start with? First it has to be&nbsp;<i>initialized</i> before we can use it or <span data-keyref="GameMaker Name">GameMaker</span> will give us an error. Initializing an array just means that we give each slot of the array an initial value in preparation for it to be used elsewhere in the project code. This is important to remember as it means that you have to do a certain amount of planning before using arrays, but it is easy enough to initialize one using a repeat loop like this:</p><p class="code">var i = 9;<br><br>repeat(10)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;array[i] = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;i -= 1;<br>}</p><p class="dropspot">This simple code will initialize a ten-slot&nbsp;array (from 0 to 9) to hold 0, ie: each slot in the array contains the value 0. You will notice that the array has been initialised <i>backwards</i>, with the last value being defined first. This is not strictly necessary but is the optimal way to do it as it will reserve a space in memory that is the exact size of the array, whereas if you initialize an array from 0 <em>upwards</em>, the memory has to be re-allocated for every additional value added (so for a ten-slot&nbsp;array, initialising it in a loop would change the memory allocation ten times). The speed difference is negligible for smaller arrays, but larger ones should be optimised as much as possible in this way.</p><p class="note"><b>NOTE</b>: The HTML5 export is the exception to the above rule, and when targeting that you should initialise arrays in consecutive order from 0 upwards.</p><p class="dropspot">You can also use the GML function <a href="../GML_Reference/Variable_Functions/array_create.htm"><span class="inline">array_create()</span></a> to initialize an array with&nbsp;a fixed size, and you can even create "empty" arrays with&nbsp;<em>no</em>&nbsp;values, for example:</p><p class="code">my_array = [];</p><p class="dropspot">This tells GameMaker that the variable "<span class="inline">my_array</span>" is an array, and you can then <a href="../GML_Reference/Variable_Functions/array_push.htm">add values</a> to it at any time in the future. However, if you try to access a value in an empty&nbsp;array then you will get an error.</p><p class="dropspot">If you already know which items you want to put into the array, you can add comma-separated values between the brackets when declaring the array:</p><p class="code">my_array = ["Steve", 36, "ST-3V3 - Steve Street"];</p><h3 class="dropspot">&nbsp; &nbsp; &nbsp; &nbsp;Array Bounds</h3><p class="dropspot">You should always take care to only access valid array positions, as trying to access a value outside of an array will also give an error. For example, this will cause the project to crash when run:</p><p class="code">my_array = array_create(5, 0);<br>var _val = my_array[6];</p><p class="dropspot">The array was only initialised with 5&nbsp;positions, but we've tried to get position 7 - since arrays are numbered from 0, <span class="inline">array[6]</span> is position 7&nbsp;- therefore the game generates an error and crashes.</p><h3 class="dropspot">&nbsp; &nbsp; &nbsp; &nbsp;Using Arrays</h3><p class="dropspot">Now how do we use an array practically? Exactly the same as we would use a normal variable, as shown in the following examples:</p><p class="code">// Add two array values together<br>total = array[0] + array[5];<br><br>// Check an array value<br>if array[9]&nbsp;== 10<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;// Do something<br>}<br><br>// Draw an array value<br>draw_text(32, 32, array[3]);</p><p class="dropspot">Since arrays are numbered sequentially, this means you can loop through them to perform extra actions too, just like we did to initialize it:</p><p class="code">var total = 0;<br><br>for (var i = 0; i &lt; 10; ++i)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;total += array[i];<br>&nbsp;&nbsp;&nbsp;&nbsp;draw_text(32, 32 + (i * 32), array[i]);<br>}<br><br>draw_text(32, 32 + (i * 32), total);</p><p class="dropspot">The above code will add up all the values in our array, draw each one of them and then draw the total value at the end.</p><h3 class="dropspot">&nbsp; &nbsp; &nbsp; &nbsp;Deleting Arrays</h3><p class="dropspot">The last thing to mention about arrays is that you can delete an array simply by "re-assigning" the variable that defines it to a single value. This will free up the memory associated with all the positions and values for that array. For example:</p><p class="code">// Create an array<br>for (var i = 9; i &gt; -1; --i)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;a[i] = i;<br>}<br><br>// Delete the array<br>a = -1;</p><p class="dropspot">If the array has multiple dimensions (see below), they will all be cleaned up too, and note that when you create arrays in instances, these do not need to be cleaned up when the instance is removed from the game, as they will be removed automatically by the <a class="tooltip" title="The garbage collector is an automated tool that is part of the game code and is used to remove certain things (like arrays and structs) from memory when they are no longer referenced in your code, without the need for you to explicitly remove them.">garbage collector</a> on Destroy or Room End. However, if any of the array positions hold references to&nbsp;<em>dynamic</em>&nbsp;assets, such as particle systems, buffers, or data structures, then these&nbsp;<em>will</em>&nbsp;need to be destroyed before the array is deleted, the instance is destroyed or the room ends.</p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down2" href="#"><span data-open-text="true" data-skip-index="true">Multi-Dimensional Arrays</span><span data-close-text="true">Multi-Dimensional Arrays</span></a></p><div class="droptext" data-targetname="drop-down2"><p class="dropspot"><span style="text-align:justify">We now know what a 1-dimensional array is, but in <span data-keyref="GameMaker Name">GameMaker</span> you can have arrays with multiple dimensions, which are essentially structured as an array inside an array inside an array... For example, the following is a <strong>2D</strong>&nbsp;(two-dimensional) array:</span></p><p class="code">array[0][0] = 5;</p><p class="dropspot">This is essentially telling GameMaker that the array is actually comprised of various 1D arrays. Here's an extended example:</p><p class="code">array<strong>[0]</strong>[0] = 0;<br>array<strong>[0]</strong>[1] = 1;<br>array<strong>[0]</strong>[2] = 2;<br><br>array<strong>[1]</strong>[0] = 3;<br>array<strong>[1]</strong>[1] = 4;<br><strong></strong> array<strong>[1]</strong>[2] = 5;</p><p class="dropspot">In the above code, <span class="inline">array[0]</span> holds another array, and so does&nbsp;<span class="inline">array[1]</span>.</p><p class="dropspot">Alternatively, to access 2D arrays you can also use the following syntax:&nbsp;</p><p class="code">array[0, 0] = 5;</p><p class="note"><span data-conref="../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;The above syntax only works for 2D arrays.</p><p class="dropspot">A multi-dimension array needs to be initialised before use, the same as a single 1D array, and can hold real numbers, strings, and any other <a href="Data_Types.htm">data type</a>, just like any variable, making them ideal candidates for any game that needs to store large amounts of data in an easily accessible way (remember, you can loop through an array easily).</p><p class="dropspot">You can also initialize a multi-dimensional array within one statement&nbsp;by nesting 1-dimensional arrays:</p><p class="code">two_dimensional_array =&nbsp;<br>[<br>&nbsp; &nbsp; ["Apple", 10, 2],<br>&nbsp; &nbsp; ["Orange", 5, 2],<br>&nbsp; &nbsp; ["Mango", 15, 4],<br>&nbsp; &nbsp; // ...and so on.<br>]</p><p class="dropspot">Multi-dimension arrays are also not limited to <em>just</em> two dimensions, and you can have 3, 4 or more dimensions to an array as required in your code, just by adding <span class="inline">[n]</span> further arguments, eg:</p><p class="code">array[0][0][0] = 1;&nbsp; &nbsp; &nbsp;// A three dimensional array<br>array[0][0][0][0] = 1;&nbsp; // A four dimensional array<br>// etc...</p><p class="dropspot">It should be noted too that the length of each dimension in an array can be different, so you can have the initial array dimension with a length of 3, but the second dimension entry can be a different length for each slot in the first dimension; for example:</p><p class="code">array[2][2] = "3";<br>array[2][1] = "2";<br>array[2][0] = "1";<br><br>array[1][3] = "four";<br>array[1][2] = "three";<br>array[1][1] = "two";<br>array[1][0] = "one";<br><br>array[0][1] = 2;<br>array[0][0] = 1;</p><p class="dropspot">In the above code, <span class="inline">array[0]</span> has 2 slots, <span class="inline">array[1]</span> has 4 slots and <span class="inline">array[2]</span> has 3 slots.</p><h3 class="dropspot">&nbsp; &nbsp; &nbsp; &nbsp;Extended Example</h3><p class="dropspot">Here is one final example of how this may be used in an actual game:&nbsp;Say you want to spawn four different enemies at four different points in your game depending on a random value. Well, we can use an array with 2 dimensions to do this and save writing out a load of code.</p><p class="dropspot">First we should initialize the array we are going to use in the Create event of our "controller" object (note the use of comments to remind you what each array entry does):</p><p class="code">enemy[3][2] = 448; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//y position<br>enemy[3][1] = 32; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//x position<br>enemy[3][0] = obj_Slime; //Object<br>enemy[2][2] = 448;<br>enemy[2][1] = 608;<br>enemy[2][0] = obj_Skeleton;<br>enemy[1][2] = 32;<br>enemy[1][1] = 608;<br>enemy[1][0] = obj_Knight;<br>enemy[0][2] = 32;<br>enemy[0][1] = 32;<br>enemy[0][0] = obj_Ogre;</p><p class="dropspot">We now have the objects to spawn instances of and their corresponding x and y spawn coordinates within the room all stored in our array. This can now be used as follows in another event of the controller object (an alarm for example, or a key press event):</p><p class="code">//get a random number from 0 to 3, inclusive<br>var i = irandom(3);<br><br>//Use the array to create the object<br>instance_create_layer(enemy[i][1], enemy[i][2], "Enemy_Layer", enemy[i][0]);</p><p class="dropspot">That short code will now spawn a random enemy in the game room, and it uses far less code than an "<span class="inline">if / then / else</span>" structure or even a "<span class="inline">switch</span>", and as the array is initialized all together in the create event it is MUCH easier to edit and change any of those values as they are not <a class="tooltip" title="In computer programming, the term hard-coded is used to describe code that is considered fixed and not likely to change. Hardcoded features are built into hardware or software in such a way that they cannot be modified later on. For example, if you are making a game and 'hard-code' the player health to 10, then you would be using the value 10 throughout the game code rather than using a variable.">hard-coded</a> into the rest of the project code.</p></div><p>&nbsp;</p><p>Also see:&nbsp;<a href="../GML_Reference/Variable_Functions/Array_Functions.htm">Array Functions</a><a href="../GML_Reference/Variable_Functions/Variable_Functions.htm#h"></a></p><h2>Arrays as Function Arguments</h2><p>You can pass arrays into&nbsp;<a href="Script_Functions.htm">script&nbsp;functions</a> and <a href="Method_Variables.htm">method variables</a> as arguments, and modify those arrays anywhere inside the function. Doing so will modify the original arrays as well.</p><p>For example, this function simply changes the first three elements of the array passed into it:</p><p class="code">modify_array = function (array)<br>{<br>&nbsp; &nbsp; array[0] = 2;<br>&nbsp; &nbsp; array[1] = 4;<br>&nbsp; &nbsp; array[2] = 6;<br>}</p><p>You can now create an array and pass it into this function, which will modify the array:</p><p class="code">my_array = [100, 4, 214];<br><br>modify_array(my_array);<br><br>show_debug_message(my_array); // Prints [2, 4, 6];</p><p>In previous GameMaker versions, this was not the case, as modifying an array inside a function would create a copy instead. This <em>deprecated</em> behaviour can still be enabled if desired: read the "<strong>Copy on Write</strong>" section below for more information.</p><h2 id="h">Copy on Write</h2><p>The Copy on Write behaviour is deprecated, and is only used when "<strong>Enable Copy on Write behaviour for Arrays</strong>" is enabled in the <a href="../../Settings/Game_Options.htm">General Game Options</a>. This section describes the behaviour of arrays when this option is enabled.</p><p>As described in the previous section, arrays can be passed into functions as arguments. To do this, you simply have to specify the array variable (no need for each of the individual positions, nor the <span class="inline">[]</span> brackets) and the entire array will be <b>passed by reference</b> into the function:</p><p class="code">my_array = [1, 2, 4, 8, 16];<br><br>do_something(my_array);</p><p>However, when <strong>Copy on Write</strong> is enabled, changing any of the array's values inside the function creates a temporary copy with your modifications. The original array is not modified. This behaviour is called Copy on Write.</p><p>To actually modify the original array that was passed into the function, you must either return it back, or use the <span class="inline">@</span> accessor.</p><p>For example, the function called above,&nbsp;<span class="inline2">do_something()</span>, may do something simple like this:</p><p class="code">do_something = function(array)<br>{<br>&nbsp; &nbsp; array[1] = 200;<br>}</p><p>Now you would expect <span class="inline2">my_array</span> to hold the values <span class="inline2">1, 200, 4</span>, etc., which would normally be correct -- but when <strong>Copy on Write</strong> is enabled, the original array remains unaffected.</p><p>To work around this, you can make the function <strong>return</strong> the modified array copy, and then apply it back to the original variable:</p><p class="code">my_array = [1, 2, 4, 8, 16];<br><br>my_array = do_something(my_array);</p><p>The function itself would return the modified array back:</p><p class="code">do_something = function(array)<br>{<br>&nbsp; &nbsp; array[1] = 200;<br><br>&nbsp; &nbsp; return array;<br>}</p><p class="note"><span class="note">NOTE</span><b>&nbsp;</b>The above code is not necessary if you are not changing any of the array's values, but rather referencing them. Referencing an array will not copy it and will be faster to parse.</p><p>The second solution is to use the&nbsp;<span class="inline">@</span>&nbsp;accessor to change the array values directly, which saves the CPU overhead of having to make a temporary copy. This means that you do not need to return the array from the function and can edit it directly:</p><p class="code">do_something = function(array)<br>{<br>&nbsp; &nbsp; array[@ 1] = 200;<br>}</p><p>Using this accessor bypasses the Copy on Write behaviour and directly modifies the referenced array. This can be used to selectively disable Copy on Write for specific statements while keeping the option enabled.</p><p>Again, all of this is not necessary if <strong>Copy on Write</strong> is <strong>disabled</strong> (which is the default and recommended option).</p><p>Find out more information on accessors and how they work, along with an example for arrays, from the following page:</p><ul class="colour"><li><a href="Accessors.htm">Accessors</a></li></ul><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="GML_Overview.htm">GML&nbsp;Overview</a></div><div style="float:right">Next:&nbsp;<a href="Structs.htm">Structs &amp; Constructors</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>