<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../..",gTopicId="8.2.1.2_4"</script><script type="text/javascript" src="../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Accessors</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../assets/css/default.css" type="text/css"><script src="../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining the different Accessors"><meta name="rh-index-keywords" content="Accessors"><meta name="search-keywords" content="Accessors,@,[| ],[@ ],[# ],[? ],grid accessor,list accessor,map accessor,array accessor"><meta name="brsnext" value="GameMaker_Language/GML_Overview/Language_Features.htm"><meta name="brsprev" value="GameMaker_Language/GML_Overview/Evaluation_Order.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Accessors"><span>Accessors</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">Accessors</span></h1><p>The GameMaker Language (GML) also permits you to access certain <a href="../GML_Reference/Data_Structures/Data_Structures.htm">Data Structures</a>&nbsp;and <a href="Arrays.htm">Arrays</a> through the use of logical expressions called <b>accessors</b>. This is structured in a similar way as when you are normally working with an&nbsp;array, only we use an <em>identifier symbol</em> before the first argument to tell <span data-keyref="GameMaker Name">GameMaker</span> that you are working on a (previously created) data structure or the array literal.</p><p>&nbsp;</p><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down10" href="#"><span data-open-text="true" data-skip-index="true">DS Lists [| ]</span><span data-close-text="true">DS Lists [| ]</span></a></p><div class="droptext" data-targetname="drop-down10"><p class="dropspot">The syntax for <a href="../GML_Reference/Data_Structures/DS_Lists/DS_Lists.htm">DS lists</a>&nbsp;is:</p><p class="code">list_index[| index]</p><p class="dropspot">So when you have used&nbsp;<span class="inline3_func"><a href="../GML_Reference/Data_Structures/DS_Lists/ds_list_create.htm">ds_list_create</a></span>&nbsp;to create your list, you would use the list index (that you have stored in a variable) to reference it, with the <span class="inline2">index</span> value being the position in the list to set or add. For example, the following code creates a list and then adds 10 entries, setting each entry to random number from 0 to 9:</p><p class="code">ds = ds_list_create();<br>var index = 0;<br>repeat(10)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;ds[| index++] = irandom(9);<br>}</p><p class="dropspot">Note that if you are using an expression to add a reference to an index that already has a value, the previous value will be replaced rather than have a further index added to the list. To add further entries you would need to know the DS list size and add them to the end. It is also worth noting that you can set a list index that is&nbsp;<i>greater</i>&nbsp;than the size of the list being referenced, and this will set that value, expanding the list at the same time and initialising all the positions in the list up to the given index to 0.</p><p class="dropspot">Once you have created your list structure and filled it with data, to get values from the list you would have something like:</p><p class="code">value = ds[| 5];</p><p class="dropspot">The above will get the value from position 5 (the sixth index, since lists start at 0) and store it in a variable. If you supply a position that is outside of the list size then the value <span class="inline2">undefined</span>&nbsp;will be returned, which you can check for using the function <span class="inline3_func"><a href="../GML_Reference/Variable_Functions/is_undefined.htm#h">is_undefined</a></span>.</p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down13" href="#"><span data-open-text="true" data-skip-index="true">DS Maps [? ]</span><span data-close-text="true">DS Maps [? ]</span></a></p><div class="droptext" data-targetname="drop-down13"><p class="dropspot">The accessor for&nbsp;<a href="../GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm">DS Maps</a> is<span class="inline2"><a id="?"></a> ?</span>&nbsp;and the syntax&nbsp;is:&nbsp;</p><p class="code">map_index[? key]</p><div data-conref="../../assets/snippets/Note_Tip_Map_Key_Can_Be_Any.hts"><p class="note"><span data-conref="../../assets/snippets/Tag_tip.hts"><span class="tip">TIP</span></span>&nbsp;The key isn't limited to strings and can be of any&nbsp;type, including a&nbsp;<a href="Structs.htm#struct">struct</a>.</p></div><p class="dropspot">After creating your map with <span class="inline3_func"><a href="../GML_Reference/Data_Structures/DS_Maps/ds_map_create.htm#h">ds_map_create</a></span>, you would use the map index that you have stored in a variable to reference it, with the <span class="inline2">key</span> value being the map key to set or get. For example, the following code creates a map and then adds a few entries to it using this syntax:&nbsp;</p><p class="code">ds = ds_map_create();<br>ds[? "Name"] = "Hamish";<br>ds[? "Company"] = "MacSeweeny Games";<br>ds[? "Game"] = "Catch The Haggis";</p><p class="note"><span data-conref="../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;If the map already contains the same key value as you are trying to add, it will not create a duplicate key with the new value, but rather the previous value will be replaced.</p><p class="dropspot">Once you have created your map structure and filled it with data, to get values from a specific map key you would have something like this:</p><p class="code">value = ds[? "Name"];</p><p class="dropspot">The above will get the value from the key <span class="inline2">"Name"</span> and store it in a variable, but be aware that if the given key does not exist in the DS map, then the value returned will be <span class="inline2">undefined</span>. This can be checked for using the function <span class="inline3_func"><a href="../GML_Reference/Variable_Functions/is_undefined.htm#h">is_undefined</a></span>.</p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down14" href="#"><span data-open-text="true" data-skip-index="true">DS Grids [# ]</span><span data-close-text="true">DS Grids [# ]</span></a></p><div class="droptext" data-targetname="drop-down14"><p class="dropspot">The syntax for&nbsp;<a href="../GML_Reference/Data_Structures/DS_Grids/DS_Grids.htm#h">DS Grids</a>&nbsp;is:</p><p class="code">grid_index[# xpos, ypos]</p><p class="dropspot">After creating your grid with the&nbsp;<span class="inline3_func"><a href="../GML_Reference/Data_Structures/DS_Grids/ds_grid_create.htm">ds_grid_create</a></span>&nbsp;function, you would use the grid index that you have stored in a variable to reference it, with the <span class="inline2">xpos</span> and <span class="inline2">ypos</span> being the position within the grid to get or set a value. For example, the following code creates a grid, clears it to 0, then and then adds a few entries to it:</p><p class="code">ds = ds_grid_create();<br>ds_grid_clear(ds, 0);<br>var gw = ds_grid_width(ds) - 1;<br>var gh = ds_grid_height(ds) - 1;<br>repeat(10)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;var xx = irandom(gw);<br>&nbsp;&nbsp;&nbsp;&nbsp;var yy = irandom(gh);<br>&nbsp;&nbsp;&nbsp;&nbsp;if (ds[# xx, yy] == 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ds[# xx, yy] = 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</p><p class="dropspot">Once you have created your grid structure and filled it with data, to get values from a specific grid position you would have something like:</p><p class="code">value = ds[# mouse_x div 16, mouse_y div 16];</p><p class="dropspot">The above will get the value from the given DS grid based on the mouse position (divided by the "cell" width in the room to get the correct location). If you supply a position that is outside of the grid boundaries then the value <span class="inline2">undefined</span> will be returned, which you can check for using the function <span class="inline3_func"><a href="../GML_Reference/Variable_Functions/is_undefined.htm">is_undefined</a></span>.</p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down15" href="#"><span data-open-text="true" data-skip-index="true">Arrays [@ ]</span><span data-close-text="true">Arrays [@ ]</span></a></p><div class="droptext" data-targetname="drop-down15"><p class="dropspot">This accessor is only used when the <a href="../../Settings/Game_Options.htm">Copy on Write option</a> is enabled.</p><p class="dropspot">Arrays also have their own accessors which works in a similar way as those listed above for data structures. However array accessors have an interesting property and that is to permit you to modify an array from a <a href="Script_Functions.htm">script function</a> or <a href="Method_Variables.htm">method</a> without having to copy it. When you pass an array into a function, it is&nbsp;<strong>passed by reference</strong>, meaning that the array itself isn't being given into the script but rather it is simply being referenced to get the data. Normally if you then need to change the array, it would be <em>copied</em> to the script and then you would need to pass back (return) the copied array for the original array to be updated. This can have costly processing overheads, and so you can use the accessor instead, as that will change the original array <em>directly</em> without the need for it to be copied. You can see how this works in the examples below.</p><p class="dropspot">The syntax for arrays, using the <span class="inline2">@</span> accessor, is:</p><p class="code">array[@ i]</p><p class="dropspot">After you have created your array in an instance, you can then pass it to a script by reference and use the accessor&nbsp;<span class="inline">@</span>&nbsp;to change it directly. For example you would create the array and call the funtion like this:</p><p class="code">array[99] = 0;<br>array_populate(array);</p><p class="dropspot">The function itself would have something like this:</p><p class="code">function array_populate(_array)<br>{<br>&nbsp; &nbsp; var a = _array; var i = 0; repeat(25)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; i = irandom(99);<br>&nbsp; &nbsp; &nbsp; &nbsp; while (a[i] != 0)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i = irandom(99);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; a[@ i] = 100;<br>&nbsp; &nbsp; }<br>}</p><p class="dropspot">All this function is doing is selecting 25 random positions in the array and setting the value of the chosen array position to 100.</p><p class="dropspot">Of course, the <span class="inline">@</span> accessor is not required when <strong>Copy on Write</strong> is disabled.</p><p class="note"><span data-conref="../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;You cannot use the array accessor <span class="inline">@</span>&nbsp; when working with the&nbsp;<span class="inline">argument[n]</span>&nbsp;array in&nbsp;script functions.</p><p class="dropspot">&nbsp;</p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down16" href="#"><span data-open-text="true" data-skip-index="true">Structs [$ ]</span><span data-close-text="true">Structs [$ ]</span></a></p><div class="droptext" data-targetname="drop-down16"><p class="dropspot"><span>The struct accessor uses the<span class="inline2"><a id="$"></a> $</span> sign as the identifier symbol. This makes the accessor syntax for <a href="Structs.htm">structs</a>:&nbsp;</span></p><p class="code">struct[$ "name"]</p><p class="dropspot">This accessor is essentially a wrapper for the functions&nbsp;<span><a href="../GML_Reference/Variable_Functions/variable_struct_get.htm"><span class="inline2">variable_struct_get()</span></a> and <a href="../GML_Reference/Variable_Functions/variable_struct_set.htm"><span class="inline2">variable_struct_set()</span></a>, and&nbsp;<span class="inline3_func"><a href="../GML_Reference/Variable_Functions/variable_global_get.htm">variable_global_get</a></span>&nbsp;and&nbsp;<span class="inline3_func"><a href="../GML_Reference/Variable_Functions/variable_global_set.htm">variable_global_set</a></span>&nbsp;if you access <a href="Variables/Global_Variables.htm#the_global_struct">The Global Struct</a>&nbsp;using the <span class="inline2">global</span> keyword.</span></p><p class="dropspot"><span>You would use it much like the accessor for a DS map.&nbsp;For example, if you have created a struct and want to retrieve a value from a variable called "my_health" then you'd do:</span></p><p class="code">var _hp = struct[$ "my_health"];</p><p class="dropspot">As you can see, you don't supply the variable itself, but rather a <em>string</em> with the variable's name.</p><p class="note"><span data-conref="../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;If the struct does not have a variable with the given name, then the accessor will return <span class="inline2">undefined</span> as the value.</p><div data-conref="../../assets/snippets/Note_tip_use_nullish_with_accessors.hts"><p class="note"><span data-conref="../../assets/snippets/Tag_tip.hts"><span class="tip">TIP</span></span>&nbsp;In case a value returned by the accessor is (or might be)&nbsp;<span class="inline2">undefined</span>&nbsp;you might want to provide a "default" value to be used instead. A clean, shorthand way to do this is the&nbsp;<a href="Expressions_And_Operators.htm#nullish">nullish</a>&nbsp;operator.</p></div><p class="dropspot">To set a variable in a struct then you would do the following</p><p class="code">struct[$ "my_score"] = 100;</p><p class="dropspot">As with getting a value, you supply the name of the variable to set as a string, and it will be set to the value given. If the variable name used doesn't exist in the struct, then it will be created and set to the given value.</p><p class="dropspot">&nbsp;</p></div><p>&nbsp;</p><p>An important feature of accessors is the fact that they can be <i>chained</i> together. This means that if you have several nested data structures and/or arrays, there is no longer the need to use a variety of functions to get access to a value that is deep within the nested structure. For example, say you have an array, and each item in the array is a DS list, like this:</p><p class="code">array = array_create(3);<br>for (var i = 0; i &lt; 3; ++i;)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;array[i] = ds_list_create();<br>&nbsp;&nbsp;&nbsp;&nbsp;switch(i)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 0:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with (obj_Wall) ds_list_add(array[i], id);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 1:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with (obj_Door) ds_list_add(array[i], id);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 2:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with (obj_Chest) ds_list_add(array[i], id);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</p><p>In the above code we've created a 3 item array and assigned a DS list to each of them, and then we've populated the different lists with the instance IDs of various objects in the game. Now, to access an ID in one of the lists we can do the following:</p><p class="code">var _list = array[0];<br>var _id = ds_list_find_value(_list, 0);</p><p>However, you can do the same thing using chained accessors in a much cleaner way that uses less code:</p><p class="code">var _id = array[0][| 0];</p><p>You can chain multiple accessors together in this way and they can be of multiple types to get access to the information stored in each part of the nested structure. Here are some more examples:</p><p class="code">// Access a grid that has been added to a list that is part of a map:<br>var _a = data[? "lists"][| 0][# 0, 0];<br><br>// Access an array nested in a list from a script and modify it:<br>data[| 0][@ 10] = 100;<br><br>// Access a map nested in a grid nested in a list nested in an array:<br>data[0][| 10][# 3, 4][? "key"] = "hello world";</p><p>Using chained accessors for things not only means you can write more compact code, it will also permit you to use iteration (for example, using a <a href="Language_Features/for.htm"><span class="inline">for</span></a>&nbsp;loop) and other techniques to access your data in a cleaner and more intuitive manner.</p><p>It is worth noting that when using accessors in this way, you should always use the <span class="inline2">@</span> accessor for arrays, as otherwise you will be adding extra overhead to any actions being performed. As mentioned above, by default arrays are passed by reference into functions and then use the "copy on write" behaviour when modified. However, if the array is part of a chain, then the previous item in the chain will be updated with the copied array and the "original" will be deleted. For example, doing something like this:</p><p class="code">// In an object event<br>data[| 0][0] = 100;<br><br>// In a function<br>data[| 0][0] = 200;</p><p>achieves the same results as doing this:</p><p class="code">// In an object event<br>data[| 0][0] = 100;<br><br>// In a function<br>data[| 0][@ 0] = 200;</p><p>However, the second example is better as it works without the unnecessary overhead of copying the entire array first.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="GML_Overview.htm">GML&nbsp;Overview</a></div><div style="float:right">Next:&nbsp;<a href="Language_Features.htm">Language Features</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>