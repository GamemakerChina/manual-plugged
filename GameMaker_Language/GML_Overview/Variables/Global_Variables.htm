<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption,blockquote").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption,.expandtext").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../..",gTopicId="8.2.1.1.1"</script><script type="text/javascript" src="../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Global Variables</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../assets/css/default.css" type="text/css"><script src="../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page explaining global variables"><meta name="rh-index-keywords" content="global,globalvar,Global Variables"><meta name="search-keywords" content="global,global variables,globalvar"><meta name="brsnext" value="GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/score.htm"><meta name="brsprev" value="GameMaker_Language/GML_Overview/Variables/Instance_Variables.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Global Variables"><span>Global Variables</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">Global Variables</span></h1><p>A&nbsp;<strong><a id="global"></a>global</strong> variable is one that, once declared, belongs to no instance in particular and yet can be accessed by all. Just like <a href="Local_Variables.htm">Local Variables</a>, global variables must be declared using an identifier, but unlike a local variable, a global variable remains in memory <em>until the end of the game</em>. So, you can create a global variable to keep track of (for example) the number of bullets that the player has and then just update this variable at different points in the game, from any place in your code and at any time. Any changes&nbsp;made to the variable are "global", in that all instances accessing the variable will be affected by the change. Let's have a look at an example:</p><p class="code">global.food = 5;</p><p>We declare the <span class="inline2">food</span>&nbsp;variable by first writing the&nbsp;<span class="inline2">global</span>&nbsp;keyword and then a dot <span class="inline2">.</span> to tell <span data-keyref="GameMaker Name">GameMaker</span> that this variable is global in scope. We will need to use this form from now on any time we are required to access or to change this variable in any way.</p><p>So, we have created a new variable called <span class="inline2">food</span> and we have declared it as global. Now, any instance, struct or function can use and change this variable in any way and all other instances will "see" this. For example we could have a different food object that the player collides with and in the collision event we have:</p><p class="code">global.food +=1;</p><p>We also have another object that draws this value like this:</p><p class="code">draw_text(32, 32, "food = " + string(global.food));</p><p>With global variables we can change values and see those changes reflected in all instances of the objects that reference this variable. As with <i>local</i> variables you have to take care not to name your global variables the same as any instance variables as that may cause you problems and make bugs creep into your games due to variable overlap, which can be a difficult issue to debug sometimes. In general you should have a single object that declares all your global variables at the very start of the game (for example, in the <a href="../../../The_Asset_Editors/Object_Properties/Other_Events.htm">Room Start Event</a>&nbsp;of the first&nbsp;object instance placed in the first room of the game) or a single <a href="../Script_Functions.htm">script function</a> that declares them all together, as this gives you a handy place to go back and reference everything at once should you need to check a variable name or edit a value.</p><p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;Inside the Script Editor you're in global scope, so the <span class="inline2">global.</span> prefix can be&nbsp;omitted. For clarity's sake it can, however, be good to include it anyway.</p><h2 id="the_global_struct">The Global Struct</h2><p>Global variables are stored in a&nbsp;<a href="../Structs.htm#struct">struct</a>, which you can access like any&nbsp;other struct. To refer to this struct you use the <span class="inline2">global</span> keyword.</p><p>For example, to show all global variables and&nbsp;<a href="../Script_Functions.htm">script functions</a>&nbsp;that you defined you can use the following code:&nbsp;</p><p class="code">show_debug_message(global);</p><h2>Built-in Global Variables</h2><p><span data-keyref="GameMaker Name">GameMaker</span> has a collection of "built-in" global variables too, so you should be aware of them as you may name one of your instance variables the same or wish to have your own global variable with the same name and wonder why you are getting errors! They are easy to spot, however, as they are shown in a different colour in the code editor and also come up in the auto-complete bar at the bottom. The majority of built-in global variables have very specific uses and are listed in the appropriate sections of the manual - however there are two important ones that are used frequently and aren't listed elsewhere:</p><ul class="colour"><li><span class="inline"><a href="Builtin_Global_Variables/async_load.htm">async_load</a></span></li><li><span class="inline"><a href="../../GML_Reference/Game_Input/Gesture_Input/event_data.htm">event_data</a></span></li></ul><p>There are also three <b>deprecated</b> built-in global variables which you should be aware of (these variables are only designed to support legacy projects from previous versions of <span data-keyref="GameMaker Name">GameMaker</span>&nbsp;and should <b><i>not be used in new projects</i></b>):</p><ul class="colour"><li><span class="inline"><a href="Builtin_Global_Variables/score.htm">score</a></span></li><li><span class="inline"><a href="Builtin_Global_Variables/health.htm">health</a></span></li><li><span class="inline"><a href="Builtin_Global_Variables/lives.htm">lives</a></span></li></ul><p>Finally, there are two variables that can be used in script functions and methods:</p><ul class="colour"><li><a href="Builtin_Global_Variables/argument.htm">argument</a></li><li><a href="Builtin_Global_Variables/argument_count.htm">argument_count</a></li></ul><h2>globalvar</h2><p class="note"><span data-conref="../../../assets/snippets/Tag_deprecated.hts"><span class="warning">DEPRECATED</span></span>&nbsp;The <span class="inline2">globalvar</span> declaration is <b>deprecated</b> and only supported for legacy purposes. You should <b>always</b> explicitly refer to global scope using the <span class="inline2">global.</span>&nbsp;prefix.</p><p>The second form for creating global variables is to declare them as such using the <span class="inline2">globalvar</span> declaration, much as you would a <a href="Local_Variables.htm">local variable</a> using the <span class="inline2">var</span> declaration.</p><p>This (deprecated) declaration would be used as follows:</p><p class="code">globalvar food;<br>food = 5;</p><p>Once declared in this way the variable <span class="inline2">food</span> is now considered global and requires no&nbsp;<span class="inline2">global.</span> prefix - which also means that it's a lot harder to identify global variables in your code and it's also much easier to get variable overlap as you use the same variable name in different objects or from extensions that you've installed. Once declared in this way the global variable is accessed as follows:</p><p class="code">food += 2;</p><p>or:</p><p class="code">draw_text(32, 32, "food = " + string(food));</p><p>As you can see, with nothing to show that the variable is global in scope you are potentially setting yourself up for many subtle problems to arise in your game, which is why this declaration should be avoided.</p><p>There are a few functions designed to help you when dealing with global variables, which you can find on the following page:</p><ul class="colour"><li><a href="../../GML_Reference/Variable_Functions/Variable_Functions.htm">Variable Functions</a></li></ul><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back:&nbsp;<a href="../Variables_And_Variable_Scope.htm">Variables And Variable Scope</a></div><div style="float:right">Next:&nbsp;<a href="Constants.htm">Constants</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>