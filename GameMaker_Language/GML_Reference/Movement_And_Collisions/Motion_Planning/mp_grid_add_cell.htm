<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,e,o){let a;a=o?t.attr(o):t.html();let i=e[removeHtml(a)];if(null!=i&&i.length){e=retHtml(a);let n=0;e&&e.forEach(function(t,e){var o=i.replace("{"+n+"}",t);i=o===i?i.replace("{}",t):o,n++}),o?t.attr(o,i):t.html(i)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){var t=`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`;$(".header").length?$(".header").append(t):($(".topic-header").append(t),$(".topic-header button").css("position","relative").css("top","44px"))},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")};let json_global,json_file={"Horizontal position of the cell in the grid":"单元格在网格中的水平位置","Index of the mp_grid that is to be used":"要使用的 mp_grid 的索引",'The above code will make all "obj_Wall" and all obj_Door add their equivalent cell positions into the mp_grid indexed in the variable "grid". In the first part of the example, this is done by taking the x/y coordinates of the object and dividing them by the resolution of the grid (using {}floor{} to keep the values as integers), and in the second part (since the grid resolution is a power of 2) it is done by bit-shifting the x,y coordinates 5 places to the right.':'上述代码将使所有"obj_Wall"和所有obj_Door将其等效单元格位置添加到变量"grid"中索引的mp_grid中。在示例的第一部分中，这是通过获取对象的x/y坐标并将其除以网格的分辨率(使用{}floor{}将值保持为整数)来完成的，而在第二部分(由于网格分辨率是2的幂)中，这是通过将x、y坐标向右移5位来完成的。',"Vertical position of the cell in the grid":"网格中单元格的垂直位置",'With this function we can mark individual cells within the given&nbsp;MP grid as being "forbidden" meaning that the path finding functions will not ever cross them. Now, normally you work in x/y {}room{} coordinates, and not in MP grid&nbsp;{}cell{} coordinates. So let\'s consider the following image which shows how the two can correlate:':'使用此函数，我们可以将给定 MP 网格内的单个单元格标记为 " 禁止"，这意味着路径查找函数将永远不会穿过它们。现在，通常您使用的是 x/y{} 房间 {} 坐标，而不是 MP 网格 {} 单元格 {} 坐标。因此，让我们考虑一下以下图像，它显示了这两者之间的关系：',"{}As you can see the mp_grid is numbered as a series of cells (starting at 0,0 in the upper left corner), and when you place this grid over the room there is a direct correlation between the room coordinates (which also start at 0,0 in the top left) and the cells within the grid. In the image you can see that an instance at the position 260,130 falls on the grid cell 8,4. You can calculate mathematically the exact cell that a position lands on easily by either dividing the number by the grid resolution and then rounding down {}or{}, if you are using power of 2 grid resolutions (like 8, 16, 32 etc...) you can use the {}bitwise operators{}. It should be noted that the bitwise operation is faster and the example below shows both methods.":"{}正如您可以看到的那样，mp_grid被编号为一系列单元格(从左上角的0,0开始)，当您将此网格放置在房间上时，房间坐标(也从左上角的0,0开始)与网格中的单元格之间存在直接关联。在图像中，您可以看到位于260、130处的实例落在网格单元8、4上。通过将数字除以网格分辨率，然后向下舍入{}或{}，可以在数学上计算位置轻松到达的精确单元格。如果使用2个网格分辨率的幂(如8、16、32等)，则可以使用{}位运算符{}。需要注意的是，位运算速度更快，下面的示例显示了这两种方法。"},get_json_global=$.ajax({url:"/global.json",type:"GET",dataType:"json",async:!1,success:function(t){json_global=t}});$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json_file)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../..",gTopicId="8.2.2.5.2.0_13"</script><script type="text/javascript" src="../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>mp_grid_add_cell</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css"><script src="../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="This page outlines the function mp_grid_add_cell"><meta name="rh-index-keywords" content="mp_grid_add_cell"><meta name="search-keywords" content="mp_grid_add_cell"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Movement_And_Collisions/Motion_Planning/mp_grid_add_instances.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Movement_And_Collisions/Motion_Planning/mp_grid_path.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="mp_grid_add_cell"><span>mp_grid_add_cell</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>mp_grid_add_cell</h1><p>With this function we can mark individual cells within the given&nbsp;MP grid as being "forbidden" meaning that the path finding functions will not ever cross them. Now, normally you work in x/y <i>room</i> coordinates, and not in MP grid&nbsp;<i>cell</i> coordinates. So let's consider the following image which shows how the two can correlate:</p><p><img alt="Add cell example" class="center" src="../../../../assets/Images/Scripting_Reference/GML/Reference/Movement_Collisions/mp_grid_add_cell_image.png">As you can see the mp_grid is numbered as a series of cells (starting at 0,0 in the upper left corner), and when you place this grid over the room there is a direct correlation between the room coordinates (which also start at 0,0 in the top left) and the cells within the grid. In the image you can see that an instance at the position 260,130 falls on the grid cell 8,4. You can calculate mathematically the exact cell that a position lands on easily by either dividing the number by the grid resolution and then rounding down <i>or</i>, if you are using power of 2 grid resolutions (like 8, 16, 32 etc...) you can use the <a href="../../../../Additional_Information/Bitwise_Operators.htm">bitwise operators</a>. It should be noted that the bitwise operation is faster and the example below shows both methods.</p><p>&nbsp;</p><h4>Syntax:</h4><p class="code">mp_grid_add_cell(id, h, v);</p><table><tbody><tr><th>Argument</th><th>Type</th><th>Description</th></tr><tr><td>id</td><td><span data-keyref="Type_ID_MP_Grid"><a target="_blank" href="mp_grid_create.htm">MP Grid ID</a></span></td><td>Index of the mp_grid that is to be used</td></tr><tr><td>h</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>Horizontal position of the cell in the grid</td></tr><tr><td>v</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>Vertical position of the cell in the grid</td></tr></tbody></table><p>&nbsp;</p><h4>Returns:</h4><p class="code"><span data-keyref="Type_Void">N/A</span></p><p>&nbsp;</p><h4>Example:</h4><p class="code">with (obj_Wall)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;mp_grid_add_cell(grid, floor(x / 32), floor(y / 32));<br>}<br>with (obj_Door)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;mp_grid_add_cell(grid, x&gt;&gt;5, y&gt;&gt;5);<br>}</p><p>The above code will make all "obj_Wall" and all obj_Door add their equivalent cell positions into the mp_grid indexed in the variable "grid". In the first part of the example, this is done by taking the x/y coordinates of the object and dividing them by the resolution of the grid (using <span class="inline">floor</span> to keep the values as integers), and in the second part (since the grid resolution is a power of 2) it is done by bit-shifting the x,y coordinates 5 places to the right.</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back:&nbsp;<a href="Motion_Planning.htm">Motion Planning</a></div><div style="float:right">Next:&nbsp;<a href="mp_grid_add_instances.htm">mp_grid_add_instances</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>