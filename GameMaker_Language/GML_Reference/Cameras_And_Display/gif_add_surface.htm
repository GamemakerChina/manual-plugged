<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/main.css"><script>let str;removeHtml=function(e){return e=(e=(e=(e=e.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(e){return e.match(/(<([^>]+)>)/gi)},setTranslator=function(e,t,a){let n;n=a?e.attr(a):e.html();let i=t[removeHtml(n)];if(null!=i&&i.length){t=retHtml(n);let o=0;t&&t.forEach(function(e,t){var a=i.replace("{"+o+"}",e);i=a===i?i.replace("{}",e):a,o++}),a?e.attr(a,i):e.html(i)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){var e=`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`;$(".header").length?$(".header").append(e):($(".topic-header").append(e),$(".topic-header button").css("position","relative").css("top","44px"))},removeExtensionFromHash=function(e){return e.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")};let json_global,json_file={"Note that there are no built-in limits on number of frames or on the size of those frames in your GIF, but if you use too much memory then the function will fail and return -1, otherwise it will return 0.":"请注意，对于 GIF 中的帧数或这些帧的大小没有内置限制，但如果使用了太多内存，则函数将失败并返回 -1，否则将返回 0。","The ID of gif to add the surface data to":"要将表面数据添加到的 GIF 的 ID","The ID of the surface to use as the added frame":"用来作为添加框架的表面的 ID","The ID of the&nbsp;GIF to add the surface data to":"添加表面数据的 GIF 的 ID","The above code will create a GIF image file with 30 frames taken from the application surface and then save it.":"以上代码将创建从应用程序表面获取的具有 30 帧的 GIF 图像文件，然后保存该文件。","The delay time for the frame (in 100ths of a second)":"帧的延迟时间(以 100 秒为单位)","The surface to use as the added frame":"用作添加框架的表面","This function saves a frame to a GIF file from a surface.":"此函数将表面上的帧保存为 GIF 文件。","With this function you can save a frame to a GIF file from a surface. You supply the GIF file ID (as returned by the function {}{}gif_open(){}{}) and a surface ID (as returned by the function {}{}surface_create(){}{}), as well as a delay time between frames. The delay time is calculated in 1/100ths of a second, but note that once the GIF has been created, if you use it for promotional purposes for example, different browsers may interpret the frame delay slightly differently - see {}here{} for more details. You may (optionally) supply X and Y offset values for the surface being used to add to the GIF, in which case the part drawn to the GIF will begin from the offset and not the default (0,0) position, permitting you to select only a section of the surface to add. You can also supply a quantization value, which is an integer between 0 and 3, where 0 is full quantization and 3 is zero quantization (lower values will have a subsequent degradation in quality, but create a smaller GIF). Note that there isn't much difference between the default quality of 2, and the highest of 3, and using 3 will significantly slow down the creation of the GIF so care should be taken when using the maximum value.":"使用此函数，可以将框架从表面保存到 GIF 文件。提供 GIF 文件 ID (由函数 {}{}gif_open(){}{} 返回)和表面 ID (由函数 {}{}surface_create(){}{} 返回)，以及帧之间的延迟时间。延迟时间以 1/100 秒为单位计算，但请注意，创建 GIF 后，如果您将其用于促销目的(例如，不同的浏览器对帧延迟的解释可能略有不同-有关详细信息，请参阅{}此处{})。您可以(可选)为用于添加到 GIF 的表面提供 X 和 Y 偏移值，在这种情况下，绘制到 GIF 的零件将从偏移开始，而不是默认 (0,0)位置，从而允许您仅选择要添加的表面的一部分。您还可以提供一个量化值，它是介于 0 和 3 之间的整数，其中 0 表示完全量化，3 表示零量化(值越低，质量越差，但会创建越小的 GIF)。请注意，默认质量 2 和最高质量 3 之间没有太大差异，使用3将显著减慢 GIF 的创建速度，因此在使用最大值时应小心。","You supply the GIF file ID (as returned by the function {}{}gif_open{}{}) and a surface (as returned by the function {}{}surface_create{}{}), as well as a delay time between frames. The delay time is calculated in 1/100ths of a second, but note that once the GIF has been created, if you use it for promotional purposes for example, different browsers may interpret the frame delay slightly differently - see {}here{} for more details. You may (optionally) supply X and Y offset values for the surface being used to add to the GIF, in which case the part drawn to the GIF will begin from the offset and not the default (0, 0) position, permitting you to select only a section of the surface to add. You can also supply a quantization value, which is an integer between 0 and 3, where 0 is full quantization and 3 is zero quantization (lower values will have a subsequent degradation in quality, but create a smaller GIF). Note that there isn't much difference between the default quality of 2, and the highest of 3, and using 3 will significantly slow down the creation of the GIF so care should be taken when using the maximum value.":"您提供 GIF 文件 ID(由函数 {}{}gif_open{}{} 返回) 和表面 (由函数 {}{}surface_create{}{} 返回)，以及帧之间的延迟时间。延迟时间以 1/100 秒计算，但请注意，创建 GIF 后，如果您将其用于促销目的，不同的浏览器对帧延迟的解释可能会略有不同 - 请参阅 {} 此处 {} 了解更多细节。您可以 (可选) 为用于添加到 GIF 的表面提供 X 和 Y 偏移值，在这种情况下，绘制到 GIF 的部分将从偏移开始，而不是从默认 (0, 0) 位置开始，从而允许您仅选择要添加的曲面的一部分。您还可以提供一个量化值，该值是 0 到 3 之间的整数，其中 0 是完全量化，3 是零量化 (较低的值将导致质量随后下降，但会创建较小的 GIF)。请注意，默认质量 2 和最高质量 3 之间没有太大区别，并且使用 3 会显着减慢 GIF 的创建速度，因此在使用最大值时应小心。","{}OPTIONAL{} The offset along the X axis of the surface to add from":"{}可选{} 要添加的表面沿 X 轴的偏移","{}OPTIONAL{} The offset along the Y axis of the surface to add from":"{}可选{} 要添加的表面沿 Y 轴的偏移","{}OPTIONAL{} The quantization amount from 0 to 3 (0 lowest quality, 3 highest quality, default is 2)":"{}可选{} 从 0 到 3 的量化数量 (0 最低质量，3 最高质量，默认值为 2)","{}{}NOTE{}{}&nbsp;This function will only work with surfaces that use the&nbsp;{}{}surface_rgba8unorm{}{} (default) surface format.":"{}{}备注{}{} 此函数仅适用于使用 {}{}surface_rgba8unorm{}{} (默认)表面 格式的表面 。"},get_json_global=$.ajax({url:"/global.json",type:"GET",dataType:"json",async:!1,success:function(e){json_global=e}});$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json_file)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../..",gTopicId="8.2.2.7.2_23"</script><script type="text/javascript" src="../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>gif_add_surface</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../assets/css/default.css" type="text/css"><script src="../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Reference section for gif_add_surface"><meta name="rh-index-keywords" content="gif_add_surface"><meta name="search-keywords" content="gif_add_surface"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Cameras_And_Display/gif_save.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Cameras_And_Display/gif_open.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="gif_add_surface"><span>gif_add_surface</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">gif_add_surface</span></h1><p>This function saves a frame to a GIF file from a surface.</p><p>You supply the GIF file ID (as returned by the function <span class="inline3_func"><a href="gif_open.htm">gif_open</a></span>) and a surface (as returned by the function <span class="inline3_func"><a href="../Drawing/Surfaces/surface_create.htm">surface_create</a></span>), as well as a delay time between frames. The delay time is calculated in 1/100ths of a second, but note that once the GIF has been created, if you use it for promotional purposes for example, different browsers may interpret the frame delay slightly differently - see <a href="https://www.deviantart.com/humpy77/journal/Frame-Delay-Times-for-Animated-GIFs-214150546" target="_blank">here</a> for more details. You may (optionally) supply X and Y offset values for the surface being used to add to the GIF, in which case the part drawn to the GIF will begin from the offset and not the default (0, 0) position, permitting you to select only a section of the surface to add. You can also supply a quantization value, which is an integer between 0 and 3, where 0 is full quantization and 3 is zero quantization (lower values will have a subsequent degradation in quality, but create a smaller GIF). Note that there isn't much difference between the default quality of 2, and the highest of 3, and using 3 will significantly slow down the creation of the GIF so care should be taken when using the maximum value.</p><p>Note that there are no built-in limits on number of frames or on the size of those frames in your GIF, but if you use too much memory then the function will fail and return -1, otherwise it will return 0.</p><div data-conref="../../../assets/snippets/Note_surface_only_rgba8unorm.hts"><p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;This function will only work with surfaces that use the&nbsp;<a href="../Drawing/Surfaces/surface_create.htm"><span class="inline2">surface_rgba8unorm</span></a> (default) surface format.</p></div><p>&nbsp;</p><h4>Syntax:</h4><p class="code"><span data-field="title" data-format="default">gif_add_surface</span>(gif_index, surface, delay_time, [xoffset], [yoffset]);</p><table><tbody><tr><th>Argument</th><th>Type</th><th>Description</th></tr><tr><td>gif_index</td><td><span data-keyref="Type_ID_GIF"><a target="_blank" href="gif_open.htm">GIF ID</a></span></td><td>The ID of the&nbsp;GIF to add the surface data to</td></tr><tr><td>surface</td><td><span data-keyref="Type_ID_Surface"><a target="_blank" href="../Drawing/Surfaces/surface_create.htm">Surface</a></span></td><td>The surface to use as the added frame</td></tr><tr><td>delay_time</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The delay time for the frame (in 100ths of a second)</td></tr><tr><td>[xoffset]</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span></td><td><span class="optional">OPTIONAL</span> The offset along the X axis of the surface to add from</td></tr><tr><td>[yoffset]</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span></td><td><span class="optional">OPTIONAL</span> The offset along the Y axis of the surface to add from</td></tr><tr><td>[quantization]</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span></td><td><span class="optional">OPTIONAL</span> The quantization amount from 0 to 3 (0 lowest quality, 3 highest quality, default is 2)</td></tr></tbody></table><p>&nbsp;</p><h4>Returns:</h4><p class="code"><span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span></p><p>&nbsp;</p><h4>Example:</h4><p class="code">if (save_gif == true)<br>{<br>&nbsp; &nbsp; if (count == 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;gif_image = gif_open(room_width, room_height);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp; &nbsp; else if (count &lt; 30)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;gif_add_surface(gif_image, application_surface, 6/100);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp; &nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;gif_save(gif_image, "GameCapture.gif");<br>&nbsp; &nbsp; &nbsp; &nbsp; count = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;save_gif = false;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp; &nbsp; count++;<br>}</p><p>The above code will create a GIF image file with 30 frames taken from the application surface and then save it.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back:&nbsp;<a href="Cameras_And_Display.htm">Cameras And Display</a></div><div style="float:right">Next: <a href="gif_save.htm">gif_save</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>