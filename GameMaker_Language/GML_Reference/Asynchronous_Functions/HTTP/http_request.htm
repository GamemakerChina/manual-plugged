<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/main.css"><script>let str;removeHtml=function(e){return e=(e=(e=(e=e.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(e){return e.match(/(<([^>]+)>)/gi)},setTranslator=function(e,t,a){let o;o=a?e.attr(a):e.html();let s=t[removeHtml(o)];if(null!=s&&s.length){t=retHtml(o);let n=0;t&&t.forEach(function(e,t){var a=s.replace("{"+n+"}",e);s=a===s?s.replace("{}",e):a,n++}),a?e.attr(a,s):e.html(s)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){var e=`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`;$(".header").length?$(".header").append(e):($(".topic-header").append(e),$(".topic-header button").css("position","relative").css("top","44px"))},removeExtensionFromHash=function(e){return e.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")};let json_global,json_file={"A DS map with the required header fields":"具有所需标头字段的 DS 映射","A ds_map with the required header fields":"一个ds_map，其中包含所需的报头字段",'An HTTP request can be used for many things like (for example) authentication via HTTP headers if you use RESTful APIs. The function requires the full IP address of the server to request from as well as the type of request to make (as a string, see the note below): {}"GET"{}, {}"HEAD"{}, {}"POST"{}, {}"PUT"{}, {}"DELETE"{}, {}"TRACE"{}, {}"OPTIONS"{}, or {}"CONNECT"{}. You will also need to supply a {}{}DS map{}{} of key/value pairs (as strings, where the key is the header field and the value is the required data for the header), and the final argument is an optional data string that you can add to the request, and if it\'s not needed then it can be either 0 or an empty string "". Note that you can also send a buffer (see the section on&nbsp;{}Buffers{}&nbsp;for more details), in which case the last argument would be the index of the buffer to send.':'HTTP 请求可用于许多事情，例如，如果您使用 RESTful API，则可以通过 HTTP 标头进行身份验证。该函数需要发出请求的服务器的完整 IP 地址以及发出请求的类型 (作为字符串，请参阅下面的注释)：{}"GET"{},{}"HEAD"{},{}"POST"{}、{}"PUT"{}、{}"DELETE"{}、{}"TRACE"{}、{}"OPTIONS"{} 或 {}"CONNECT"{}。您还需要提供键 / 值对的 {}{}DS 映射 {}{}( 作为字符串，其中键是标头字段，值是标头所需的数据)，最后一个参数是您可以添加到请求中的可选数据字符串，如果不需要，则可以是 0 或空字符串 ""。请注意，您还可以发送缓冲区 (有关更多详细信息，请参阅有关 {} 缓冲区 {} 的部分)，在这种情况下，最后一个参数将是要发送的缓冲区的索引。',"Async Callback":"异步回调",'HTTP headers normally follow the format "key:value", but since {}GameMaker{}&nbsp;creates these pairs for you from the DS map there is no need to include the colon ":" in your map key or value strings.':'HTTP 标头通常遵循 "key:value" 格式，但由于 {}GameMaker{} 从 DS 地图为您创建这些对，因此无需在地图键或值字符串中包含冒号 ":"。','The above code creates a DS map with the relevant HTTP headers for the function, then creates a data string for use as this is a POST request. Finally the function is called, with it\'s ID value being stored in the variable "request" for checking in the HTTP asynchronous event.':"上面的代码创建了一个DS映射，其中包含函数的相关HTTP头，然后创建一个数据字符串以供使用，因为这是一个POST请求。 最后调用该函数，其 ID 值存储在变量“request”中，用于检查 HTTP 异步事件。","The above code creates a DS map with the relevant HTTP headers for the function, then creates a data string for use as this is a POST request. Finally the function is called, with its ID value being stored in the instance variable {}request{} for checking in the HTTP asynchronous event.":"上面的代码创建一个 DS 映射，其中包含该函数的相关 HTTP 标头，然后创建一个数据字符串以供使用，因为这是一个 POST 请求。最后调用该函数，其 ID 值存储在实例变量 {}request{} 中，用于检查 HTTP 异步事件。","The data to be transmitted following the headers (can be a binary buffer handle)":"在头文件后面传输的数据(可以是二进制缓冲区句柄)",'The request method (normally {}"POST"{} or {}"GET"{}, but all methods are supported)':'请求方法(通常是 {}"POST"{} 或 {}"GET"{} ，但是支持所有方法)',"The web address of the server that you wish to get information from":"您希望从中获取信息的服务器的 Web 地址",'This event will generate a "callback" which is picked up by any {}Async HTTP Events{}, in which case it will generate a {}DS Map{}&nbsp;that is exclusive to this event and is stored in the special variable {}{}async_load{}{}. This DS&nbsp;map has the following two keys related to the request function:':'此事件将生成由任何{}异步HTTP事件{}拾取的"回调"，在这种情况下，它将生成此事件独有的、存储在特殊变量 {}{}async_load{}{} 中的 {2}DS 映射{3}。此DS映射具有与请求函数相关的以下两个键：',"This function creates an HTTP request and sends it.":"该函数创建一个 HTTP 请求并发送它。","This function returns an&nbsp;{}{}Async Request ID{}{}&nbsp;which can be used to identify its callback, as described below.":"这个函数返回一个 {}{}异步请求ID{}{}，可以用来标识它的回调，如下所述。","Usage Notes":"使用说明","When using a buffer for the body argument, if the buffer seek position is at the start (0) then no body is sent and the buffer is filled with the response from the HTTP call, but if the buffer seek position is non-zero, then the buffer string content is sent as the body.":"当对 body 参数使用缓冲区时，如果缓冲区查找位置位于开始 (0)，则不会发送正文，并且缓冲区将填充来自 HTTP 调用的响应，但如果缓冲区查找位置非零，然后缓冲区字符串内容作为正文发送。",'With this function, you can create an HTTP header request to define the operating parameters of an HTTP transaction, which can be used for many things like (for example) authentication via HTTP headers if you use RESTful APIs. The function requires the full IP address of the server to request from as well as the type of request to make (as a string, see the note below): "GET", "HEAD", "POST", "PUT", "DELETE", "TRACE", "OPTIONS", or "CONNECT". You will also need to supply a {}{}DS map{}{} of key/value pairs (as strings, where the key is the header field and the value is the required data for the header), and the final argument is an optional data string that you can add to the request, and if it\'s not needed then it can be either 0 or an empty string "". Note that you can also send a buffer (see the section on {}Buffers{} for more details), in which case the last argument would be the index of the buffer to send.':'通过这个函数,您可以创建一个HTTP报头请求来定义HTTP事务的操作参数,如果使用 RESTful api,可以将其用于许多事情,比如通过HTTP报头进行身份验证(例如)。该函数需要请求的服务器的完整IP地址以及请求的类型(作为字符串,参见下面的注释):"GET", "HEAD", "POST", "PUT", "DELETE", "TRACE", "OPTIONS",或"CONNECT"。您还需要提供键/值对的{}{}DS map {}{}(作为字符串,其中键是报头字段,值是报头所需的数据),最后的参数是可以添加到请求中的可选数据字符串,如果不需要它,那么它可以是0或空字符串""。注意,你也可以发送一个缓冲区(参见{}Buffers{}一节了解更多细节),在这种情况下,最后一个参数将是要发送的缓冲区的索引。',"You should be aware that due to XSS protection in browsers, requests to and attempts to load resources from across domains are blocked and may appear to return blank results. Please see the part on&nbsp;{}Cross-Domain Issues{} for further details.":"您应该注意，由于浏览器中的 XSS 保护，跨域的请求和加载资源的尝试会被阻止，并且可能会返回空白结果。请参阅有关 {} 跨域问题 {} 的部分了解更多详情。",'{}NOTE{}: HTTP headers normally follow the format "key:value", but since {}GameMaker{}&nbsp;creates these pairs for you from the ds_map, there is no need to include the colon ":" in your map key or value strings.':"{}注意{}: HTTP头通常遵循“key:value”的格式，但是因为{}GameMaker{}从ds_map为你创建了这些对，所以没有必要在你的map键或值字符串中包含冒号“:”。","{}NOTE{}: When using a buffer for the body argument, if the buffer seek position is at the start (0) then no body is sent and the buffer is filled with the response from the http call, but if the buffer seek position is non-zero, then the buffer string content is sent as the body.":"{}注意{}: 当使用buffer作为body参数时，如果buffer seek位置在start(0)处，则不发送body，缓冲区将被来自http调用的响应填充，但如果buffer seek位置非零，则buffer字符串内容将作为body发送。","{}NOTE{}: You should be aware that due to XSS protection in browsers, requests to and attempts to load resources from across domains are blocked and may appear to return blank results. Please see the part on {}Cross Domain Issues{} for further details.":"{}注意{}: 您应该注意，由于浏览器中的跨域保护，从跨域加载资源的请求和尝试被阻止，可能会返回空白结果。请参阅{}跨域问题{}部分了解更多细节。","{}id: {}The ID which was returned from the function. If you fire off a series of {}http_{} requests then you need to know which one you are getting the reply to, and so you would use this value to compare to the value you stored when you originally sent the request to find the right one.":"{}id：{} 函数返回的 ID。如果您发出一系列的 {}http_{} 请求，那么您需要知道您收到的是哪个请求的回复，因此您将使用此值与最初发送请求时存储的值进行比较，以找到正确的请求。","{}response_headers:{} If this has a value greater than or equal to 0, it holds a DS map&nbsp;that contains the HTTP headers returned with the response to the HTTP request.":"{}response_headers：{} 如果它的值大于或等于 0，则它保存一个 DS 映射，其中包含与对 HTTP 请求的响应一起返回的 HTTP 头。"},get_json_global=$.ajax({url:"/global.json",type:"GET",dataType:"json",async:!1,success:function(e){json_global=e}});$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json_file)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../..",gTopicId="8.2.2.14.1.0_1"</script><script type="text/javascript" src="../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>http_request</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css"><script src="../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Reference page for http_request"><meta name="rh-index-keywords" content="http_request"><meta name="search-keywords" content="http_request"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Asynchronous_Functions/HTTP/http_get.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asynchronous_Functions/HTTP/HTTP.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="http_request"><span>http_request</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">http_request</span></h1><p>This function creates an HTTP request and sends it.</p><p>An HTTP request can be used for many things like (for example) authentication via HTTP headers if you use RESTful APIs. The function requires the full IP address of the server to request from as well as the type of request to make (as a string, see the note below): <span class="inline2">"GET"</span>, <span class="inline2">"HEAD"</span>, <span class="inline2">"POST"</span>, <span class="inline2">"PUT"</span>, <span class="inline2">"DELETE"</span>, <span class="inline2">"TRACE"</span>, <span class="inline2">"OPTIONS"</span>, or <span class="inline2">"CONNECT"</span>. You will also need to supply a <span class="inline"><a href="../../Data_Structures/DS_Maps/DS_Maps.htm">DS map</a></span> of key/value pairs (as strings, where the key is the header field and the value is the required data for the header), and the final argument is an optional data string that you can add to the request, and if it's not needed then it can be either 0 or an empty string "". Note that you can also send a buffer (see the section on&nbsp;<a href="../../Buffers/Buffers.htm">Buffers</a>&nbsp;for more details), in which case the last argument would be the index of the buffer to send.</p><h3>Usage Notes</h3><ul class="Disc"><li>HTTP headers normally follow the format "key:value", but since <span data-keyref="GameMaker Name">GameMaker</span>&nbsp;creates these pairs for you from the DS map there is no need to include the colon ":" in your map key or value strings.</li><li>When using a buffer for the body argument, if the buffer seek position is at the start (0) then no body is sent and the buffer is filled with the response from the HTTP call, but if the buffer seek position is non-zero, then the buffer string content is sent as the body.</li><li>You should be aware that due to XSS protection in browsers, requests to and attempts to load resources from across domains are blocked and may appear to return blank results. Please see the part on&nbsp;<a href="HTTP.htm#cross_domain_issues">Cross-Domain Issues</a> for further details.</li></ul><p>This function returns an&nbsp;<span data-keyref="Type_ID_Async_Event"><a target="_blank" href="../Asynchronous_Functions.htm">Async Request ID</a></span>&nbsp;which can be used to identify its callback, as described below.</p><h2>Async Callback</h2><p>This event will generate a "callback" which is picked up by any <a href="../../../../The_Asset_Editors/Object_Properties/Async_Events/HTTP.htm">Async HTTP Events</a>, in which case it will generate a <span class="inline">DS Map</span>&nbsp;that is exclusive to this event and is stored in the special variable <span class="inline2"><a href="../../../GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a></span>. This DS&nbsp;map has the following two keys related to the request function:</p><ul class="colour"><li><b>id:</b> The ID which was returned from the function. If you fire off a series of <span class="inline">http_</span> requests then you need to know which one you are getting the reply to, and so you would use this value to compare to the value you stored when you originally sent the request to find the right one.</li><li><b>response_headers:</b> If this has a value greater than or equal to 0, it holds a DS map&nbsp;that contains the HTTP headers returned with the response to the HTTP request.</li></ul><p>&nbsp;</p><h4>Syntax:</h4><p class="code"><span data-field="title" data-format="default">http_request</span>(url, method, header_map, body);</p><table><tbody><tr><th>Argument</th><th>Type</th><th>Description</th></tr><tr><td>url</td><td><span data-keyref="Type_String"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">String</a></span></td><td>The web address of the server that you wish to get information from</td></tr><tr><td>method</td><td><span data-keyref="Type_String"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">String</a></span></td><td>The request method (normally <span class="inline2">"POST"</span> or <span class="inline2">"GET"</span>, but all methods are supported)</td></tr><tr><td>header_map</td><td><span data-keyref="Type_ID_DS_Map"><a target="_blank" href="../../Data_Structures/DS_Maps/ds_map_create.htm">DS Map</a></span></td><td>A DS map with the required header fields</td></tr><tr><td>body</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">Real</a></span>,&nbsp;<span data-keyref="Type_String"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">String</a></span>, or&nbsp;<span data-keyref="Type_ID_Buffer"><a target="_blank" href="../../Buffers/buffer_create.htm">Buffer</a></span></td><td>The data to be transmitted following the headers (can be a binary buffer handle)</td></tr></tbody></table><p>&nbsp;</p><h4>Returns:</h4><p class="code"><span data-keyref="Type_ID_Async_Event"><a target="_blank" href="../Asynchronous_Functions.htm">Async Request ID</a></span></p><p>&nbsp;</p><h4>Example:</h4><p class="code">var _headers = ds_map_create();<br>ds_map_add(_headers, "Authorization", "Basic eW95b19hZG1pbjpjNG5lZmllbGQ=");<br>ds_map_add(_headers, "Content-Type", "application/x-www-form-urlencoded");<br>ds_map_add(_headers, "Cookie", "request_method=GET; _InAppPurchases_session=69bb6ef6eec2b");<br>var _data="utf8=%E2%9C%93&amp;authenticity_token=kPmS14DcYcuKgMFZUsN3XFfj3mhs%3D&amp;product%5Bname%5D=CatchTheHaggis&amp;product%5Bproduct_id%5D=http_test&amp;commit=Create+Product";<br>request = <span data-field="title" data-format="default">http_request</span>("http://225.0.0.97:3000/products", "POST", _headers, _data);<br>ds_map_destroy(_headers);</p><p>The above code creates a DS map with the relevant HTTP headers for the function, then creates a data string for use as this is a POST request. Finally the function is called, with its ID value being stored in the instance variable <span class="inline2">request</span> for checking in the HTTP asynchronous event.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back:&nbsp;<a href="HTTP.htm">HTTP</a></div><div style="float:right">Next:&nbsp;<a href="http_get.htm">http_get</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>