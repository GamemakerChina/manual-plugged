<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../..",gTopicId="8.2.2.21.0_15"</script><script type="text/javascript" src="../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>os_request_permission</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../assets/css/default.css" type="text/css"><script src="../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Reference page for os_request_permission"><meta name="rh-index-keywords" content="os_request_permission,os_permission_granted,os_permission_denied"><meta name="search-keywords" content="os_request_permission,os_permission_granted,os_permission_denied"><meta name="brsnext" value="GameMaker_Language/GML_Reference/OS_And_Compiler/GM_build_date.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/OS_And_Compiler/os_check_permission.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="os_request_permission"><span>os_request_permission</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>os_request_permission</h1><p>With this function you can request a specific permission. You supply the permission to request as a string using the format "<span class="inline">android.permission.&lt;permission&gt;</span>", so to request the <span class="inline">RECORD_AUDIO</span> permission (for example) you would call:</p><p class="code">os_request_permission("android.permission.RECORD_AUDIO");</p><p>This function is for the Android target only.</p><p>You can request multiple permissions at once by passing multiple arguments into the function.</p><p>This will later trigger a <a href="../../../The_Asset_Editors/Object_Properties/Async_Events/System.htm">System Asynchronous Event</a> where the built in <a href="../../GML_Overview/Variables/Builtin_Global_Variables/async_load.htm"><span class="inline">async_load</span></a> DS map will contain the following key/value pairs:</p><ul class="colour"><li>"<b>type</b>": This will be the string <span class="inline2">"permission_request_result"</span>, used to identify the type of event triggered.</li><li>"<b>&lt;permission&gt;</b>": This will be a permission requested by the function, as a string. You will get keys for all the permissions you requested in the original function call.<br><br>This key will equal one of the following constants:</li></ul><table><tbody><tr><th>Constant</th><th>Description</th></tr><tr><td><span class="inline">os_permission_granted</span></td><td>This indicates that the permission has been granted</td></tr><tr><td><span class="inline">os_permission_denied</span></td><td>This indicates that the permission has not been granted</td></tr></tbody></table><p>It is worth noting that the following permission are supported natively by <span data-keyref="GameMaker Name">GameMaker</span>, but are considered "dangerous" by Google and as such they <i>must</i> be explicitly requested (note too that some permissions can be requested using the <a href="../../../Settings/Game_Options/Android.htm">Android Game Options</a> without the need for this function):</p><ul class="colour"><li><span class="inline">android.permission.WRITE_EXTERNAL_STORAGE</span></li><li><span class="inline">android.permission.READ_PHONE_STATE</span></li><li><span class="inline">android.permission.RECORD_AUDIO</span></li></ul><p>For more information on app permissions, please see the <a href="https://developer.android.com/guide/topics/permissions/overview" target="_blank">Android Documentation</a>.</p><p>&nbsp;</p><h4>Syntax:</h4><p class="code">os_request_permission(permissions...)</p><table><tbody><tr><th>Argument</th><th>Type</th><th>Description</th></tr><tr><td>permissions</td><td><span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span></td><td>The permission(s) to request. Request multiple permissions by adding more arguments.</td></tr></tbody></table><p>&nbsp;</p><h4>Returns:</h4><p class="code"><span data-keyref="Type_Void">N/A</span></p><p>&nbsp;</p><h4>Example 1:</h4><p class="code">if (os_type == os_android)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;if (os_check_permission("android.permission.INTERNET") == os_permission_denied)<br>&nbsp; &nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os_request_permission("android.permission.INTERNET");<br>&nbsp; &nbsp; }<br>}</p><p>The above code checks the OS type and if it's Android, it performs a check on the "INTERNET" permission and if it's not yet been granted, it requests it.</p><h4>Example 2:</h4><p class="code">var _read = "android.permission.READ_EXTERNAL_STORAGE";<br>var _write = "android.permission.WRITE_EXTERNAL_STORAGE";<br><br>if (os_check_permission(_write) &amp;&amp;&nbsp;os_check_permission(_read))<br>{<br>&nbsp; &nbsp;&nbsp;MobileMedia_Share_Open("Title!", "image/gif", file);<br>}<br>else<br>{<br>&nbsp; &nbsp;&nbsp;os_request_permission(_write, _read);<br>}</p><p>This&nbsp;function checks if the user has permissions for reading from and writing to external storage. If it's allowed, it runs an extension function to operate using those permissions. However if either of those permissions are not allowed, it calls <span class="inline2">os_request_permission()</span> to request both permissions at once.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="OS_And_Compiler.htm">OS And Compiler</a></div><div style="float:right">Next: <a href="GM_build_date.htm">GM_build_date</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>