<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../..",gTopicId="8.2.2.19.4"</script><script type="text/javascript" src="../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Match Making</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css"><script src="../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Reference section for the XBox Live Match Making functions"><meta name="rh-index-keywords" content=""><meta name="search-keywords" content="Match Making,Xbox Live Match Making"><meta name="brsnext" value="GameMaker_Language/GML_Reference/UWP_And_XBox_Live/Match_Making/xboxlive_matchmaking_start.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/UWP_And_XBox_Live/Stats_And_Leaderboards/xboxlive_fire_event.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Match Making"><span>Match Making</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>Matchmaking</h1><p>Matchmaking (multiplayer) for Xbox Live and UWP requires a bit of configuration, via setup of session templates and matchmaking hoppers on the Xbox Developer Portal. <span data-keyref="GameMaker Name">GameMaker</span> supports this through the use of the UWP target and permits you to do the following:</p><ul class="colour"><li>Create a multiplayer session</li><li>Find (and/or join) a multiplayer session</li><li>Be notified when relevant players join or leave a session, as well as receive their network connection details</li><li>Be notified when the session host migrates to a different user</li><li>Get a list of users in the session</li><li>Leave a session</li></ul><p>To create a multiplayer session, you need to specify what <b>Session Template</b> is going to be used. These session templates are defined on the XDP, but an example is shown below:</p><p class="code">Session Name: MatchSession<br>Contract Version: 107<br>Session Template (JSON text):<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;"constants": {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"system": {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"version": 1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"maxMembersCount": 12,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"capabilities": {<br>&nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"memberInitialization": {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"externalEvaluation": false,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"membersNeededToStart": 1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; },<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"custom": {}<br>&nbsp; &nbsp; }<br>}</p><p>A description of the fields can be found in "Session Overview" in the XDK help file. Note that we currently don't support setting session parameters dynamically from <span data-keyref="GameMaker Name">GameMaker</span>.</p><p>Along with the session template, a matchmaking hopper must also be set up to allow the session to be found (this is also done on the XDP). Hoppers are used to define rules which are used when matching players. As with session parameters, we don't currently support setting hopper parameters dynamically from GameMaker: Studio. See the "SmartMatch Matchmaking Configuration" section in the XDK help file for further details.</p><p>The following functions are available for Xbox Live matchmaking (note that you will also need to use the <span data-keyref="GameMaker Name">GameMaker</span> <a href="../../Networking/Networking.htm">Networking Functions</a> for the connections etc...):</p><ul class="colour"><li><a href="xboxlive_matchmaking_start.htm">xboxlive_matchmaking_start</a></li><li><a href="xboxlive_matchmaking_stop.htm">xboxlive_matchmaking_stop</a></li><li><a href="xboxlive_matchmaking_create.htm">xboxlive_matchmaking_create</a></li><li><a href="xboxlive_matchmaking_find.htm">xboxlive_matchmaking_find</a></li><li><a href="xboxlive_matchmaking_session_get_users.htm">xboxlive_matchmaking_session_get_users</a></li><li><a href="xboxlive_matchmaking_join_session.htm">xboxlive_matchmaking_join_session</a></li><li><a href="xboxlive_matchmaking_session_leave.htm">xboxlive_matchmaking_session_leave</a></li></ul><p>&nbsp;</p><p><span data-keyref="GameMaker Name">GameMaker</span> provides an extra set of matchmaking functions for you to use to invite other players on the network to join a session, or for you to accept an invitation to join someone else's session. The functions available are:</p><ul class="colour"><li><a href="xboxlive_matchmaking_send_invites.htm">xboxlive_matchmaking_send_invites</a></li><li><a href="xboxlive_matchmaking_set_joinable_session.htm">xboxlive_matchmaking_set_joinable_session</a></li><li><a href="xboxlive_matchmaking_join_invite.htm">xboxlive_matchmaking_join_invite</a></li></ul><p>&nbsp;</p><p>When the player accepts an invitation from another player, one of two things happens:</p><ul class="colour"><li>If your game is currently running, you will receive a <a href="../../../../The_Asset_Editors/Object_Properties/Async_Events/Social.htm">Social Asynchronous Event</a> with <a href="../../../GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map containing the following keys/values:<ul><li>"<strong>id</strong>" - This will be set to MATCHMAKING_INVITATION.</li><li>"<strong>invitation_id</strong>" - This is the unique session ID value</li><li>"<strong>invitation_host</strong>" - This is the unique session ID value for the session host</li></ul>You should save the ID and Host values then leave any sessions you need to, and call the function <span class="inline">xboxlive_matchmaking_join_invite()</span>, passing in as arguments the invitation ID and invitation host values in a Step event.</li><li>If your game is not currently running, it will be started by the OS. You will receive the same type of <b>Social Asynchronous Event</b> with the same keys set as those listed above. Save them to variables, then connect to Xbox Live matchmaking and finally call <span class="inline">xboxlive_matchmaking_join_invite()</span>.</li></ul><p>Once you have called <span class="inline">xboxlive_matchmaking_join_invite()</span> the user will attempt to join the session and you will receive Asynchronous Social Events as if you had called <span class="inline">xboxlive_matchmaking_find()</span> on this session.</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="../UWP_And_XBox_Live.htm">UWP And XBox Live</a></div><div style="float:right">Next: <a href="../Users_And_Accounts/Users_And_Accounts.htm">Users And Accounts</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>