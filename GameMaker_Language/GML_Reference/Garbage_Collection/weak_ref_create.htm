<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../assets/import/main.css"><script>let str;removeHtml=function(e){return e=(e=(e=(e=e.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(e){return e.match(/(<([^>]+)>)/gi)},setTranslator=function(e,t,n){let o;o=n?e.attr(n):e.html();let r=t[removeHtml(o)];if(null!=r&&r.length){t=retHtml(o);let a=0;t&&t.forEach(function(e,t){var n=r.replace("{"+a+"}",e);r=n===r?r.replace("{}",e):n,a++}),n?e.attr(n,r):e.html(r)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){var e=`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`;$(".header").length?$(".header").append(e):($(".topic-header").append(e),$(".topic-header button").css("position","relative").css("top","44px"))},removeExtensionFromHash=function(e){return e.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")};let json_global,json_file={"The above code creates a weak reference to a struct and stores it in an instance variable for later use.":"上面的代码创建了对结构的弱引用，并将其存储在实例变量中供以后使用。","The struct or method that you want to create a weak reference for":"要为其创建弱引用的结构或方法","The struct that you want to create a weak reference for":"要为其创建弱引用的结构",'The weak reference struct will have a variable "{}ref{}" which can be accessed to get the strong reference to the struct in question, unless it has been garbage collected, in which case it will return {}undefined{}.':'弱引用结构将有一个变量 "{}ref{}"，可以访问该变量来获得对相关结构的强引用，除非它已被垃圾回收，在这种情况下，它将返回 {}undefined{}。',"Usage Notes":"使用说明",'With this function you can create a&nbsp;{}weak reference{}&nbsp;to a struct which can then be used to check if the struct is still "alive" (referenced) or not in the game. You supply the reference to the struct you want to track, and the function will return another struct which is a weak reference to that struct. Note that you can check whether a reference is "strong" or "weak" by using the function {}{}instanceof(){}{}, as a strong reference will return either "{}struct{}" or the name of the constructor function that created the struct, or "{}weakref{}" if it\'s a weak reference. Also note that the weak reference struct will have a variable "{}ref{}" which can be accessed to get the strong reference to the struct in question, unless it has been garbage collected, in which case it will return {}undefined{}.':'使用此函数，您可以创建一个指向结构的{}弱引用{}，然后可以用来检查该结构是否仍在 "活着"(引用)在游戏中。您提供对要跟踪的结构的引用，该函数将返回另一个结构，该结构是对该结构的弱引用。请注意，您可以使用函数{}{}instanceof(){}{}来检查引用是 "强" 还是 "弱"，因为强引用将返回 "{}struct{}" 或创建该结构的构造函数的名称，如果是弱引用，则返回 "{}weakref{}"。另请注意，弱引用结构将有一个变量 "{}ref{}"，可以访问该变量来获得对相关结构的强引用，除非它已被垃圾回收，在这种情况下，它将返回{}undefined{}。','With this function you can create a&nbsp;{}weak reference{}&nbsp;to a {}struct{} which can then be used to check if the struct is still "alive" (referenced) or not in the game. You supply the reference to the struct you want to track, and the function will return another struct which is a weak reference to that struct.':'使用此函数，您可以创建一个指向{2}结构{3}的{}弱引用{}，然后可以用来检查该结构是否仍在 "活着"(引用)在游戏中。您提供对要跟踪的结构的引用，该函数将返回另一个结构，该结构是对该结构的弱引用。','You can check whether a reference is "strong" or "weak" by using the function {}{}instanceof{}{}, as a strong reference will return either "{}struct{}" or the name of the constructor function that created the struct, or "{}weakref{}" if it\'s a weak reference.':'您可以使用函数 {}{}instanceof(){}{} 来检查引用是 "强" 还是 "弱"，因为强引用将返回 "{}struct{}" 或创建该结构的构造函数的名称，如果是弱引用，则返回 "{}weakref{}"'},get_json_global=$.ajax({url:"/global.json",type:"GET",dataType:"json",async:!1,success:function(e){json_global=e}});$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json_file)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../..",gTopicId="8.2.2.23.0_7"</script><script type="text/javascript" src="../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>weak_ref_create</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../assets/css/default.css" type="text/css"><script src="../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Reference page for weak_ref_create"><meta name="rh-index-keywords" content="weak_ref_create"><meta name="search-keywords" content="weak_ref_create,weak references"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Garbage_Collection/weak_ref_alive.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Garbage_Collection/gc_get_stats.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="weak_ref_create"><span>weak_ref_create</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">weak_ref_create</span></h1><p>With this function you can create a&nbsp;<a class="tooltip" title="A&nbsp;weak reference is a reference that does not protect the referenced object from collection by a garbage collector, and so can be used to check if a struct is still &quot;alive&quot; (referenced) or not somewhere in the game.">weak reference</a>&nbsp;to a <a href="../../GML_Overview/Structs.htm">struct</a> which can then be used to check if the struct is still "alive" (referenced) or not in the game. You supply the reference to the struct you want to track, and the function will return another struct which is a weak reference to that struct.</p><h3>Usage Notes</h3><ul class="Disc"><li>You can check whether a reference is "strong" or "weak" by using the function <span class="inline3_func"><a href="../Variable_Functions/instanceof.htm">instanceof</a></span>, as a strong reference will return either "<span class="inline">struct</span>" or the name of the constructor function that created the struct, or "<span class="inline">weakref</span>" if it's a weak reference.</li><li>The weak reference struct will have a variable "<span class="inline">ref</span>" which can be accessed to get the strong reference to the struct in question, unless it has been garbage collected, in which case it will return <span class="inline2">undefined</span>.</li></ul><p>&nbsp;</p><h4>Syntax:</h4><p class="code"><span data-field="title" data-format="default">weak_ref_create</span>(struct_to_track);</p><table><tbody><tr><th>Argument</th><th>Type</th><th>Description</th></tr><tr><td>struct_to_track</td><td><span data-keyref="Type_Struct"><a target="_blank" href="../../GML_Overview/Structs.htm">Struct</a></span>&nbsp;or&nbsp;<span data-keyref="Type_Method"><a target="_blank" href="../../GML_Overview/Method_Variables.htm">Method</a></span></td><td>The struct or method that you want to create a weak reference for</td></tr></tbody></table><p>&nbsp;</p><h4>Returns:</h4><p class="code"><span data-keyref="Type_Struct_WeakRef"><a target="_blank" href="weak_ref_create.htm">Struct Weak Reference</a></span></p><p>&nbsp;</p><h4>Example:</h4><p class="code">inventory_ref = <span data-field="title" data-format="default">weak_ref_create</span>(inventory);</p><p>The above code creates a weak reference to a struct and stores it in an instance variable for later use.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back:&nbsp;<a href="Garbage_Collection.htm">Garbage Collection</a></div><div style="float:right">Next:&nbsp;<a href="weak_ref_alive.htm">weak_ref_alive</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>