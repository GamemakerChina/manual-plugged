<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/main.css"><script>let str;removeHtml=function(e){return e=(e=(e=(e=e.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(e){return e.match(/(<([^>]+)>)/gi)},setTranslator=function(e,t,n){let i;i=n?e.attr(n):e.html();let o=t[removeHtml(i)];if(null!=o&&o.length){t=retHtml(i);let a=0;t&&t.forEach(function(e,t){var n=o.replace("{"+a+"}",e);o=n===o?o.replace("{}",e):n,a++}),n?e.attr(n,o):e.html(o)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){var e=`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`;$(".header").length?$(".header").append(e):($(".topic-header").append(e),$(".topic-header button").css("position","relative").css("top","44px"))},removeExtensionFromHash=function(e){return e.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")};let json_global,json_file={'An optional mapping function can be provided to determine which values in the DS grid should be considered "empty" or "occupied".':'可以提供可选的映射函数来确定 DS 网格中的哪些值应被视为 " 空 " 或 " 占用"。',"By default, a&nbsp;DS grid created with&nbsp;{}{}ds_grid_create{}{}&nbsp;has all elements set to 0 so an MP grid created from it will be empty.":"默认情况下，使用 {}{}ds_grid_create{}{} 创建的 DS 网格的所有元素都设置为 0，因此从中创建的 MP 网格将为空。","Cells set to 0 in the DS grid become empty cells in the MP grid, all&nbsp;other values will be occupied.":"DS 网格中设置为 0 的单元格将成为 MP 网格中的空单元格，所有其他值将被占用。","The DS grid to convert":"要转换的 DS 网格","The MP grid to write the data to":"将数据写入的 MP 网格",'The above code first creates a DS grid of 10 cells by 10 cells (initialised in the&nbsp;{}_size{}&nbsp;variable) using {}{}ds_grid_create{}{}. It then assigns one of 5 possible values, selected using the {}{}choose{}{}&nbsp;function, to each&nbsp;of 20 randomly selected cells in the grid. After that, it creates an MP grid using&nbsp;{}{}mp_grid_create{}{}&nbsp;and fills it using the contents of the DS grid by calling the&nbsp;{}{}ds_grid_to_mp_grid{}{}&nbsp;function. DS grid cells containing {}0{}&nbsp;or {}false{}&nbsp;will be marked as "empty" in the MP grid, cells containing {}true{}, {}"7"{}&nbsp;or {}47{}&nbsp;marked as "occupied".':'上述代码首先使用 {}{}ds_grid_create{}{} 创建一个 10 个单元 x 10 个单元的 DS 网格 (在 {0}_size{1} 变量中初始化)。然后，它会将使用 {}{}choose{}{} 函数选择的 5 个可能值之一分配给网格中随机选择的 20 个单元格中的每一个。之后，它使用 {}{}mp_grid_create{}{} 创建 MP 网格，并通过调用 {}{}ds_grid_to_mp_grid{}{} 函数使用 DS 网格的内容填充它。包含 {}0{} 或 {}false{} 的 DS 网格单元将在 MP 网格中标记为 " 空"，包含 {}true{}、{}"7"{} 或 {}47{} 的单元将标记为 " 占据"。','The above code first shows an example of how to use a mapping function. First it defines {}width{}, {}height{} and {}cellsize{} as instance variables, as well as a mapping function {}occupied{} that returns {}true{} if the value is one of {}"Mountains"{}, {}"Water"{} or {}"Forest"{}&nbsp;or&nbsp;{}false{} if it is either {}"Grass"{} or any other value. It then creates a {}DS grid{}&nbsp;{}grd_level{} of the given width and height and fills it with a couple of terrain types. After that, an MP grid of the same width and height is created using&nbsp;{}{}mp_grid_create{}{}&nbsp;and its ID stored in a variable {}mpg_level{}. Finally the MP grid is initialized with the contents of the DS grid, using&nbsp;{}{}ds_grid_to_mp_grid{}{}.':'上面的代码首先展示了如何使用映射函数的示例。首先，它将 {}width{} 、 {}height{} 和 {}cellsize{} 定义为实例变量，以及一个占用的{}occupied{}函数，如果该值为 {}"Mountains"{}、{}"Water"{} 或 {}"Forest"{} 之一，则返回 {8}true{9}; 如果该值为 {}"Grass"{} 或任何其他值，则返回 {16}false{17}。然后，它创建一个给定宽度和高度的 {}DS 网格{} {}grd_level{}，并用几种地形类型填充它。之后，使用{}{}mp_grid_create{}{} 创建相同宽度和高度的 MP 网格，并将其 ID 存储在变量 {}mpg_level{} 中。最后，使用 {}{}ds_grid_to_mp_grid{}{} 使用 DS 网格的内容初始化 MP 网格。',"The grid can contain any value that can be converted to real using the function {}{}real{}{}. If there are values that cannot be converted, e.g. a string that contains only letters, the function will fail and an error message is shown.":"网格可以包含任何可以使用函数 {}{}real{}{} 转换为实数的值。如果存在无法转换的值，例如仅包含字母的字符串，该函数将失败并显示错误消息。","The optional mapping function that you pass to this function should take the following parameters:&nbsp;":"传递给此函数的可选映射函数应采用以下参数：","The value in the current cell":"当前单元格中的值","The x index/position of the grid cell":"网格单元的 x 索引 / 位置","The y index/position of the grid cell":"网格单元的 y 索引 / 位置",'This function converts a DS grid into an MP grid, where all 0 values become "empty" and all others "occupied".':'此函数将 DS 网格转换为 MP 网格，其中所有 0 值变为 " 空"，所有其他值变为 " 已占用"。',"Usage Notes":"使用说明","{}Mapping Function{}{}Mapping Function{}":"{} 映射函数 {}{} 映射函数 {}","{}{}NOTE{}{}&nbsp;To convert from MP grid to DS grid, see&nbsp;{}{}mp_grid_to_ds_grid{}{}.":"{}{} 注意{}{} 要从 MP 网格转换为 DS 网格，请参阅 {}{}mp_grid_to_ds_grid{}{}。","{}{}OPTIONAL{}{}&nbsp;The mapping function to use":"{}{} 可选{}{} 要使用的映射函数","{}{}WARNING{}{}&nbsp;The DS grid and MP grid {}must{} have the same width and height. If the grids' dimensions don't match, the conversion will fail and an error \"Error, grid sizes do not match\" is thrown.":'{}{} 警告{}{}DS 网格和 MP 网格 {} 必须 {} 具有相同的宽度和高度。如果网格尺寸不匹配，转换将失败并抛出错误 " 错误，网格尺寸不匹配"。'},get_json_global=$.ajax({url:"/global.json",type:"GET",dataType:"json",async:!1,success:function(e){json_global=e}});$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json_file)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../..",gTopicId="8.2.2.9.1.0_39"</script><script type="text/javascript" src="../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>ds_grid_to_mp_grid</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" type="text/css" href="../../../../assets/css/default.css"><script src="../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Bart Teunis"><meta name="topic-comment" content="Reference page for the ds_grid_to_mp_grid function"><meta name="rh-index-keywords" content="ds_grid_to_mp_grid"><meta name="search-keywords" content="ds_grid_to_mp_grid"><meta name="template" content="assets/masterpages/Manual_Keyword_Page.htt"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Data_Structures/DS_Lists/DS_Lists.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Data_Structures/DS_Grids/ds_grid_write.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="ds_grid_to_mp_grid"><span>ds_grid_to_mp_grid</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">ds_grid_to_mp_grid</span></h1><p>This function converts a DS grid into an MP grid, where all 0 values become "empty" and all others "occupied".</p><p>An optional mapping function can be provided to determine which values in the DS grid should be considered "empty" or "occupied".</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;To convert from MP grid to DS grid, see&nbsp;<span class="inline3_func"><a href="../../Movement_And_Collisions/Motion_Planning/mp_grid_to_ds_grid.htm">mp_grid_to_ds_grid</a></span>.</p><div data-conref="../../../../assets/snippets/Note_Warning_DS_MP_Grid_Sizes_Must_Match.hts"><p class="note"><span data-conref="../../../../assets/snippets/Tag_warning.hts"><span class="warning">WARNING</span></span>&nbsp;The DS grid and MP grid <strong>must</strong> have the same width and height. If the grids' dimensions don't match, the conversion will fail and an error "Error, grid sizes do not match" is thrown.</p></div><h3>Usage Notes</h3><ul class="Disc"><li>Cells set to 0 in the DS grid become empty cells in the MP grid, all&nbsp;other values will be occupied.</li><li>By default, a&nbsp;DS grid created with&nbsp;<span class="inline3_func"><a href="ds_grid_create.htm">ds_grid_create</a></span>&nbsp;has all elements set to 0 so an MP grid created from it will be empty.</li><li>The grid can contain any value that can be converted to real using the function <span class="inline3_func"><a href="../../Strings/real.htm">real</a></span>. If there are values that cannot be converted, e.g. a string that contains only letters, the function will fail and an error message is shown.</li></ul><h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down" href="#"><span data-open-text="true" data-skip-index="true">Mapping Function</span><span data-close-text="true">Mapping Function</span></a></h3><div class="droptext" data-targetname="drop-down"><p>The optional mapping function that you pass to this function should take the following parameters:&nbsp;</p><table class="cke_show_border"><tbody><tr><th style="">Argument</th><th>Type</th><th style="">Description</th></tr><tr><td style=""><b>value</b></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">Real</a></span></td><td style="">The value in the current cell</td></tr><tr><td style=""><b>x</b></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">Real</a></span></td><td style="">The x index/position of the grid cell</td></tr><tr><td style=""><span class="inline">y</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">Real</a></span></td><td style="">The y index/position of the grid cell</td></tr></tbody></table></div><ul class="Disc"></ul><p>&nbsp;</p><h4>Syntax:</h4><p class="code"><span data-field="title" data-format="default">ds_grid_to_mp_grid</span>(ds_grid, mp_grid[, func]);</p><table><colgroup><col><col><col></colgroup><tbody><tr><th>Argument</th><th>Type</th><th>Description</th></tr><tr><td>ds_grid</td><td><span data-keyref="Type_ID_DS_Grid"><a target="_blank" href="ds_grid_create.htm">DS Grid</a></span></td><td>The DS grid to convert</td></tr><tr><td>mp_grid</td><td><span data-keyref="Type_ID_MP_Grid"><a target="_blank" href="../../Movement_And_Collisions/Motion_Planning/mp_grid_create.htm">MP Grid ID</a></span></td><td>The MP grid to write the data to</td></tr><tr><td>func</td><td><span data-keyref="Type_Function"><a target="_blank" href="../../../GML_Overview/Script_Functions.htm">Function</a></span></td><td><span data-conref="../../../../assets/snippets/Tag_optional.hts"><span class="optional">OPTIONAL</span></span>&nbsp;The mapping function to use</td></tr></tbody></table><p>&nbsp;</p><h4>Returns:</h4><p class="code"><span data-keyref="Type_ID_MP_Grid"><a target="_blank" href="../../Movement_And_Collisions/Motion_Planning/mp_grid_create.htm">MP Grid ID</a></span></p><p>&nbsp;</p><h4>Example 1: Basic Usage</h4><p class="code">var _size = 10;<br>grd_data = ds_grid_create(_size, _size);<br>repeat(20)<br>{<br>&nbsp; &nbsp; ds_grid_set(grd_data, irandom(_size-1), irandom(_size-1), choose(0, false, true, "7", 47));<br>}<br><br>mpg_data = mp_grid_create(0, 0, _size, _size, 16, 16);<br><span data-field="title" data-format="default">ds_grid_to_mp_grid</span>(grd_data, mpg_data);</p><p>The above code first creates a DS grid of 10 cells by 10 cells (initialised in the&nbsp;<span class="inline2">_size</span>&nbsp;variable) using <span class="inline3_func"><a href="ds_grid_create.htm">ds_grid_create</a></span>. It then assigns one of 5 possible values, selected using the <span class="inline3_func"><a href="../../Maths_And_Numbers/Number_Functions/choose.htm">choose</a></span>&nbsp;function, to each&nbsp;of 20 randomly selected cells in the grid. After that, it creates an MP grid using&nbsp;<span class="inline3_func"><a href="../../Movement_And_Collisions/Motion_Planning/mp_grid_create.htm">mp_grid_create</a></span>&nbsp;and fills it using the contents of the DS grid by calling the&nbsp;<span class="inline3_func"><span data-field="title" data-format="default">ds_grid_to_mp_grid</span></span>&nbsp;function. DS grid cells containing <span class="inline2">0</span>&nbsp;or <span class="inline2">false</span>&nbsp;will be marked as "empty" in the MP grid, cells containing <span class="inline2">true</span>, <span class="inline2">"7"</span>&nbsp;or <span class="inline2">47</span>&nbsp;marked as "occupied".</p><p>&nbsp;</p><h4>Example 2: Using a Mapping Function</h4><p class="code">width = 128;<br>height = 128;<br>cellsize = 4;<br><br>function occupied(value, x, y)<br>{<br>&nbsp;&nbsp; &nbsp;switch(value)<br>&nbsp;&nbsp; &nbsp;{<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;case "Mountains":<br>&nbsp; &nbsp; &nbsp; &nbsp; case "Water":<br>&nbsp; &nbsp; &nbsp; &nbsp; case "Forest":<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return true;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;case "Grass":<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return false;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;default:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return false;<br>&nbsp;&nbsp; &nbsp;}<br>}<br><br>grd_level = ds_grid_create(width, height);<br>ds_grid_clear(grd_level, "Grass");<br>ds_grid_set_disk(grd_level, 60, 60, 20, "Water");<br>ds_grid_set_disk(grd_level, 100, 60, 20, "Mountains");<br>ds_grid_set_region(grd_level, 60, 100, 110, 110, "Forest");<br><br>mpg_level = mp_grid_create(0, 0, width, height, 4, 4);<br>ds_grid_to_mp_grid(grd_level, mpg_level, occupied);</p><p>The above code first shows an example of how to use a mapping function. First it defines <span class="inline2">width</span>, <span class="inline2">height</span> and <span class="inline2">cellsize</span> as instance variables, as well as a mapping function <span class="inline3_func">occupied</span> that returns <span class="inline2">true</span> if the value is one of <span class="inline2">"Mountains"</span>, <span class="inline2">"Water"</span> or <span class="inline2">"Forest"</span>&nbsp;or&nbsp;<span class="inline2">false</span> if it is either <span class="inline2">"Grass"</span> or any other value. It then creates a <a href="DS_Grids.htm">DS grid</a>&nbsp;<span class="inline2">grd_level</span> of the given width and height and fills it with a couple of terrain types. After that, an MP grid of the same width and height is created using&nbsp;<span class="inline3_func"><a href="../../Movement_And_Collisions/Motion_Planning/mp_grid_create.htm">mp_grid_create</a></span>&nbsp;and its ID stored in a variable <span class="inline2">mpg_level</span>. Finally the MP grid is initialized with the contents of the DS grid, using&nbsp;<span class="inline3_func"><span data-field="title" data-format="default">ds_grid_to_mp_grid</span></span>.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div>Back:&nbsp;<a href="DS_Grids.htm">DS Grids</a></div><div>Next:&nbsp;<a href="ds_grid_create.htm">ds_grid_create</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>