<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../../../..";
    gCommonRootRelPath = "../../../..";
    gTopicId = "8.2.2.9.1.0_39";
  
//]]></script>

  <script type="text/javascript" src="../../../../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../../../../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../../../../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../../../../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../../../../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../../../../template/styles/topic.min.css"/>
  <link rel="stylesheet" type="text/css" href="../../../../template/Charcoal_Grey/topicheader.css"/>
  <meta name="topic-status" content="Draft"/>

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>ds_grid_to_mp_grid</title>
  <meta name="generator" content="Adobe RoboHelp 2022"/>
  <link rel="stylesheet" type="text/css" href="../../../../assets/css/default.css"/>
  <script src="../../../../assets/scripts/main_script.js" type="module"></script>
  <meta name="rh-authors" content="Bart Teunis"/>
  <meta name="topic-comment" content="Reference page for the ds_grid_to_mp_grid function"/>
  <meta name="rh-index-keywords" content="ds_grid_to_mp_grid"/>
  <meta name="search-keywords" content="ds_grid_to_mp_grid"/>
  <meta name="template" content="assets/masterpages/Manual_Keyword_Page.htt"/>
</head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="ds_grid_to_mp_grid">
        <span>ds_grid_to_mp_grid</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <h1><span data-field="title" data-format="default">ds_grid_to_mp_grid</span></h1>
  <p>This function converts a DS grid into an MP grid, where all 0 values become &quot;empty&quot; and all others &quot;occupied&quot;.</p>
  <p>An optional mapping function can be provided to determine which values in the DS grid should be considered &quot;empty&quot; or &quot;occupied&quot;.</p>
  <p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span> To convert from MP grid to DS grid, see <span class="inline3_func"><a href="../../Movement_And_Collisions/Motion_Planning/mp_grid_to_ds_grid.htm">mp_grid_to_ds_grid</a></span>.</p>
  <div data-conref="../../../../assets/snippets/Note_Warning_DS_MP_Grid_Sizes_Must_Match.hts">
  <p class="note"><span data-conref="../../../../assets/snippets/Tag_warning.hts"><span class="warning">WARNING</span></span> The DS grid and MP grid <strong>must</strong> have the same width and height. If the grids&#39; dimensions don&#39;t match, the conversion will fail and an error &quot;Error, grid sizes do not match&quot; is thrown.</p>

</div>
  <h3>Usage Notes</h3>
  <ul class="Disc">
    <li>Cells set to 0 in the DS grid become empty cells in the MP grid, all other values will be occupied.</li>
    <li>By default, a DS grid created with <span class="inline3_func"><a href="ds_grid_create.htm">ds_grid_create</a></span> has all elements set to 0 so an MP grid created from it will be empty.</li>
    <li>The grid can contain any value that can be converted to real using the function <span class="inline3_func"><a href="../../Strings/real.htm">real</a></span>. If there are values that cannot be converted, e.g. a string that contains only letters, the function will fail and an error message is shown.</li>
  </ul>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down" href="#"><span data-open-text="true" data-skip-index="true">Mapping Function</span><span data-close-text="true">Mapping Function</span></a></h3>
  <div class="droptext" data-targetname="drop-down">
    <p>The optional mapping function that you pass to this function should take the following parameters: </p>
    <table class=" cke_show_border">
      <tbody>
        <tr>
          <th style="">Argument</th>
          <th>Type</th>
          <th style="">Description</th>
        </tr>
        <tr>
          <td style=""><b>value</b></td>
          <td><span data-keyref="Type_Real"><a target="_blank" href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></span></td>
          <td style="">The value in the current cell</td>
        </tr>
        <tr>
          <td style=""><b>x</b></td>
          <td><span data-keyref="Type_Real"><a target="_blank" href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></span></td>
          <td style="">The x index/position of the grid cell</td>
        </tr>
        <tr>
          <td style=""><span class="inline">y</span></td>
          <td><span data-keyref="Type_Real"><a target="_blank" href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></span></td>
          <td style="">The y index/position of the grid cell</td>
        </tr>
      </tbody>
    </table>
  </div>
  <ul class="Disc">
  </ul>
  <p> </p>
  <h4>Syntax:</h4>
  <p class="code"><span data-field="title" data-format="default">ds_grid_to_mp_grid</span>(ds_grid, mp_grid[, func]);</p>
  <table>
    <colgroup>
      <col/>
      <col/>
      <col/>
    </colgroup>
    <tbody>
      <tr>
        <th>Argument</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>ds_grid</td>
        <td><span data-keyref="Type_ID_DS_Grid"><a target="_blank" href="../../../../../GameMaker_Language/GML_Reference/Data_Structures/DS_Grids/ds_grid_create.htm">DS Grid</a></span></td>
        <td>The DS grid to convert</td>
      </tr>
      <tr>
        <td>mp_grid</td>
        <td><span data-keyref="Type_ID_MP_Grid"><a target="_blank" href="../../../../../GameMaker_Language/GML_Reference/Movement_And_Collisions/Motion_Planning/mp_grid_create.htm">MP Grid ID</a></span></td>
        <td>The MP grid to write the data to</td>
      </tr>
      <tr>
        <td>func</td>
        <td><span data-keyref="Type_Function"><a target="_blank" href="../../../../../GameMaker_Language/GML_Overview/Script_Functions.htm">Function</a></span></td>
        <td><span data-conref="../../../../assets/snippets/Tag_optional.hts"><span class="optional">OPTIONAL</span></span> The mapping function to use</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>Returns:</h4>
  <p class="code"><span data-keyref="Type_ID_MP_Grid"><a target="_blank" href="../../../../../GameMaker_Language/GML_Reference/Movement_And_Collisions/Motion_Planning/mp_grid_create.htm">MP Grid ID</a></span></p>
  <p> </p>
  <h4>Example 1: Basic Usage</h4>
  <p class="code">var _size = 10;<br/>
    grd_data = ds_grid_create(_size, _size);<br/>
    repeat(20)<br/>
    {<br/>
        ds_grid_set(grd_data, irandom(_size-1), irandom(_size-1), choose(0, false, true, &quot;7&quot;, 47));<br/>
    }<br/>
    <br/>
    mpg_data = mp_grid_create(0, 0, _size, _size, 16, 16);<br/>
    <span data-field="title" data-format="default">ds_grid_to_mp_grid</span>(grd_data, mpg_data);
  </p>
  <p>The above code first creates a DS grid of 10 cells by 10 cells (initialised in the <span class="inline2">_size</span> variable) using <span class="inline3_func"><a href="ds_grid_create.htm">ds_grid_create</a></span>. It then assigns one of 5 possible values, selected using the <span class="inline3_func"><a href="../../Maths_And_Numbers/Number_Functions/choose.htm">choose</a></span> function, to each of 20 randomly selected cells in the grid. After that, it creates an MP grid using <span class="inline3_func"><a href="../../Movement_And_Collisions/Motion_Planning/mp_grid_create.htm">mp_grid_create</a></span> and fills it using the contents of the DS grid by calling the <span class="inline3_func"><span data-field="title" data-format="default">ds_grid_to_mp_grid</span></span> function. DS grid cells containing <span class="inline2">0</span> or <span class="inline2">false</span> will be marked as &quot;empty&quot; in the MP grid, cells containing <span class="inline2">true</span>, <span class="inline2">&quot;7&quot;</span> or <span class="inline2">47</span> marked as &quot;occupied&quot;.</p>
  <p> </p>
  <h4>Example 2: Using a Mapping Function</h4>
  <p class="code">width = 128;<br/>
    height = 128;<br/>
    cellsize = 4;<br/>
    <br/>
    function occupied(value, x, y)<br/>
    {<br/>
        switch(value)<br/>
        {<br/>
            case &quot;Mountains&quot;:<br/>
            case &quot;Water&quot;:<br/>
            case &quot;Forest&quot;:<br/>
                return true;<br/>
            case &quot;Grass&quot;:<br/>
                return false;<br/>
            default:<br/>
                return false;<br/>
        }<br/>
    }<br/>
    <br/>
    grd_level = ds_grid_create(width, height);<br/>
    ds_grid_clear(grd_level, &quot;Grass&quot;);<br/>
    ds_grid_set_disk(grd_level, 60, 60, 20, &quot;Water&quot;);<br/>
    ds_grid_set_disk(grd_level, 100, 60, 20, &quot;Mountains&quot;);<br/>
    ds_grid_set_region(grd_level, 60, 100, 110, 110, &quot;Forest&quot;);<br/>
    <br/>
    mpg_level = mp_grid_create(0, 0, width, height, 4, 4);<br/>
    ds_grid_to_mp_grid(grd_level, mpg_level, occupied);
  </p>
  <p>The above code first shows an example of how to use a mapping function. First it defines <span class="inline2">width</span>, <span class="inline2">height</span> and <span class="inline2">cellsize</span> as instance variables, as well as a mapping function <span class="inline3_func">occupied</span> that returns <span class="inline2">true</span> if the value is one of <span class="inline2">&quot;Mountains&quot;</span>, <span class="inline2">&quot;Water&quot;</span> or <span class="inline2">&quot;Forest&quot;</span> or <span class="inline2">false</span> if it is either <span class="inline2">&quot;Grass&quot;</span> or any other value. It then creates a <a href="DS_Grids.htm">DS grid</a> <span class="inline2">grd_level</span> of the given width and height and fills it with a couple of terrain types. After that, an MP grid of the same width and height is created using <span class="inline3_func"><a href="../../Movement_And_Collisions/Motion_Planning/mp_grid_create.htm">mp_grid_create</a></span> and its ID stored in a variable <span class="inline2">mpg_level</span>. Finally the MP grid is initialized with the contents of the DS grid, using <span class="inline3_func"><span data-field="title" data-format="default">ds_grid_to_mp_grid</span></span>.</p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div>Back: <a href="DS_Grids.htm">DS Grids</a></div>
        <div>Next: <a href="ds_grid_create.htm">ds_grid_create</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2023 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
ds_grid_to_mp_grid
-->
  <!-- TAGS
ds_grid_to_mp_grid
-->

</body></html>