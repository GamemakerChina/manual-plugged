<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../../..",gTopicId="8.2.2.3.9.1.0_1"</script><script type="text/javascript" src="../../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>The&nbsp;Sequence Instance Struct</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../../assets/css/default.css" type="text/css"><script src="../../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining The&nbsp;Sequence Instance Struct"><meta name="rh-index-keywords" content="Sequence Instance Struct,seqdir_right,seqdir_left"><meta name="search-keywords" content="The&nbsp;Sequence Instance Struct,seqdir_right,seqdir_left,sequence,headPosition,headDirection,speedScale,paused,finished,elementID,activeTracks,matrix,posx,posy,scalex,scaley,xorigin,yorigin,width,height,imageindex,imagespeed,colourMultiply,gain,pitch,track,parent"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Sequences/Sequence_Structs/The_Track_Struct.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Sequences/Sequence_Structs/The_Sequence_Object_Struct.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="The&nbsp;Sequence Instance Struct"><span>The&nbsp;Sequence Instance Struct</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>The Sequence Instance Struct</h1><p>A sequence, when placed in a room, is placed as an&nbsp;<strong>element</strong>&nbsp;on the layer, and this element contains a&nbsp;<strong>sequence instance</strong>. This sequence instance will have the following properties in its <a href="../../../../GML_Overview/Structs.htm">struct</a>:</p><table><colgroup><col><col><col></colgroup><tbody><tr><th colspan="3"><span data-keyref="Type_Struct_Sequence_Instance"><a target="_blank" href="The_Sequence_Instance_Struct.htm">Sequence Instance Struct</a></span></th></tr><tr><th>Variable</th><th>Type</th><th>Description</th></tr><tr><td><span class="inline">sequence</span></td><td><span data-keyref="Type_Struct_Sequence_Object"><a target="_blank" href="The_Sequence_Object_Struct.htm">Sequence Object Struct</a></span></td><td>This is the ID of the <b>sequence object</b> struct that the sequence instance has been created from (see <a href="The_Sequence_Object_Struct.htm">here</a>for more details). You can get or set this struct, and so change the base sequence that the instance is referencing.</td></tr><tr><td><span class="inline">headPosition</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>This is the current <a class="tooltip" title="The current 'play' position within the timeline in the Sequences dope sheet or the Sprite editor frame view. In sequences (and sprites), this will move as the animation is previewed, and you can place it on specific frames to see and edit the keys and keyframes at that position.">playhead</a> position (in frames) for the sequence instance. You can get or set this value, but note that setting it to a value greater or less than the currently defined play region will have different effects depending on the type of playback set for the sequence. See <a href="../../Rooms/Sequence_Layers/layer_sequence_headpos.htm"><span class="inline">layer_sequence_headpos()</span></a>&nbsp;for more information.</td></tr><tr><td><span class="inline">headDirection</span></td><td><span data-keyref="Type_Constant_Sequence_Direction"><a target="_blank" href="The_Sequence_Instance_Struct.htm">Sequence Direction Constant</a></span></td><td>This is the current playback direction for the sequence instance. You can get or set this value using the constants given in the next table (Note that you can use the layer functions <a href="../../Rooms/Sequence_Layers/layer_sequence_get_headdir.htm"><span class="inline">layer_sequence_get_headdir()</span></a>&nbsp;and <a href="../../Rooms/Sequence_Layers/layer_sequence_headdir.htm"><span class="inline">layer_sequence_headdir()</span></a>&nbsp;to get or set this value without having to access the struct directly).</td></tr><tr><td><span class="inline">speedScale</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>This property can be used to get or set the playback speed scale. The speed scale is a <i>multiplier</i>, where 1 is the default playback speed and values less than 1 will slow the playback and values larger than 1 will speed it up, eg: a value of 0.5 would be half playback speed, while a value of 2 would be double playback speed. Note that you can use the layer functions <a href="../../Rooms/Sequence_Layers/layer_sequence_get_speedscale.htm"><span class="inline">layer_sequence_get_speedscale()</span></a>&nbsp;and <a href="../../Rooms/Sequence_Layers/layer_sequence_speedscale.htm"><span class="inline">layer_sequence_speedscale()</span></a>&nbsp;to get or set this value without having to access the struct directly.</td></tr><tr><td><span class="inline">paused</span></td><td><span data-keyref="Type_Bool"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Boolean</a></span></td><td>You can check this property to see if a sequence has been paused or not, and it will be <span class="inline">true</span> if it has, or <span class="inline">false</span> otherwise. This is a <b>read-only</b> property, but you can use the layer function <a href="../../Rooms/Sequence_Layers/layer_sequence_pause.htm"><span class="inline">layer_sequence_pause()</span></a>&nbsp;to pause playback, and <a href="../../Rooms/Sequence_Layers/layer_sequence_play.htm"><span class="inline">layer_sequence_play()</span></a>&nbsp;to resume it again if required. You can also check this property using the layer function <a href="../../Rooms/Sequence_Layers/layer_sequence_is_paused.htm"><span class="inline">layer_sequence_is_paused()</span></a>&nbsp;rather than check the property in the struct directly.</td></tr><tr><td><span class="inline">finished</span></td><td><span data-keyref="Type_Bool"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Boolean</a></span></td><td>You can check this property to see if a sequence has finished playing or not, returning <span class="inline">true</span> if it is finished playing, and <span class="inline">false</span> otherwise. This is a <b>read-only</b> property, and will only ever return <span class="inline">true</span> for tracks that are not set to loop or ping-pong. You can also check this property using the layer function <a href="../../Rooms/Sequence_Layers/layer_sequence_is_finished.htm"><span class="inline">layer_sequence_is_finished()</span></a>&nbsp;rather than check the property in the struct directly.</td></tr><tr><td><span class="inline">elementID</span></td><td><span data-keyref="Type_ID_Element_Sequence"><a target="_blank" href="../../Rooms/Sequence_Layers/layer_sequence_create.htm">Sequence Element ID</a></span></td><td>This property holds the ID of the sequence <i>element</i>. This ID is a simple identifying value that is associated with a layer in the room editor, and it can then be used with the appropriate <a href="../../Rooms/General_Layer_Functions/General_Layer_Functions.htm">layer functions</a>&nbsp;to find the layer the sequence has been assigned to or to change certain sequence properties without having to deal with the struct.</td></tr><tr><td><span class="inline">activeTracks</span></td><td><span data-keyref="Type_Array"><a target="_blank" href="../../../../GML_Overview/Arrays.htm">Array</a></span>&nbsp;of <span data-keyref="Type_Struct_Sequence_Active_Track"><a target="_blank" href="#activeTracks">Sequence Active Track Struct</a></span>s</td><td>This property will hold an array of "evaluation" structs containing information on the current state of each <b>asset track</b> in the sequence (graphics, sequence, audio etc...). These are the top-level tracks, and the array returned is <b>read-only</b>. For the contents of the asset track struct returned in each array entry, please see the section below.</td></tr></tbody></table><p>&nbsp;</p><table><colgroup><col><col><col></colgroup><tbody><tr><th colspan="3"><span data-keyref="Type_Constant_Sequence_Direction"><a target="_blank" href="The_Sequence_Instance_Struct.htm">Sequence Direction Constant</a></span></th></tr><tr><th>Constant</th><th>Description</th><th>Value</th></tr><tr><td><span class="inline">seqdir_right</span></td><td>The sequence will play frames in an incremental order from left to right</td><td>1</td></tr><tr><td><span class="inline">seqdir_left</span></td><td>The sequence will play frames in a decremental order from right to left</td><td>-1</td></tr></tbody></table><p>&nbsp;</p><h2 id="activeTracks">activeTracks Struct</h2><p class="note"><span data-conref="../../../../../assets/snippets/Tag_important.hts"><span class="important">IMPORTANT</span></span>&nbsp;Although this property already exists in the sequence instance struct in the Sequence Create event, it is only filled with tracks after the first Sequence Begin Step event. So the first time you will find values in this struct is during the first iteration of the Sequence Step Event.</p><p>The following list contains the properties that may be available to you when accessing an active track struct (as included in the <span class="inline">activeTracks</span> array of a Sequence Instance struct, explained above). Each asset track struct can have any of the following properties, depending on the type of asset the track uses (note that you can modify all these properties, except where specified as <strong>read-only</strong>), and all values returned are for the current playhead position:</p><table><colgroup><col><col><col></colgroup><tbody><tr><th colspan="3"><span data-keyref="Type_Struct_Sequence_Active_Track"><a target="_blank" href="#activeTracks">Sequence Active Track Struct</a></span></th></tr><tr><th>Variable</th><th>Type</th><th>Description</th></tr><tr><td><span class="inline">matrix</span></td><td><span data-keyref="Type_Array_Matrix"><a target="_blank" href="../../../Maths_And_Numbers/Matrix_Functions/Matrix_Functions.htm">Matrix Array</a></span></td><td>This is the transformation matrix used to draw the track (sprite, instance and sequence tracks).</td></tr><tr><td><span class="inline">posx</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The position of the asset in the sequence along the X axis for the track at the current playhead position (all assets).</td></tr><tr><td><span class="inline">posy</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The position of the asset in the sequence along the Y axis for the track at the current playhead position (all assets).</td></tr><tr><td><span class="inline">scalex</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The scale of the asset in the sequence along the X axis for the track at the current playhead position (sprite, instance and sequence tracks).</td></tr><tr><td><span class="inline">scaley</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The scale of the asset in the sequence along the Y axis for the track at the current playhead position (sprite, instance and sequence tracks).</td></tr><tr><td><span class="inline">xorigin</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The X origin of the asset for the track (all assets).</td></tr><tr><td><span class="inline">yorigin</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The Y origin of the asset for the track (all assets).</td></tr><tr><td><span class="inline">width</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The width (in pixels) of the asset for the track (sprite, instance and sequence tracks).</td></tr><tr><td><span class="inline">height</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The height (in pixels) of the asset for the track (sprite, instance and sequence tracks).</td></tr><tr><td><span class="inline">imageindex</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The image index for the asset on the track in the sequence at the current playhead position (sprite and instance tracks).</td></tr><tr><td><span class="inline">imagespeed</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The image speed for the asset on the track in the sequence at the current playhead position (sprite and instance tracks).</td></tr><tr><td><span class="inline">colourMultiply</span></td><td><span data-keyref="Type_Constant_Colour"><a target="_blank" href="../../../Drawing/Colour_And_Alpha/Colour_And_Alpha.htm">Colour</a></span></td><td>The colour multiply value for the asset on the track in the sequence at the current playhead position (sprite, instance and sequence tracks). This value will be an <a href="../../../../GML_Overview/Arrays.htm">array</a> of four <a class="tooltip" title="This is an anacronym for Alpha, Red, Green, Blue, and is used to refer to the colour components specified as a hexadecimal value, eg: #FF53E270, where each set of two digits represents a single component. Breaking down the ARGB example above gives us the following component values: Alpha(FF), Red(53), Green(E2) and Blue(70). ">ARGB</a> values with the format [A, R, G, B]. Note that the values for each component are expressed as between 0 and 1, where 0 corresponds to the HEX value #00 and 1 corresponds to the HEX value #FF (0 - 255 as shown in the colour picker for colour multiply tracks in the Sequences Editor).</td></tr><tr><td><span class="inline">soundIndex</span></td><td><span data-keyref="Type_ID_Sound_Instance"><a target="_blank" href="../../Audio/audio_play_sound.htm">Sound Instance ID</a></span></td><td>The ID of the sound instance that's playing on this track's emitter (audio tracks).</td></tr><tr><td><span class="inline">emitterIndex</span></td><td><span data-keyref="Type_ID_Audio_Emitter"><a target="_blank" href="../../Audio/Audio_Emitters/audio_emitter_create.htm">Audio Emitter ID</a></span></td><td>The index of the audio emitter belonging to this track (audio tracks).</td></tr><tr><td><span class="inline">gain</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The gain (volume) of the track at the current playhead position (audio tracks).</td></tr><tr><td><span class="inline">pitch</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The pitch of the track at the current playhead position (audio tracks).</td></tr><tr><td><span class="inline">particleSystemIndex</span></td><td><span data-keyref="Type_ID_PartSys"><a target="_blank" href="../../../Drawing/Particles/Particle_Systems/part_system_create.htm">Particle System Instance</a></span></td><td>The ID of the particle system of this track (particle system tracks).</td></tr><tr><td><span class="inline">frameSizeX</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The horizontal size of the text frame (text tracks).</td></tr><tr><td><span class="inline">frameSizeY</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The vertical size of the text frame (text tracks).</td></tr><tr><td><span class="inline">characterSpacing</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The character spacing value (text tracks).</td></tr><tr><td><span class="inline">lineSpacing</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The line spacing value (text tracks).</td></tr><tr><td><span class="inline">paragraphSpacing</span></td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The paragraph spacing value (text tracks).</td></tr><tr><td><span class="inline">track</span></td><td><span data-keyref="Type_Struct_Sequence_Track"><a target="_blank" href="The_Track_Struct.htm">Sequence Track Struct</a></span></td><td>The <a href="The_Track_Struct.htm">Track Struct</a> that this track is based on (all assets, a <b>read-only</b> value).</td></tr><tr><td><span class="inline">parent</span></td><td><span data-keyref="Type_Struct_Sequence_Instance"><a target="_blank" href="The_Sequence_Instance_Struct.htm">Sequence Instance Struct</a></span></td><td>The parent sequence instance ID for the track (all assets, a <b>read-only</b> value).</td></tr><tr><td><span class="inline">activeTracks</span></td><td><span data-keyref="Type_Array"><a target="_blank" href="../../../../GML_Overview/Arrays.htm">Array</a></span>&nbsp;of&nbsp;<span data-keyref="Type_Struct_Sequence_Track"><a target="_blank" href="The_Track_Struct.htm">Sequence Track Struct</a></span>s</td><td>This is an array of evaluation structs for each parameter track that the asset track contains (all assets, a <b>read-only</b> value). The contents of each struct in the array are listed in the parameter <a href="The_Track_Struct.htm">Track Struct</a> section.</td></tr></tbody></table><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="../Sequences.htm">Sequences</a></div><div style="float:right">Next: <a href="The_Track_Struct.htm">The&nbsp;Track Struct</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>