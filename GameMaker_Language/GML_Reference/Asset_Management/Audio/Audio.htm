<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption,blockquote").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption,.expandtext").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../..",gTopicId="8.2.2.3.5"</script><script type="text/javascript" src="../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Audio</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css"><script src="../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining the different functions and variables associated with Audio"><meta name="rh-index-keywords" content=""><meta name="search-keywords" content="Audio"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Audio/Audio_Properties.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Tilsets/tileset_get_info.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Audio"><span>Audio</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">Audio</span></h1><p><span data-keyref="GameMaker Name">GameMaker</span> has a complete audio engine that is based on the <span class="inline">*.ogg</span>, <span class="inline">*.mp3</span> and <span class="inline">*.wav</span> sound formats.</p><p>Sounds of these types <a href="../../../../The_Asset_Editors/Sounds.htm">added to the IDE</a> can be used in your game using the audio functions shown below.</p><p>For things more complex than basic sound effects, or playing a single piece of music, you can refer to the advanced audio functions which let you modify how a sound is played. There is also a selection of more specialised functions dedicated to streaming audio, positioning audio (to give 3D sound), grouping audio,&nbsp;synchronised audio and audio effects.</p><div data-conref="../../../../assets/snippets/Note_HTML5_Web_Audio.hts"><p class="note"><b><span data-conref="../../../../assets/snippets/Tag_important.hts"><span class="important">IMPORTANT</span></span></b> When using audio on the HTML5 target, you should be aware that not all browsers support Web Audio and so may not play any sound for your project when run. You can get a general idea of Web Audio support from the following link: <a href="https://caniuse.com/audio-api" target="_blank">Can I Use Web Audio?</a>.</p></div><div class="minitoc" data-minitoc-targetid="drop-down1" style=""><p class="minitoc-caption" href="#" style="">Contents</p><ol class="minitoc-list" style=""><li><a href="#using_audio" class="minitoc-list-item">Using Audio</a></li><li><a href="#advanced_audio" class="minitoc-list-item">Advanced Audio</a></li><li><a href="#web_audio" class="minitoc-list-item">Web Audio</a></li><li><a href="#function_refere" class="minitoc-list-item">Function Reference</a></li></ol></div><h2 id="using_audio">Using Audio</h2><h3>Playing Sounds</h3><p>The most straightforward way to play a sound is using&nbsp;<span class="inline2"><a href="audio_play_sound.htm">audio_play_sound</a></span>:&nbsp;</p><p class="code">audio_play_sound(snd_Explode, 10, false);</p><p>At a minimum you have to provide the <span data-keyref="Type_Asset_Sound"><a target="_blank" href="../../../../The_Asset_Editors/Sounds.htm">Sound Asset</a></span>, a priority for the new sound instance and whether the sound should loop.</p><p>Another way to play sounds is using&nbsp;<span class="inline2"><a href="audio_play_sound_ext.htm">audio_play_sound_ext</a></span>. This function is identical to <span class="inline2"><a href="audio_play_sound.htm">audio_play_sound</a></span>&nbsp;but allows you to pass various audio parameters in a struct. Using this function, you only need to provide a&nbsp;<span data-keyref="Type_Asset_Sound"><a target="_blank" href="../../../../The_Asset_Editors/Sounds.htm">Sound Asset</a></span>&nbsp;through the "sound" key of the struct:&nbsp;</p><p class="code">audio_play_sound_ext({ sound: snd_Explode&nbsp;});</p><p><span>Here the priority will default to 0 and the sound will not be looped. You can supply <a href="audio_play_sound_ext.htm">additional keys</a> in the struct to change the properties of the sound.</span></p><div data-conref="../../../../assets/snippets/Note_Triggers_Audio_Playback_Event.hts"><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;An <a href="../../../../The_Asset_Editors/Object_Properties/Async_Events/Audio_Playback_Ended.htm">Audio Playback Ended</a>&nbsp;event is triggered for the sound when it stops playing.</p></div><h3>Sound Instances (Voices)</h3><p>The functions&nbsp;<span class="inline2"><a href="audio_play_sound.htm">audio_play_sound</a></span>&nbsp;and&nbsp;<span class="inline2"><a href="audio_play_sound_ext.htm">audio_play_sound_ext</a></span>&nbsp;create a new&nbsp;<em>instance</em> of a sound (also called a "voice") and return its ID:&nbsp;</p><p class="code">ins_sound = audio_play_sound(snd_Explode, 10, false);</p><p>You can use this sound&nbsp;<strong>instance</strong> ID in functions to change the audio properties at the <strong>instance</strong> level (or pass them directly as optional arguments). This will only change the properties for that particular sound instance.</p><p>In case you pass a sound <strong>asset</strong> ID to the functions, the audio property at the <strong>asset</strong> level will be set to the given value.</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;<span class="inline2"><a href="audio_play_sound_at.htm">audio_play_sound_at</a></span>&nbsp;and&nbsp;<span class="inline2"><a href="Audio_Emitters/audio_play_sound_on.htm">audio_play_sound_on</a></span>&nbsp;work in the same way and also return the ID of the sound instance they create.</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_tip.hts"><span class="tip">TIP</span></span>&nbsp;The maximum number of sound instances/voices is&nbsp;<span data-keyref="Max_Audio_Channels_Default">128</span> by default. This can be changed using the function&nbsp;<span class="inline2"><a href="audio_channel_num.htm">audio_channel_num</a></span>.</p><h3 id="h">Audio Properties</h3><p>Every sound has basic properties that are applied on different "levels". Depending on the property, it either acts as a multiplier, or overrides the value set at a previous level.</p><p>These audio properties are:&nbsp;</p><ul class="Disc"><li><a href="audio_sound_gain.htm"><strong>Gain</strong></a>: This is a multiplier for the volume. The default value for gain on the asset level is the value of the "Volume" slider in <a href="../../../../The_Asset_Editors/Sounds.htm">The Sound Editor</a>.&nbsp;The default value on all other levels is 1. Gain can also be added using&nbsp;<a href="Audio_Effects/Audio_Effects.htm">Audio Effects</a>.</li><li><a href="audio_sound_pitch.htm"><strong>Pitch</strong></a>: This is a multiplier for the sound's pitch. The default value for pitch on all levels is set to 1.</li><li><a href="audio_sound_set_track_position.htm"><strong>Offset/Track Position</strong></a>: This is the offset from the start of the audio track where it starts playing. If this value is set at the instance level, it overrides the value set at the asset level. By default this is 0 (i.e. no offset).</li><li><a href="audio_sound_set_listener_mask.htm"><strong>Listener Mask</strong></a>: This is a bitmask value that determines the listeners that audio is heard on. The default value is 1 (or <span class="inline2">0x01</span>), which stands for the default listener.</li></ul><p>For an overview of all audio properties, levels and how their values are calculated, see <a href="Audio_Properties.htm">Audio Properties Overview</a>.</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;The optional parameters that you can pass to the <span class="inline2">audio_play_sound_*</span> functions set the instance-level value of the property.</p><h3>Audio Looping</h3><p>A sound can be looped by setting it to loop. This can either be done when playing the sound using any of the <span class="inline2">audio_play_sound_*</span> functions:&nbsp;</p><p class="code">ins_sound = audio_play_sound(snd_Engine, 100, true);</p><p>or afterwards, when the sound is already playing, using the function&nbsp;<span class="inline3_func"><a href="Audio_Loop_Points/audio_sound_loop.htm">audio_sound_loop</a></span>:&nbsp;</p><p class="code">audio_sound_loop(ins_sound, true);</p><p>By default a sound loops from its start to its end. The start and end position can be changed using&nbsp;<span class="inline3_func"><a href="Audio_Loop_Points/audio_sound_loop_start.htm">audio_sound_loop_start</a></span>&nbsp;and&nbsp;<span class="inline3_func"><a href="Audio_Loop_Points/audio_sound_loop_end.htm">audio_sound_loop_end</a></span>&nbsp;respectively, also while the sound is playing (i.e. <span class="inline2">ins_sound</span> refers to a sound instance for which <span class="inline3_func"><a href="audio_is_playing.htm">audio_is_playing</a></span>&nbsp;returns <span class="inline2">true</span>).</p><p>When the track position reaches the loop end position if a sound is set to loop, it continues playing from the start position.</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_important.hts"><span class="important">IMPORTANT</span></span>&nbsp;The loop end position <em>must</em>&nbsp;be past the loop start position. The exception to this is the value 0.0 for loop end, which marks the end of the sound (i.e.&nbsp;<span class="inline3_func"><a href="audio_sound_length.htm">audio_sound_length</a></span>).</p><p>See:&nbsp;<a href="Audio_Loop_Points/Audio_Loop_Points.htm">Audio Loop Points</a></p><h3>Audio Effects</h3><p>Finally you can add effects to the audio that you play, such as reverb, echo, delay, etc.</p><p>Audio effects are created using&nbsp;<span class="inline2"><a href="Audio_Effects/audio_effect_create.htm">audio_effect_create</a></span> and then assigned to one of the effects slots of an audio bus. The audio bus that you can always assign effects to is the main audio bus&nbsp;<span class="inline2"><a href="Audio_Effects/audio_bus_main.htm">audio_bus_main</a></span>.</p><p>See:&nbsp;<a href="Audio_Effects/Audio_Effects.htm">Audio Effects</a></p><h2 id="advanced_audio">Advanced Audio</h2><h3>Audio Emitters and Listeners</h3><p>If you need positional audio or audio that should play in a three-dimensional environment, you can use&nbsp;<a href="Audio_Emitters/Audio_Emitters.htm">Audio Emitters</a>&nbsp;and&nbsp;<a href="Audio_Listeners/Audio_Listeners.htm">Audio Listeners</a>.</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;<a href="Audio_Emitters/Audio_Emitters.htm">Audio Emitters</a>&nbsp;introduce another level for the gain, pitch and listener mask parameters.</p><h3>Audio Groups</h3><p>All sound assets, except for streamed audio, belong to a single <a href="../../../../Settings/Audio_Groups.htm">audio group</a>. Sounds in an audio group can be loaded and unloaded at the same time.</p><p>Audio groups have their own gain factor (see&nbsp;<span class="inline2"><a href="Audio_Groups/audio_group_set_gain.htm">audio_group_set_gain</a></span>&nbsp;/&nbsp;<span class="inline2"><a href="Audio_Groups/audio_group_get_gain.htm">audio_group_get_gain</a></span>)</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;All sounds are by default added to an audio group&nbsp;<span class="inline2"><a href="Audio_Groups/audiogroup_default.htm">audiogroup_default</a></span>.</p><h3>Audio Streams</h3><p><span data-keyref="GameMaker Name">GameMaker</span>&nbsp;supports loading streamed audio directly from .ogg files. For this you can use&nbsp;<span class="inline2"><a href="audio_create_stream.htm">audio_create_stream</a></span>&nbsp;and&nbsp;<span class="inline2"><a href="audio_destroy_stream.htm">audio_destroy_stream</a></span>.</p><h3>Sync Groups</h3><p>For audio that should play perfectly in sync&nbsp;on a per sample level,&nbsp;<span data-keyref="GameMaker Name">GameMaker</span>&nbsp;has sync groups. See&nbsp;<a href="Audio_Synchronisation/Audio_Synchronisation.htm">Audio Synchronisation</a>&nbsp;for more information on this.</p><h2 id="web_audio">Web Audio</h2><p>When creating games for the HTML5 target platform, the audio engine requires <b>Web Audio</b> support, and this in turn means that sometimes your audio won't play when or how you expect it. This is because the Web Audio context may not be running or may stop running when your game is being played. What causes this varies greatly between browsers, and even between different versions of the same browser, and so detecting when the web audio context status changes is very important, e.g.: to detect when the context changes and pause/start looping audio like background music.</p><p>To help with this issue, <span data-keyref="GameMaker Name">GameMaker</span> has two separate ways to detect the change in Web Audio context status, either using the following function:</p><ul class="colour"><li><a href="audio_system_is_available.htm">audio_system_is_available</a></li></ul><p>or using the <b>Asynchronous System Event</b>, which will be triggered whenever the Web Audio status changes. In this event you will get the built-in&nbsp;<span class="inline2"><a href="../../../GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a></span>&nbsp;DS map populated with the key "<span class="inline">event_type</span>" which in turn will hold the string "<span class="inline">audio_system_status</span>" if it is an audio event. When this key exists, there will also be a further "<span class="inline">status</span>" key which will be either "<span class="inline">available</span>" or "<span class="inline">unavailable</span>".</p><p>For more information please see the section:&nbsp;</p><ul class="colour"><li><a href="../../../../The_Asset_Editors/Object_Properties/Async_Events/System.htm">The Asynchronous System Event</a></li></ul><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;This event will be triggered on <i>all</i> platforms, but on everything except HTML5 it will only be triggered once on Game Start when the audio engine is first initialised.</p><p>To check if audio can be played using Web Audio, you can use&nbsp;<span class="inline2"><a href="audio_sound_is_playable.htm">audio_sound_is_playable</a></span>.</p><h2 id="function_refere">Function Reference</h2><h3>Asset Info</h3><ul class="colour"><li><a href="audio_exists.htm">audio_exists</a></li><li><a href="audio_get_name.htm">audio_get_name</a></li><li><a href="audio_get_type.htm">audio_get_type</a></li><li><a href="audio_sound_length.htm">audio_sound_length</a></li><li><a href="audio_sound_is_playable.htm">audio_sound_is_playable</a></li></ul><h3>Playing Sounds</h3><ul class="colour"><li><a href="audio_play_sound.htm">audio_play_sound</a></li><li><a href="audio_play_sound_ext.htm">audio_play_sound_ext</a></li><li><a href="audio_play_sound_at.htm">audio_play_sound_at</a></li><li><a href="audio_pause_sound.htm">audio_pause_sound</a></li><li><a href="audio_pause_all.htm">audio_pause_all</a></li><li><a href="audio_resume_sound.htm">audio_resume_sound</a></li><li><a href="audio_resume_all.htm">audio_resume_all</a></li><li><a href="audio_stop_sound.htm">audio_stop_sound</a></li><li><a href="audio_stop_all.htm">audio_stop_all</a></li><li><a href="audio_is_playing.htm">audio_is_playing</a></li><li><a href="audio_is_paused.htm">audio_is_paused</a></li></ul><h3>Audio Properties</h3><ul class="colour"><li><a href="audio_sound_gain.htm">audio_sound_gain</a></li><li><a href="audio_sound_get_gain.htm">audio_sound_get_gain</a></li><li><a href="audio_sound_pitch.htm">audio_sound_pitch</a></li><li><a href="audio_sound_get_pitch.htm">audio_sound_get_pitch</a></li><li><a href="audio_sound_set_track_position.htm">audio_sound_set_track_position</a></li><li><a href="audio_sound_get_track_position.htm">audio_sound_get_track_position</a></li><li><a href="audio_sound_set_listener_mask.htm">audio_sound_set_listener_mask</a></li><li><a href="audio_sound_get_listener_mask.htm">audio_sound_get_listener_mask</a></li></ul><h3><a href="Audio_Loop_Points/Audio_Loop_Points.htm">Audio Loop Points</a></h3><ul class="colour"><li><a href="Audio_Loop_Points/audio_sound_loop.htm">audio_sound_loop</a></li><li><a href="Audio_Loop_Points/audio_sound_get_loop.htm">audio_sound_get_loop</a></li><li><a href="Audio_Loop_Points/audio_sound_loop_start.htm">audio_sound_loop_start</a></li><li><a href="Audio_Loop_Points/audio_sound_get_loop_start.htm">audio_sound_get_loop_start</a></li><li><a href="Audio_Loop_Points/audio_sound_loop_end.htm">audio_sound_loop_end</a></li><li><a href="Audio_Loop_Points/audio_sound_get_loop_end.htm">audio_sound_get_loop_end</a></li></ul><h3>Configuration</h3><ul class="colour"><li><a href="audio_master_gain.htm">audio_master_gain</a></li><li><a href="audio_set_master_gain.htm">audio_set_master_gain</a></li><li><a href="audio_get_master_gain.htm">audio_get_master_gain</a></li><li><a href="audio_channel_num.htm">audio_channel_num</a></li><li><a href="audio_falloff_set_model.htm">audio_falloff_set_model</a></li><li><a href="audio_system_is_available.htm">audio_system_is_available</a></li><li><a href="audio_system_is_initialised.htm">audio_system_is_initialised</a></li></ul><h3>Debugging</h3><ul class="colour"><li><a href="audio_debug.htm">audio_debug</a></li></ul><h3>Gain Conversion</h3><ul class="colour"><li><a href="lin_to_db.htm">lin_to_db</a></li><li><a href="db_to_lin.htm">db_to_lin</a></li></ul><h3>Audio Streams</h3><ul class="colour"><li><a href="audio_create_stream.htm">audio_create_stream</a></li><li><a href="audio_destroy_stream.htm">audio_destroy_stream</a></li></ul><h3>Advanced Audio</h3><ul class="colour"><li><a href="Audio_Emitters/Audio_Emitters.htm">Audio Emitters</a></li><li><a href="Audio_Listeners/Audio_Listeners.htm">Audio Listeners</a></li><li><a href="Audio_Effects/Audio_Effects.htm">Audio Effects</a></li><li><a href="Audio_Groups/Audio_Groups.htm">Audio Groups</a></li><li><a href="Audio_Buffers/Audio_Buffers.htm">Audio Buffers</a></li><li><a href="Audio_Synchronisation/Audio_Synchronisation.htm">Audio Synchronisation</a></li></ul><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back:&nbsp;<a href="../Asset_Management.htm">Asset Management</a></div><div style="float:right">Next:&nbsp;<a href="../Paths/Paths.htm">Paths</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>