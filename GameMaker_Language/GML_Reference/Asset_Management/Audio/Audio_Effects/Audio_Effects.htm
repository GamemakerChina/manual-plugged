<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../../..",gTopicId="8.2.2.3.5.3"</script><script type="text/javascript" src="../../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><link rel="stylesheet" type="text/css" href="../../../../../assets/css/default.css"><script src="../../../../../../assets/scripts/main_script.js"></script><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="Adobe RoboHelp 2022"><title>Audio Effects</title><meta name="topic-status" content="Draft"><link rel="stylesheet" type="text/css" href="../../../../../assets/css/default.css"><script src="../../../../../assets/scripts/main_script.js" type="module"></script><meta name="template" content="../../../../../assets/masterpages/Manual_Page.htt"><meta name="search-keywords" content="audio,effects"><meta name="rh-index-keywords" content="audio,effects"><meta name="rh-authors" content="Bart Teunis"><meta name="topic-comment" content="The overview page for audio effects"><meta name="condition-tags" content=""><meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Audio/Audio_Effects/audio_effect_create.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Audio/Audio_Listeners/audio_set_listener_mask.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Audio Effects"><span>Audio Effects</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><div></div><div><h1><span data-field="title" data-format="default">Audio Effects</span></h1><p><span data-keyref="GameMaker Name">GameMaker</span>&nbsp;offers a selection of audio effects, such as reverb, delay, bitcrusher, parametric EQ, etc.</p><p>Sounds are always played through "buses". All sounds in <span data-keyref="GameMaker Name">GameMaker</span> are played through its <a href="audio_bus_main.htm">main bus</a>.</p><p>Effects are applied on buses. <span data-keyref="GameMaker Name">GameMaker</span>&nbsp;allows you to:</p><ul class="colour"><li>Apply effects to the <a href="audio_bus_main.htm">main bus</a>, hence applying effects to&nbsp;<em>all sounds</em></li><li>Create a <a href="audio_bus_create.htm">custom bus</a> and apply effects to that bus<ul><li>Custom buses can only be used with&nbsp;<a href="../Audio_Emitters/Audio_Emitters.htm">Audio Emitters</a></li></ul></li></ul><h2>Setting Up Audio Effects</h2><h3>Audio Buses</h3><p>Audio effects are processed on an "audio bus".</p><p><span data-keyref="GameMaker Name">GameMaker</span>&nbsp;has one audio bus by default, the main audio bus, which you can access through the built-in&nbsp;<span class="inline2"><a href="audio_bus_main.htm">audio_bus_main</a></span>&nbsp;struct.</p><p>All audio that you play in&nbsp;<span data-keyref="GameMaker Name">GameMaker</span>&nbsp;ends up on this audio bus, whether that is <a href="../audio_play_sound.htm">2D audio</a>, <a href="../audio_play_sound_at.htm">3D audio</a>&nbsp;or <a href="../Audio_Emitters/audio_play_sound_on.htm">emitter audio</a>. This is referred to as all audio being&nbsp;<em>routed</em> to the main bus.</p><p>You can <a href="audio_bus_create.htm">create your own bus</a> to apply effects to a few sounds. All custom buses are routed to the main bus, so the parameters and effects on the main bus are applied to all other buses.</p><p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;An audio bus can have a maximum of&nbsp;<span data-keyref="Const_Audio_Bus_Max_Effects">8</span> effects assigned to its <span class="inline2">effects</span> array. Set a slot to <span class="inline2">undefined</span>&nbsp;to remove an effect.</p><h3>Adding effects to the main bus</h3><p>The quickest way to apply effects to all audio is by adding them to the main bus:&nbsp;</p><p class="code">var _ef_reverb = audio_effect_create(AudioEffectType.Reverb1);<br>_ef_reverb.size = 0.6;<br>_ef_reverb.mix = 0.5;<br>audio_bus_main.effects[0] = _ef_reverb;</p><p>This first creates a new audio effect of type <span class="inline2"><a href="AudioEffectType.htm#h">AudioEffectType.Reverb1</a></span>. Its parameters are then set by directly setting the members of the returned&nbsp;<a href="AudioEffect.htm">AudioEffect Struct</a>.</p><p>The size of the reverb effect is set to 0.6 and the mix value to 0.5 (how much of the effect can be heard from 0-1, similar to&nbsp;<span class="inline3_func"><a href="../../../Maths_And_Numbers/Number_Functions/lerp.htm">lerp</a></span>).</p><p>The effect is then assigned to the main audio bus's <span class="inline2">effects</span> array. Assigning the effect to a slot in the array enables the effect.</p><p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;Because the effect is processed from the moment it's assigned, it's good practice to first set the effect's parameters and only then assign the effect to the effects array. This will make sure that no transition from no effect to an audible effect occurs.</p><h3>Bypassing Effects</h3><p>Sometimes you might want to turn off individual effects or turn off all effects on a bus. You can do this by setting <span class="inline2">bypass</span> for an effect or a bus to <span class="inline2">true</span>:&nbsp;</p><p class="code">// Bypassing an effect<br>audio_bus_main.effects[0].bypass = true;</p><p class="code">// Bypassing all effects on a bus<br>audio_bus_main.bypass = true;</p><p>Setting <span class="inline2">bypass</span> to <span class="inline2">true</span> means that what comes out of the bus or effect is the same as what goes in -- the input is the output.</p><p>For a single effect this means that this effect is skipped, for a bus this means that all effects on the bus are skipped.</p><h3>Applying Effects To Audio Emitters</h3><p>By default audio emitters output directly to the main bus, so the audio that is played on an emitter will end up there and have the same effects applied as all other audio.</p><p>You can add effects to an&nbsp;<a href="../Audio_Emitters/Audio_Emitters.htm">audio emitter</a>&nbsp;by creating a new audio bus using&nbsp;<span class="inline3_func"><a href="audio_bus_create.htm">audio_bus_create</a></span>&nbsp;and assigning it to the emitter using <span class="inline3_func"><a href="../Audio_Emitters/audio_emitter_bus.htm">audio_emitter_bus</a></span>:&nbsp;</p><p class="code">emitter = audio_emitter_create(); // Emitter is created<br>emitter_bus = audio_bus_create(); // Bus is created<br>audio_emitter_bus(emitter, emitter_bus); // Emitter is assigned to bus</p><p>Assigning an emitter to a bus will make the emitter output to that bus. You can assign any number of emitters to a bus.</p><p>Any audio output on a bus created using <span class="inline3_func"><a href="audio_bus_create.htm">audio_bus_create</a></span> still ends up on <span data-keyref="GameMaker Name">GameMaker</span>'s&nbsp;main audio bus.</p><p>This means that you can apply a delay effect to all sounds that are played on an emitter, and a reverb effect on the main audio bus. Audio that is played on the emitter is processed by the audio bus assigned to it so it will be heard with the delay effect from the emitter bus&nbsp;<i>and&nbsp;</i>the reverb effect from the main bus. Audio that is played directly on the main bus will <i>only</i> have the reverb effect applied.</p><p>To get the audio bus that is assigned to an emitter, use <span class="inline3_func"><a href="../Audio_Emitters/audio_emitter_get_bus.htm">audio_emitter_get_bus</a></span>.</p><p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;As previously mentioned, audio can only be processed on a different bus than the main bus by playing it on an emitter (using&nbsp;<span class="inline3_func"><a href="../Audio_Emitters/audio_play_sound_on.htm">audio_play_sound_on</a></span>).</p><h3>Multiple Assignment of Audio Effects</h3><p>A single audio effect struct returned by&nbsp;<span class="inline3_func"><a href="audio_effect_create.htm">audio_effect_create</a></span> can be assigned to multiple effect slots (either on the same bus or on different buses):&nbsp;</p><p class="code">ef_lpf&nbsp;= audio_effect_create(AudioEffectType.LPF2, {cutoff: 300, q: 1.5});<br><br>bus_1.effects[0] = ef_lpf;<br>bus_1.effects[4] = ef_lpf;<br>bus_2.effects[0] = ef_lpf;</p><p>For each of these assignments a new effect is <em>instantiated.&nbsp;</em>You could compare this to&nbsp;<a href="../../../../../Quick_Start_Guide/Objects_And_Instances.htm">Objects And Instances</a>; the struct returned by&nbsp;<span class="inline3_func"><a href="audio_effect_create.htm">audio_effect_create</a></span>&nbsp;returns an "object" and every assignment creates a new "instance" of it. The "instance" is that what actually processes the audio for the effect slot it is assigned to. Each effect slot gets its own "instance" of the effect.</p><p>When you make changes to any of the variables of the&nbsp;<span class="inline2">ef_lpf</span>&nbsp;struct here, the effect's parameters will change accordingly on&nbsp;<span class="inline2">bus_1.effects[0]</span>, <span class="inline2">bus_1.effects[4]</span> and <span class="inline2">bus_2.effects[0]</span>.</p><h2>Platform Limitations</h2><p>When targeting <strong>HTML5</strong>, audio buses and effects functionality will be limited in the following situations:&nbsp;</p><ul class="Disc"><li>The game is <strong>running on iOS Safari</strong> (due to a significant bug in WebKit).</li><li>The game is <strong>running in an insecure context</strong> (in which audio worklets are not available). An example of this would be using your phone to access a locally-hosted game on the same network.</li></ul><p>In these situations audio buses and effects functions, enums and structs can still be used without generating GML errors, but they will mostly have <strong>no audible effect</strong> (the exception to this being audio bus gain and bus routing).</p><h2>Code Reference</h2><div class="seealso" style=""><p class="seealso-caption" style=""></p><ol class="seealso-list" data-keywords="" style=""><li><a href="audio_bus_create.htm" class="seealso-list-item" style="">audio_bus_create</a></li><li><a href="audio_bus_main.htm" class="seealso-list-item" style="">audio_bus_main</a></li><li><a href="audio_effect_create.htm" class="seealso-list-item" style="">audio_effect_create</a></li><li><a href="../Audio_Emitters/audio_emitter_bus.htm" class="seealso-list-item" style="">audio_emitter_bus</a></li><li><a href="../Audio_Emitters/audio_emitter_get_bus.htm" class="seealso-list-item" style="">audio_emitter_get_bus</a></li><li><a href="AudioBus.htm" class="seealso-list-item" style="">AudioBus Struct</a></li><li><a href="AudioEffect.htm" class="seealso-list-item" style="">AudioEffect Struct</a></li><li><a href="AudioEffectType.htm" class="seealso-list-item" style="">AudioEffectType Enum</a></li><li><a href="audio_bus_get_emitters.htm" class="seealso-list-item" style="">audio_bus_get_emitters</a></li><li><a href="AudioLFOType.htm" class="seealso-list-item" style="">AudioLFOType Enum</a></li><li><a href="audio_bus_clear_emitters.htm" class="seealso-list-item" style="">audio_bus_clear_emitters</a></li></ol></div><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div>Back:&nbsp;<a href="../Audio.htm">Audio</a></div><div>Next:&nbsp;<a href="../Audio_Groups/Audio_Groups.htm">Audio Groups</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></div></body></html>