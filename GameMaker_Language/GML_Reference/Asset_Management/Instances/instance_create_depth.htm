<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/main.css"><script>let str;removeHtml=function(e){return e=(e=(e=(e=e.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(e){return e.match(/(<([^>]+)>)/gi)},setTranslator=function(e,t,a){let o;o=a?e.attr(a):e.html();let i=t[removeHtml(o)];if(null!=i&&i.length){t=retHtml(o);let n=0;t&&t.forEach(function(e,t){var a=i.replace("{"+n+"}",e);i=a===i?i.replace("{}",e):a,n++}),a?e.attr(a,i):e.html(i)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){var e=`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`;$(".header").length?$(".header").append(e):($(".topic-header").append(e),$(".topic-header button").css("position","relative").css("top","44px"))},removeExtensionFromHash=function(e){return e.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")};let json_global,json_file={"If you want to assign some variables&nbsp;{}before{}&nbsp;the Create event runs, see the example below.":"如果您想在创建事件运行之前{}分配一些变量{}，请参阅下面的示例。","Note that this function will actually create a room layer for the instance, since all instances {}must{} be on a layer in the room, but since this is a {}managed{} layer (i.e.: not one that you have created through code or in the room, but one that {}GameMaker{} has created automatically). You cannot access that layer, and the {}{}layer{}{} instance variable will return -1.":"请注意，此函数实际上将为实例创建房间层，因为所有实例{}必须{}位于房间的某个层上，但因为这是{}托管的{}层(即：不是您通过代码或在房间中创建的层，而是{}GameMaker{}已自动创建的层)。您无法访问该层，{}{}层{}{}实例变量将返回-1。","Note that this function will actually create a room layer for the instance, since all instances {}must{} be on a layer in the room, but since this is a {}managed{} layer (i.e.: not one that you have created through code or in the room, but one that {}GameMaker{} has created automatically). You cannot access that layer, and the&nbsp;{}{}layer{}{} instance variable will return {}-1{}.":"请注意，此函数实际上会为实例创建一个房间层，因为所有实例 {} 必须 {} 位于房间的某个层上，但由于这是一个 {} 托管 {} 层 (即：不是您创建的层) 通过代码或在房间中，但由 {}GameMaker{} 自动创建)。您无法访问该层，并且 {}{}layer{}{} 实例变量将返回 {}-1{}。","Optional Struct":"可选结构","That struct has variables for the speed and direction. It pulls its values from the calling instance, without the need to use {}other{}.":"该结构具有速度和方向变量。它从调用实例提取其值，而无需使用{}other{}。","The above code creates a new instance of the object {}obj_bullet{}&nbsp;at {}-100{} depth, and stores the instance ID in a variable. This variable is then used to assign {}speed{} and {}direction{} to the new instance.":"上面的代码在{}-100{}深度处创建对象{}obj_bullet{}的新实例，并将实例ID存储在变量中。然后，此变量用于为新实例指定{}速度{}和{}方向{}。","The above code creates an instance of {}obj_bullet{}, and passes in a struct as the last argument.":"上面的代码创建{}obj_bullet{}的实例，并作为最后一个参数传入一个结构。","The depth to assign the created instance to":"要将创建的实例分配给的深度","The last argument, {}var_struct{}, is optional and takes a struct containing additional variables for the new instance.":"最后一个参数{}var_struct{}是可选的，它采用一个包含新实例的其他变量的结构。","The object index of the object to create an instance of":"要创建实例的对象的对象索引","The x position the instance of the given object will be created at":"将创建给定对象实例的 x 位置","The x position the object will be created at":"将创建对象的X位置","The y position the instance of the given object will be created at":"将创建给定对象实例的 y 位置","The y position the object will be created at":"将创建对象的Y位置","These variables are applied to the new instance before its Create event runs.":"这些变量在新实例的创建事件运行之前被应用到新实例。","This function returns the {}{}id{}{} of the new instance which can then be stored in a variable and used to access that instance. Note that this function will also call the {}Create Event{} of the instance being created {}before{} continuing with the code or actions for the event that called the function.":"此函数返回新实例的{}{}id{}{}，然后可以将其存储在变量中并用于访问该实例。请注意，该函数还将在{}之前调用正在创建的{}实例的{}创建事件{}，继续调用该函数的事件的代码或操作。","This function returns the&nbsp;{}{}id{}{} of the new instance which can then be stored in a variable and used to access that instance. Note that this function will also call the {}Create Event{} of the instance being created {}before{} continuing with the code or actions for the event that called the function.":"此函数返回新实例的 {}{}id{}{}，然后可以将其存储在变量中并用于访问该实例。请注意，在继续执行调用该函数的事件的代码或操作 {6}之前{7}，此函数还将调用正在创建的实例的 {}Create Event{}。","This means that the values from that struct are readable in the Create event of the new instance. See {}Example 2{} at the bottom.":'这意味着该结构的值在新实例的"创建"事件中是可读的。参见底部的{}示例2{}。',"This will first create the instance, run its Create event, and&nbsp;{}then{}&nbsp;assign values to its variables.":"这将首先创建实例，运行其 Create 事件，然后{}为其变量赋值。","Values applied to the new instance through this struct can be of any type, including {}method{}&nbsp;variables. {}Built-in variables{} can be changed as well.":"通过此结构应用于新实例的值可以是任何类型的，包括{}方法{}变量。{}内置变量{}也可以更改。","Variables from this struct are applied to the new instance&nbsp;{}before{}&nbsp;its Create event runs, but {}after{}&nbsp;its {}Variable Definitions{} are set.":"此结构中的变量在{}的创建事件运行前应用于新实例{}，但{}之后{}的{}变量定义{}被设置。",'With this function you can create a new instance of the specified object at any given point within the room and at the depth specified. The depth can be any value, where the lower the depth the "nearer" to the camera things will be drawn and the higher the depth the further away, so an instance at depth -200 will be drawn over an instance at depth +300 (for example).':'使用此函数，可以在房间内任意给定点和指定深度创建新的指定对象实例。深度可以是任何值，其中深度越低，"越靠近"摄像机，而深度越高，则越远，那么深度-200处的实例将绘制在深度+300(例如)处的实例上。',"You're not limited to a struct literal, as you can also pass in a variable that stores an existing struct, or create a {}new{} struct from a {}constructor{}.":"不限于结构文字，因为还可以传递存储现有结构的变量，或从{}constructor{}创建{}new{}结构。","{}IMPORTANT{}&nbsp;There is a minimum and maximum layer depth of -16000 to 16000. Anything placed on a depth outside that range {}will not be drawn{} although all events will still run as normal.":"{}重要{}最小和最大层深度为-16000到16000。放置在该范围之外的深度上的任何内容都不会被绘制{}，尽管所有事件仍将正常运行。",'{}NOTE{}&nbsp;Variables from the struct are "shallow-copied" to the new instance, meaning any arrays, structs, and other resources are copied by reference and not duplicated.':'{}注意{}结构中的变量"浅拷贝"到新实例，这意味着通过引用复制任何数组、结构和其他资源，而不是复制。',"{}OPTIONAL{} A struct with variables to assign to the new instance":"{}OPTIONAL{}带变量的结构，可分配给新实例","{}{}IMPORTANT{}{}&nbsp;There is a minimum and maximum layer depth of&nbsp;{}-16000{} to {}16000{}. Anything placed on a layer outside that range will not be drawn although all events will still run as normal for anything on the layer.":"{}{} 重要提示{}{} 最小和最大层深度为 {}-16000{} 到 {}16000{}。放置在该范围之外的图层上的任何内容都不会被绘制，尽管该图层上任何内容的所有事件仍将正常运行。",'{}{}NOTE{}{}&nbsp;Variables from the struct are "shallow-copied" to the new instance, meaning any arrays, structs, and other resources are copied by reference and not duplicated.':'{}{} 注意{}{} 结构中的变量被 " 浅复制 " 到新实例，这意味着任何数组、结构和其他资源都通过引用复制，而不是重复。',"{}{}OPTIONAL{}{}&nbsp;A struct with variables to assign to the new instance":"{}{} 可选{}{} 一个结构体，其中包含要分配给新实例的变量"},get_json_global=$.ajax({url:"/global.json",type:"GET",dataType:"json",async:!1,success:function(e){json_global=e}});$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json_file)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../..",gTopicId="8.2.2.3.13.2_2"</script><script type="text/javascript" src="../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>instance_create_depth</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css"><script src="../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining the function instance_create_depth"><meta name="rh-index-keywords" content="instance_create_depth"><meta name="search-keywords" content="instance_create_depth"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Instances/instance_destroy.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Instances/instance_create_layer.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="instance_create_depth"><span>instance_create_depth</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">instance_create_depth</span></h1><p>With this function you can create a new instance of the specified object at any given point within the room and at the depth specified. The depth can be any value, where the lower the depth the "nearer" to the camera things will be drawn and the higher the depth the further away, so an instance at depth -200 will be drawn over an instance at depth +300 (for example).</p><p>Note that this function will actually create a room layer for the instance, since all instances <i>must</i> be on a layer in the room, but since this is a <i>managed</i> layer (i.e.: not one that you have created through code or in the room, but one that <span data-keyref="GameMaker Name">GameMaker</span> has created automatically). You cannot access that layer, and the&nbsp;<span class="inline2"><a href="Instance_Variables/layer.htm">layer</a></span> instance variable will return <span class="inline2">-1</span>.</p><div data-conref="../../../../assets/snippets/Note_layer_depth_range.hts"><p class="note"><span data-conref="../../../../assets/snippets/Tag_important.hts"><span class="important">IMPORTANT</span></span>&nbsp;There is a minimum and maximum layer depth of&nbsp;<span data-keyref="Const_Depth_Min">-16000</span> to <span data-keyref="Const_Depth_Max">16000</span>. Anything placed on a layer outside that range will not be drawn although all events will still run as normal for anything on the layer.</p></div><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;This function behaves differently when you call it after calling a room-changing function in the same event. See the note on&nbsp;<span class="inline3_func"><a href="../Rooms/room_goto.htm">room_goto</a></span>&nbsp;for details.</p><p>This function returns the&nbsp;<span class="inline2"><a href="Instance_Variables/id.htm">id</a></span> of the new instance which can then be stored in a variable and used to access that instance. Note that this function will also call the <a href="../../../../The_Asset_Editors/Object_Properties/Object_Events.htm">Create Event</a> of the instance being created <i>before</i> continuing with the code or actions for the event that called the function.</p><h2>Optional Struct</h2><p>The last argument, <span class="inline2">var_struct</span>, is optional and takes a struct containing additional variables for the new instance.</p><p>Variables from this struct are applied to the new instance&nbsp;<em>before</em>&nbsp;its Create event runs, but <em>after</em>&nbsp;its <a href="../../../../The_Asset_Editors/Object_Properties/Object_Variables.htm">Variable Definitions</a> are set.</p><p>This means that the values from that struct are readable in the Create event of the new instance. See <strong>Example 2</strong> at the bottom.</p><p>Values applied to the new instance through this struct can be of any type, including <a href="../../../GML_Overview/Method_Variables.htm">method</a>&nbsp;variables. <a href="Instance_Variables/Instance_Variables.htm">Built-in variables</a> can be changed as well.</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;Variables from the struct are "shallow-copied" to the new instance, meaning any arrays, structs, and other resources are copied by reference and not duplicated.</p><p>&nbsp;</p><h4>Syntax:</h4><p class="code"><span data-field="title" data-format="default">instance_create_depth</span>(x, y, depth, obj, [var_struct]);</p><table><tbody><tr><th>Argument</th><th>Type</th><th>Description</th></tr><tr><td>x</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The x position the instance of the given object will be created at</td></tr><tr><td>y</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The y position the instance of the given object will be created at</td></tr><tr><td>depth</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The depth to assign the created instance to</td></tr><tr><td>obj</td><td><span data-keyref="Type_Asset_Object"><a target="_blank" href="../../../../The_Asset_Editors/Objects.htm">Object Asset</a></span></td><td>The object index of the object to create an instance of</td></tr><tr><td>var_struct</td><td><span data-keyref="Type_Struct"><a target="_blank" href="../../../GML_Overview/Structs.htm">Struct</a></span></td><td><span data-conref="../../../../assets/snippets/Tag_optional.hts"><span class="optional">OPTIONAL</span></span>&nbsp;A struct with variables to assign to the new instance</td></tr></tbody></table><p>&nbsp;</p><h4>Returns:</h4><p class="code"><span data-keyref="Type_ID_Instance"><a target="_blank" href="Instance_Variables/id.htm">Object Instance</a></span></p><p>&nbsp;</p><h4>Example 1:</h4><p class="code">var inst = <span data-field="title" data-format="default">instance_create_depth</span>(x, y, -100, obj_Bullet);<br>with (inst)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;speed = other.shoot_speed;<br>&nbsp;&nbsp;&nbsp;&nbsp;direction = other.image_angle;<br>}</p><p>The above code creates a new instance of the object <span class="inline2">obj_bullet</span>&nbsp;at <span class="inline2">-100</span> depth, and stores the instance ID in a variable. This variable is then used to assign <span class="inline">speed</span> and <span class="inline">direction</span> to the new instance.</p><p>This will first create the instance, run its Create event, and&nbsp;<em>then</em>&nbsp;assign values to its variables.</p><p>If you want to assign some variables&nbsp;<em>before</em>&nbsp;the Create event runs, see the example below.</p><p>&nbsp;</p><h4>Example 2:</h4><p class="code">var inst = instance_create_depth(x, y, -100, obj_bullet,<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;speed : shoot_speed,<br>&nbsp;&nbsp;&nbsp;&nbsp;direction : image_angle<br>});</p><p>The above code creates an instance of <span class="inline2">obj_bullet</span>, and passes in a struct as the last argument.</p><p>That struct has variables for the speed and direction. It pulls its values from the calling instance, without the need to use <span class="inline2">other</span>.</p><p>These variables are applied to the new instance before its Create event runs.</p><p>You're not limited to a struct literal, as you can also pass in a variable that stores an existing struct, or create a <a href="../../../GML_Overview/Language_Features/new.htm">new</a> struct from a <a href="../../../GML_Overview/Structs.htm#constr">constructor</a>.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="Instances.htm">Instances</a></div><div style="float:right">Next: <a href="instance_destroy.htm">instance_destroy</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>