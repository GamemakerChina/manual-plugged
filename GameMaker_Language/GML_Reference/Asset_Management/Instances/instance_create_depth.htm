<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../..",gTopicId="8.2.2.3.13.2_2"</script><script type="text/javascript" src="../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>instance_create_depth</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css"><script src="../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining the function instance_create_depth"><meta name="rh-index-keywords" content="instance_create_depth"><meta name="search-keywords" content="instance_create_depth"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Instances/instance_destroy.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Instances/instance_create_layer.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="instance_create_depth"><span>instance_create_depth</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">instance_create_depth</span></h1><p>With this function you can create a new instance of the specified object at any given point within the room and at the depth specified. The depth can be any value, where the lower the depth the "nearer" to the camera things will be drawn and the higher the depth the further away, so an instance at depth -200 will be drawn over an instance at depth +300 (for example).</p><p>Note that this function will actually create a room layer for the instance, since all instances <i>must</i> be on a layer in the room, but since this is a <i>managed</i> layer (i.e.: not one that you have created through code or in the room, but one that <span data-keyref="GameMaker Name">GameMaker</span> has created automatically). You cannot access that layer, and the&nbsp;<span class="inline2"><a href="Instance_Variables/layer.htm">layer</a></span> instance variable will return <span class="inline2">-1</span>.</p><div data-conref="../../../../assets/snippets/Note_layer_depth_range.hts"><p class="note"><span data-conref="../../../../assets/snippets/Tag_important.hts"><span class="important">IMPORTANT</span></span>&nbsp;There is a minimum and maximum layer depth of&nbsp;<span data-keyref="Const_Depth_Min">-16000</span> to <span data-keyref="Const_Depth_Max">16000</span>. Anything placed on a layer outside that range will not be drawn although all events will still run as normal for anything on the layer.</p></div><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;This function behaves differently when you call it after calling a room-changing function in the same event. See the note on&nbsp;<span class="inline3_func"><a href="../Rooms/room_goto.htm">room_goto</a></span>&nbsp;for details.</p><p>This function returns the&nbsp;<span class="inline2"><a href="Instance_Variables/id.htm">id</a></span> of the new instance which can then be stored in a variable and used to access that instance. Note that this function will also call the <a href="../../../../The_Asset_Editors/Object_Properties/Object_Events.htm">Create Event</a> of the instance being created <i>before</i> continuing with the code or actions for the event that called the function.</p><h2>Optional Struct</h2><p>The last argument, <span class="inline2">var_struct</span>, is optional and takes a struct containing additional variables for the new instance.</p><p>Variables from this struct are applied to the new instance&nbsp;<em>before</em>&nbsp;its Create event runs, but <em>after</em>&nbsp;its <a href="../../../../The_Asset_Editors/Object_Properties/Object_Variables.htm">Variable Definitions</a> are set.</p><p>This means that the values from that struct are readable in the Create event of the new instance. See <strong>Example 2</strong> at the bottom.</p><p>Values applied to the new instance through this struct can be of any type, including <a href="../../../GML_Overview/Method_Variables.htm">method</a>&nbsp;variables. <a href="Instance_Variables/Instance_Variables.htm">Built-in variables</a> can be changed as well.</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;Variables from the struct are "shallow-copied" to the new instance, meaning any arrays, structs, and other resources are copied by reference and not duplicated.</p><p>&nbsp;</p><h4>Syntax:</h4><p class="code"><span data-field="title" data-format="default">instance_create_depth</span>(x, y, depth, obj, [var_struct]);</p><table><tbody><tr><th>Argument</th><th>Type</th><th>Description</th></tr><tr><td>x</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The x position the instance of the given object will be created at</td></tr><tr><td>y</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The y position the instance of the given object will be created at</td></tr><tr><td>depth</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The depth to assign the created instance to</td></tr><tr><td>obj</td><td><span data-keyref="Type_Asset_Object"><a target="_blank" href="../../../../The_Asset_Editors/Objects.htm">Object Asset</a></span></td><td>The object index of the object to create an instance of</td></tr><tr><td>var_struct</td><td><span data-keyref="Type_Struct"><a target="_blank" href="../../../GML_Overview/Structs.htm">Struct</a></span></td><td><span data-conref="../../../../assets/snippets/Tag_optional.hts"><span class="optional">OPTIONAL</span></span>&nbsp;A struct with variables to assign to the new instance</td></tr></tbody></table><p>&nbsp;</p><h4>Returns:</h4><p class="code"><span data-keyref="Type_ID_Instance"><a target="_blank" href="Instance_Variables/id.htm">Object Instance</a></span></p><p>&nbsp;</p><h4>Example 1:</h4><p class="code">var inst = <span data-field="title" data-format="default">instance_create_depth</span>(x, y, -100, obj_Bullet);<br>with (inst)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;speed = other.shoot_speed;<br>&nbsp;&nbsp;&nbsp;&nbsp;direction = other.image_angle;<br>}</p><p>The above code creates a new instance of the object <span class="inline2">obj_bullet</span>&nbsp;at <span class="inline2">-100</span> depth, and stores the instance ID in a variable. This variable is then used to assign <span class="inline">speed</span> and <span class="inline">direction</span> to the new instance.</p><p>This will first create the instance, run its Create event, and&nbsp;<em>then</em>&nbsp;assign values to its variables.</p><p>If you want to assign some variables&nbsp;<em>before</em>&nbsp;the Create event runs, see the example below.</p><p>&nbsp;</p><h4>Example 2:</h4><p class="code">var inst = instance_create_depth(x, y, -100, obj_bullet,<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;speed : shoot_speed,<br>&nbsp;&nbsp;&nbsp;&nbsp;direction : image_angle<br>});</p><p>The above code creates an instance of <span class="inline2">obj_bullet</span>, and passes in a struct as the last argument.</p><p>That struct has variables for the speed and direction. It pulls its values from the calling instance, without the need to use <span class="inline2">other</span>.</p><p>These variables are applied to the new instance before its Create event runs.</p><p>You're not limited to a struct literal, as you can also pass in a variable that stores an existing struct, or create a <a href="../../../GML_Overview/Language_Features/new.htm">new</a> struct from a <a href="../../../GML_Overview/Structs.htm#constr">constructor</a>.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="Instances.htm">Instances</a></div><div style="float:right">Next: <a href="instance_destroy.htm">instance_destroy</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>