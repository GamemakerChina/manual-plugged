<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/main.css"><script>let str;removeHtml=function(e){return e=(e=(e=(e=e.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(e){return e.match(/(<([^>]+)>)/gi)},setTranslator=function(e,t,a){let r;r=a?e.attr(a):e.html();let i=t[removeHtml(r)];if(null!=i&&i.length){t=retHtml(r);let n=0;t&&t.forEach(function(e,t){var a=i.replace("{"+n+"}",e);i=a===i?i.replace("{}",e):a,n++}),a?e.attr(a,i):e.html(i)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){var e=`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`;$(".header").length?$(".header").append(e):($(".topic-header").append(e),$(".topic-header button").css("position","relative").css("top","44px"))},removeExtensionFromHash=function(e){return e.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")};let json_global,json_file={"By adding the filter/effect&nbsp;in&nbsp;{}at least one room{} through the IDE":"通过IDE在{}至少一个房间{}中添加滤镜/效果","By calling {}{}fx_create(){}{} with the filter/effect name as a&nbsp;string&nbsp;{}literal{}":"调用{}{}fx_create(){}{}，将过滤器/效果名称作为字符串{}literal{}","By default, a filter/effect is applied&nbsp;to the&nbsp;layer that it is {}assigned to{}&nbsp;and all layers below that layer, however you can use {}{}fx_set_single_layer(){}{} to enable {}Single Layer{} mode for a filter/effect&nbsp;to make sure that it's only applied to the layer that it is assigned to.":"默认情况下，滤镜/效果应用于{}分配给{}的层以及该层下的所有层，但是，您可以使用{}{}fx_set_single_layer(){}{}为筛选器/效果启用{}单层{}模式，以确保仅将其应用于指定给的层。","Consider the following examples:":"请参考以下示例：","Create Event":"创建事件","FX Runtime Parameters":"FX 运行时参数","Filter and Effect Functions":"过滤器和效果函数","Filters/effects that take a texture image, require that image to be on a separate texture page. You can set this through the {}sprite editor{}.":"采用纹理图像的滤镜 / 效果要求该图像位于单独的纹理页面上。您可以通过 {} 精灵编辑器 {} 进行设置。","Filters/effects will not work when the {}application surface is disabled{}. It's enabled by default, and you shouldn't usually require disabling it, however you may do so to gain performance on mobile devices. In such cases you wouldn't be able to use filters/effects as they require the surface texture for shader manipulations.":"禁用{}应用程序表面{}时滤镜/效果将不起作用。它在默认情况下是启用的，您通常不应该要求禁用它，但您可以这样做以在移动设备上获得性能。在这种情况下，您将无法使用滤镜/效果，因为它们需要材质球操纵的表面纹理。","Function List":"函数列表","Here is example code for the workflow mentioned above:":"下面是上面提到的工作流的示例代码：",Limitations:"限制",'Modify a parameter in an FX struct by calling&nbsp;{}{}fx_set_parameter(){}{}: {}fx_set_parameter(fx_struct, {}"g_CellSize"{}, 8);{}':'通过调用{}{}fx_set_parameter(){}{}：{}fx_set_parameter( fx_struct，{}" g_CellSize"{}， 8)修改FX结构中的参数;{}','Modify a variable in a parameter struct using the {}${} accessor and a string: {}params_struct[$ {}"g_CellSize"{}] = 8;{}':'使用{}${}访问器和字符串修改参数结构中的变量：{}params_struct[${}" g_CellSize"{}]= 8;{}',"Modify a variable in a parameter struct: {}params_struct.{}g_CellSize{} = 8;{} {} {}{}NOTE{} {}Make sure to get the parameter struct first by calling {}{}fx_get_parameters(){}{}.{}{} {} ":"修改参数结构中的变量：{}params_struct.{}g_CellSize{}= 8;{}{}{}{}注意{}{}调用{}{}fx_get_parameters(){}{}.{}{}{}","Modify&nbsp;FX At Runtime":"运行时修改FX",Overview:"概述","Please note that there are currently only two ways to ensure that GameMaker loads a particular filter/effect in your game:":"请注意，目前只有两种方法可确保GameMaker在游戏中加载特定过滤器/效果：","Single Layer Mode":"单层模式","Single Layer Mode OFF":"单层模式关闭","Single Layer Mode ON":"单层模式开启","Step Event":"步事件","The following functions are used for modifying layers that may contain Filters/Effects by making use of FX Structs:":"以下函数用于通过使用FX结构修改可能包含过滤器/效果的层：",'The following functions are used to create and manage "FX Structs" containing effect data:':'以下函数用于创建和管理包含效果数据的"FX结构"：',"The following visual shows a filter being applied to multiple layers (which is the default behaviour for all FX layers), and then the same filter with Single Layer mode enabled and applied to a non-FX layer:":"下图显示了将一个过滤器应用于多个层(这是所有FX层的默认行为)，然后显示启用了单层模式并应用于非FX层的相同过滤器：","The latter method (of specifying the filter/effect in your code) only works with string&nbsp;{}literal{}{}s{} directly specified in the function argument, which means that if you use a variable or any logic to come up with the filter/effect name string, then the asset compiler will not detect that and the filter/effect will not be loaded.":"后一种方法(在代码中指定filter/effect)只与函数参数中直接指定的string{}literal{}{}s{}一起工作，这意味着如果您使用变量或任何逻辑生成filter/effect名称字符串，则资源编译器将不检测该字符串，并且不会加载filter/effect。","The&nbsp;{}FX Types &amp; Parameters{} page lists all Filters/Effects along with their {}Runtime Parameters{}.":"{}外汇类型 参数{}页列出了所有筛选器/效果及其{}运行时参数{}。","There are some limitations to keep in mind when using filters/effects:":"使用滤镜 / 效果时需要记住一些限制：","There are various GML functions that can be used to create, modify and remove filters/effects from layers within a room, allowing you to easily manage effects in real-time to create realistic and dynamic filters/effects.":"有各种 GML 函数可用于创建、修改和删除房间内图层中的滤镜/效果，使您能够轻松实时管理效果，以创建逼真的和动态的滤镜/效果。","There is currently one limitation to keep in mind:":"目前有一个限制需要牢记：","This means that to use a specific filter/effect at runtime, it must have either been added into a room first (so GameMaker knows you are going to use it) or specified explicitly in an {}{}fx_create(){}{} call.":"这意味着要在运行时使用特定的过滤器/效果，必须首先将其添加到房间(因此 GameMaker 知道要使用它)，或者在{}{}fx_create(){}{}调用中明确指定。","To ensure that the latter method works, you can simply add the filter&nbsp;to at least one room in your project, or ensure that {}{}fx_create(){}{} is called anywhere in your project with the filter name as a string constant (and not a variable).":"为确保后一种方法有效，您只需将过滤器添加到项目中的至少一个房间，或者确保{}{}fx_create(){}{}在项目中的任何地方被调用，该过滤器名作为字符串常量(而不是变量)。","You can also make use of Single-Layer effects in the Room Editor by using the {}Inspector{}.":'也可以使用{}检查器{}在"房间编辑器"中使用 SingleLayer 效果。',"You can modify filters/effects at runtime by doing the following:":"您可以通过执行以下操作在运行时修改过滤器/效果：",'You can use the Runtime parameter names in the following three ways (using the parameter {}"g_CellSize"{} as an example):':'可以通过以下三种方式使用运行时参数名称(以参数{}" g_CellSize"{}为例)：',"{} 将修改后的结构 {} 应用回 FX结构，您无需在此处调用 {}{}{}layer_set_fx(){}{} 因为修改 FX 结构会直接影响它已分配给的层 {}":"{} 将修改后的结构 {} 应用回 FX结构{}，您无需在此处调用 {}{}layer_set_fx(){}{} 因为修改 FX 结构会直接影响它已分配给的层 {}","{}Apply the modified struct{} back to the FX struct by calling {}{}fx_set_parameters(){}{} {} {}{}You do not need to call {}{}layer_set_fx(){}{} here as modifying the FX struct directly affects the layer it is already assigned to{}{} {} ":"通过调用 {}{}fx_set_parameters(){}{}{}{}{} 将修改后的结构 {0} 应用回 FX结构，您无需在此处调用 {1}{}{}layer_set_fx(){}{} 因为修改 FX 结构会直接影响它已分配给的层 {}{}{}","{}Modify the parameters{} as required by assigning values to the struct variables {} {}{}Get the parameter names from here:&nbsp;{}FX Types &amp; Parameters{}{}{} {} ":"{}通过为结构变量赋值，根据需要修改参数{}{}{}{}从此处获取参数名称：{}外汇类型 参数{}{}{}{}","{}Retrieve its parameter struct{}&nbsp;by calling {}{}fx_get_parameters(){}{}{}{}":"{}调用{}{}{}fx_get_parameters(){}{}{}{}{}检索其参数结构","{}Retrieve the FX struct{} from the layer you want to modify by calling {}{}layer_get_fx(){}{} {} {}{}Or, create a new FX struct by calling {}{}fx_create(){}{} and apply it to a layer using {}{}layer_set_fx(){}{}{}{} {} ":"{}通过调用{}{}{}layer_get_fx(){}{}从你要修改的层中获取FX结构。{}{}{}或者，通过调用{}{}fx_create(){}{}创建一个新的FX结构，并使用{}{}layer_set_fx(){}{}将其应用于一个图层。{}"},get_json_global=$.ajax({url:"/global.json",type:"GET",dataType:"json",async:!1,success:function(e){json_global=e}});$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json_file)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../../..",gTopicId="8.2.2.3.14.6"</script><script type="text/javascript" src="../../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Filter and Effect Functions</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../../assets/css/default.css" type="text/css"><script src="../../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Gurpreet S. Matharoo"><meta name="topic-comment" content="Page outlining the different functions and variables associated with Filter/Effect Layers"><meta name="rh-index-keywords" content=""><meta name="search-keywords" content="Filter and Effect Functions"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Rooms/Filter_Effect_Layers/fx_create.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Rooms/Sequence_Layers/layer_sequence_is_finished.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Filter and Effect Functions"><span>Filter and Effect Functions</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>Filter and Effect Functions</h1><h2>Overview</h2><p>There are various GML functions that can be used to create, modify and remove filters/effects from layers within a room, allowing you to easily manage effects in real-time to create realistic and dynamic filters/effects.</p><div data-conref="../../../../../assets/snippets/FX_only_added_through_IDE.hts"><p>Please note that there are currently only two ways to ensure that GameMaker loads a particular filter/effect in your game:</p><ul class="colour"><li>By adding the filter/effect&nbsp;in&nbsp;<strong>at least one room</strong> through the IDE</li><li>By calling <span class="inline"><a href="fx_create.htm">fx_create()</a></span> with the filter/effect name as a&nbsp;string&nbsp;<a class="tooltip" title="An explicit value written in code, e.g. when you write &quot;A TEXT STRING&quot; you are using a string literal, as opposed to returning a string through a variable or function. Similarly, [0, 1, 2] is an array literal.">literal</a></li></ul><p>This means that to use a specific filter/effect at runtime, it must have either been added into a room first (so GameMaker knows you are going to use it) or specified explicitly in an <span class="inline"><a href="fx_create.htm">fx_create()</a></span> call.</p></div><p>The latter method (of specifying the filter/effect in your code) only works with string&nbsp;<a class="tooltip" title="An explicit value written in code, e.g. when you write &quot;A TEXT STRING&quot; you are using a string literal, as opposed to returning a string through a variable or function. Similarly, [0, 1, 2] is an array literal.">literal</a><span class="glossextra">s</span> directly specified in the function argument, which means that if you use a variable or any logic to come up with the filter/effect name string, then the asset compiler will not detect that and the filter/effect will not be loaded.</p><p>Consider the following examples:</p><p class="code">// This will work on its own<br>var _fxshake&nbsp;= fx_create("_filter_screenshake");<br><br>// This will NOT work on its own<br>var _myfilters = { screenshake: "_screenshake" }<br>var _filter_to_use = "_filter" + _myfilters.screenshake;<br>var _fxshake = fx_create(_filter_to_use);</p><p>To ensure that the latter method works, you can simply add the filter&nbsp;to at least one room in your project, or ensure that <span class="inline"><a href="fx_create.htm">fx_create()</a></span> is called anywhere in your project with the filter name as a string constant (and not a variable).</p><div data-conref="../../../../../assets/snippets/FX_Limitations.hts"><h2>Limitations</h2><p>There are some limitations to keep in mind when using filters/effects:</p><ul class="colour"><li>Filters/effects will not work when the <a href="../../../Drawing/Surfaces/application_surface_enable.htm">application surface is disabled</a>. It's enabled by default, and you shouldn't usually require disabling it, however you may do so to gain performance on mobile devices. In such cases you wouldn't be able to use filters/effects as they require the surface texture for shader manipulations.</li><li>Filters/effects that take a texture image, require that image to be on a separate texture page. You can set this through the <a href="../../../../../The_Asset_Editors/Sprites.htm">sprite editor</a>.</li></ul></div><h2>Function List</h2><p>The following functions are used to create and manage "FX Structs" containing effect data:</p><ul class="colour"><li><a href="fx_create.htm">fx_create</a></li><li><a href="fx_get_parameter.htm">fx_get_parameter</a></li><li><a href="fx_get_parameters.htm">fx_get_parameters</a></li><li><a href="fx_get_name.htm">fx_get_name</a></li><li><a href="fx_get_parameter_names.htm">fx_get_parameter_names</a></li><li><a href="fx_get_single_layer.htm">fx_get_single_layer</a></li><li><a href="fx_set_parameter.htm">fx_set_parameter</a></li><li><a href="fx_set_parameters.htm">fx_set_parameters</a></li><li><a href="fx_set_single_layer.htm">fx_set_single_layer</a></li></ul><p>The following functions are used for modifying layers that may contain Filters/Effects by making use of FX Structs:</p><ul class="colour"><li><a href="layer_set_fx.htm">layer_set_fx</a></li><li><a href="layer_get_fx.htm">layer_get_fx</a></li><li><a href="layer_clear_fx.htm">layer_clear_fx</a></li><li><a href="layer_enable_fx.htm">layer_enable_fx</a></li><li><a href="layer_fx_is_enabled.htm">layer_fx_is_enabled</a></li></ul><h2>Modify&nbsp;FX At Runtime</h2><p>You can modify filters/effects at runtime by doing the following:</p><ul class="colour"><li><strong>Retrieve the FX struct</strong> from the layer you want to modify by calling <span class="inline"><a href="layer_get_fx.htm">layer_get_fx()</a></span><ul><li><em>Or, create a new FX struct by calling <span class="inline"><a href="fx_create.htm">fx_create()</a></span> and apply it to a layer using <span class="inline"><a href="layer_set_fx.htm">layer_set_fx()</a></span></em></li></ul></li><li><strong>Retrieve its parameter struct</strong>&nbsp;by calling <span class="inline"><a href="fx_get_parameters.htm">fx_get_parameters()</a></span><span class="inline"></span></li><li><strong>Modify the parameters</strong> as required by assigning values to the struct variables<ul><li><em>Get the parameter names from here:&nbsp;<a href="../../../../../The_Asset_Editors/Room_Properties/FX/All_Filter_Effect_Types.htm">FX Types &amp; Parameters</a></em></li></ul></li><li><strong>Apply the modified struct</strong> back to the FX struct by calling <span class="inline"><a href="fx_set_parameters.htm">fx_set_parameters()</a></span><ul><li><em>You do not need to call <a href="layer_set_fx.htm"><span class="inline">layer_set_fx()</span></a> here as modifying the FX struct directly affects the layer it is already assigned to</em></li></ul></li></ul><p>Here is example code for the workflow mentioned above:</p><p class="code_heading">Create Event</p><p class="code">// Store the FX struct, and its parameters struct, in variables<br>pixelate_fx = layer_get_fx("Effect_1");<br>pixelate_fx_params = fx_get_parameters(pixelate_fx);</p><p class="code_heading">Step Event</p><p class="code">// Change param as variable<br>pixelate_fx_params.g_CellSize = round((mouse_x / room_width) * 64);<br><br>// Or, change param as string<br>pixelate_fx_params[$ "g_CellSize"] = round((mouse_x / room_width) * 64);<br><br>// Apply updated parameters struct to the FX struct<br>fx_set_parameters(pixelate_fx, pixelate_fx_params);</p><h2>FX Runtime Parameters</h2><p>The&nbsp;<a href="../../../../../The_Asset_Editors/Room_Properties/FX/All_Filter_Effect_Types.htm">FX Types &amp; Parameters</a> page lists all Filters/Effects along with their <strong>Runtime Parameters</strong>.</p><p>You can use the Runtime parameter names in the following three ways (using the parameter <span class="inline2">"g_CellSize"</span> as an example):</p><ul class="colour"><li>Modify a parameter in an FX struct by calling&nbsp;<span class="inline"><a href="fx_set_parameter.htm">fx_set_parameter()</a></span>: <span class="inline2">fx_set_parameter(fx_struct, <strong>"g_CellSize"</strong>, 8);</span></li><li>Modify a variable in a parameter struct: <span class="inline2">params_struct.<strong>g_CellSize</strong> = 8;</span><ul><li><span class="note">NOTE</span> <em>Make sure to get the parameter struct first by calling <span class="inline"><a href="fx_get_parameters.htm">fx_get_parameters()</a></span>.</em></li></ul></li><li>Modify a variable in a parameter struct using the <span class="inline2">$</span> accessor and a string: <span class="inline2">params_struct[$ <strong>"g_CellSize"</strong>] = 8;</span></li></ul><h2>Single Layer Mode</h2><p>By default, a filter/effect is applied&nbsp;to the&nbsp;layer that it is <a href="layer_set_fx.htm">assigned to</a>&nbsp;and all layers below that layer, however you can use <a href="fx_set_single_layer.htm"><span class="inline">fx_set_single_layer()</span></a> to enable <strong>Single Layer</strong> mode for a filter/effect&nbsp;to make sure that it's only applied to the layer that it is assigned to.</p><p>The following visual shows a filter being applied to multiple layers (which is the default behaviour for all FX layers), and then the same filter with Single Layer mode enabled and applied to a non-FX layer:</p><div class="image_columns"><figure><img alt="Fire Jump man is woozy with the universe" class="center_shadow" src="../../../../../assets/Images/Scripting_Reference/GML/Reference/Rooms/FX_single_layer_off.png" title="Fire Jump man is woozy with the universe"><figcaption>Single Layer Mode OFF</figcaption></figure><figure><img alt="Fire Jump man is woozy... alone" class="center_shadow" src="../../../../../assets/Images/Scripting_Reference/GML/Reference/Rooms/FX_single_layer_on.png" style="cursor:nesw-resize" title="Fire Jump man is woozy... alone"><figcaption>Single Layer Mode ON</figcaption></figure></div><p>You can also make use of Single-Layer effects in the Room Editor by using the <a href="../../../../../IDE_Tools/The_Inspector.htm">Inspector</a>.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="../Rooms.htm">Rooms</a></div><div style="float:right">Next:&nbsp;<a href="../General_Layer_Functions/General_Layer_Functions.htm">General Layer Functions</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>