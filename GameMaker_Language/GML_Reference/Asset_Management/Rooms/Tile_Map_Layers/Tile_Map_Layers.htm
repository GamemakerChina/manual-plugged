<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,e,a){let n;n=a?t.attr(a):t.html();let i=e[removeHtml(n)];if(null!=i&&i.length){e=retHtml(n);let o=0;e&&e.forEach(function(t,e){var a=i.replace("{"+o+"}",t);i=a===i?i.replace("{}",t):a,o++}),a?t.attr(a,i):t.html(i)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){var t=`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`;$(".header").length?$(".header").append(t):($(".topic-header").append(t),$(".topic-header button").css("position","relative").css("top","44px"))},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")};let json_global,json_file={'Apart from the functions listed above to set tile maps, you also have a number of functions that can be used to manipulate the data of individual tiles. A "blob" of tile data is made up of the tile index plus a few extra bits to show whether the tile has been rotated, flipped or mirrored. You also have the possibility of adding your own bit-mask to the tile data, although this is for advanced users only as you will be masking off bits that are reserved for the tile index - essentially there are 19 bits reserved for your tile indices, but if you only use 8 of them, then you have eleven bits left over that can be used to create a custom mask. This mask can then be used and checked in code to create custom tile collisions or whatever. However, you would normally not need to create your own tile data blobs, and would instead use the function&nbsp;{}{}tilemap_get(){}{}&nbsp;to get the tile data, then you would manipulate it using the functions below, and then you would set it again using&nbsp;{}{}tilemap_set(){}{}.':'除了上面列出的用于设置图块图的函数外，您还有许多可用于操作单个图块图的数据的函数。图块数据的"斑点"由图块索引加上一些额外的位组成，以显示图块是否已经旋转、翻转或镜像。您还可以将自己的位掩码添加到图块数据中，虽然这仅适用于高级用户，因为您将屏蔽为图块索引保留的位实际上有 19 位保留给图块索引，但如果仅使用其中的 8 位，则剩余 11 位可用于创建自定义掩码。然后可以使用此掩码并检入代码来创建自定义图块冲突等。然而，您通常不需要创建自己的图块数据块，而是使用函数{}{}tilemap_get(){}{}来获取图块数据，然后使用下面的函数操作该图块数据，然后使用{}{}tilemap_set(){}{}再次设置。',"Below is a list of all the functions that can be used for editing individual {}tiles{}:":"以下是可用于编辑单个{}图块{}的所有函数的列表：","Below is a list of all the functions that can be used for editing {}tile map layers{}:":"以下是可用于编辑{}tile map layers{}的所有函数列表：","The {}GameMaker{} {}Room Editor{} permits you to add tiles into any given room using {}layers{}. As the name implies, a tile map layer is simply a collection of tile set tiles that are all considered to be at the same depth within the room, and by stacking layers you can make some things draw over or under others. You can also control certain aspects of layers from code, adding or removing things, or changing certain properties of the layer or what it contains at run time. Note that in the room editor you are limited to one tile map per layer (the {}{}Tile Layer{}{}), but when working with them in code, you can have multiple tile maps assigned to a single layer, with each map having its own unique ID and properties, so:":"{}GameMaker{} {}房间编辑器{}允许您使用{}层{}向任何给定房间添加图块。 顾名思义，图块贴图层只是图块集图块的集合，它们都被认为在房间内的同一深度，通过堆叠层，你可以使一些东西在其他东西上或下面画。您还可以从代码、添加或删除对象、或更改层的某些属性或运行时包含的内容中控制层的某些方面。请注意，在房间编辑器中，每个层({}{}图块层{}{})限制为一个图块贴图，但是在代码中使用它们时，可以将多个图块贴图指定给单个层，每个贴图都有自己的唯一 ID 和属性，因此：","The {}tile layer{} is what you create in the Room Editor to add tile sets to":'{}tile layer{}是您在"房间编辑器"中创建的，用于将图块集添加到',"The {}tile map{} is what you call the collection of tiles that are added to a layer, either in the room editor or through code, as a single element on that layer":"{}tile map{}是您称为添加到层的图块集合，无论是在房间编辑器中还是通过代码，作为该层上的单个元素","The {}tile set{} is the resource that you use to create tile layers and tile maps":"{}tile set{}是用于创建图块图层和图块贴图的资源","Tile Map Layers":"贴图层"},get_json_global=$.ajax({url:"/global.json",type:"GET",dataType:"json",async:!1,success:function(t){json_global=t}});$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json_file)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../../..",gTopicId="8.2.2.3.14.2"</script><script type="text/javascript" src="../../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Tile Map Elements</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../../assets/css/default.css" type="text/css"><script src="../../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining the different functions and variables associated with Tile Layers"><meta name="rh-index-keywords" content=""><meta name="search-keywords" content="Tile Map Layers"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Rooms/Tile_Map_Layers/layer_tilemap_get_id.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Rooms/General_Layer_Functions/layer_reset_target_room.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Tile Map Elements"><span>Tile Map Elements</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1 id="h2"><span data-field="title" data-format="default">Tile Map Elements</span></h1><p>A tile map is a collection of tile set tiles that are all considered to be at the same depth within the room.</p><p>It can be visualised as a grid where each cell stores some tile data: the index of the tile that should be drawn at that cell, along with how it should be drawn (rotated, flipped and/or mirrored).</p><p>Each tile map has its own unique element ID and properties.</p><p>When working with tiles, you use a few things that are related to one another as follows:&nbsp;</p><ul class="colour"><li>The <strong>tile set</strong> is the asset that you use to create tile layers and tile maps.</li><li>The <strong>tile layer</strong> is what you create in&nbsp;<a href="../../../../../The_Asset_Editors/Rooms.htm">The Room Editor</a> to add tile sets to. Note that layers are only of a certain type in the Room Editor, not in code.</li><li>The <strong>tile map</strong> is what you call the collection of tiles that are added to a layer, either in the Room Editor or through code, as a single element on that layer.</li></ul><p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;In the Room Editor you are limited to a single tile map per layer,&nbsp;which is created when you add a <a href="../../../../../The_Asset_Editors/Room_Properties/Layer_Properties.htm">Tile Layer</a>, but when working with them in code, you can have multiple tile maps assigned to a layer.</p><h3 id="tile_data_blob">Tile Data "Blob"</h3><p>A "blob" of tile data is stored as a 32 bit value. It is made up of&nbsp;<span data-keyref="Const_Tile_Data_Max_Index_Bits">19</span>&nbsp;bits that store the tile index in the tile set (bits 0 to 18) plus a few extra bits to indicate how the tile data should be drawn:&nbsp;bit 28 stores the mirror bit, bit 29 stores the flip bit, bit 30 stores the rotate bit and bit 31 is unused. Bits 19 to 27 are also unused. You can also use these unused bits to store your own data.</p><p>For more convenient access to certain bits you can use the values of the tile mask constant:&nbsp;</p><table id="table" style="caption-side:top"><caption>Tile Mask Constant</caption><colgroup><col><col></colgroup><tbody><tr><th>Constant</th><th>Description</th></tr><tr><td><span class="inline">tile_rotate</span></td><td>Used to set/get the rotate bit of a tile data blob.</td></tr><tr><td><span class="inline">tile_mirror</span></td><td>Used to set/get the mirror bit of a tile data blob.</td></tr><tr><td><span class="inline">tile_flip</span></td><td>Used to set/get the flip bit of a tile data blob.</td></tr><tr><td><span class="inline">tile_index_mask</span></td><td>A special constant that is for "and"-ing with the tile data blob to extract the&nbsp;<span data-keyref="Const_Tile_Data_Max_Index_Bits">19</span>&nbsp;bits of the tile index.</td></tr></tbody></table><p>You can get tile data at a specific map cell using&nbsp;<span class="inline3_func"><a href="tilemap_get.htm">tilemap_get</a></span>&nbsp;or&nbsp;<span class="inline3_func"><a href="tilemap_get_at_pixel.htm">tilemap_get_at_pixel</a></span>&nbsp;and set it using&nbsp;<span class="inline3_func"><a href="tilemap_set.htm">tilemap_set</a></span>&nbsp;or&nbsp;<span class="inline3_func"><a href="tilemap_set_at_pixel.htm">tilemap_set_at_pixel</a></span>.</p><h3 id="tile_map_bit_mask">Tile Map Bit Mask</h3><p>You have the possibility of adding your own bit mask to a tile map in order to use bits of the tile data "blob" for your own use, although this is for advanced users only as you will be masking off bits that are reserved for the tile index. There are&nbsp;<span data-keyref="Const_Tile_Data_Max_Index_Bits">19</span> bits reserved for your tile indices, but if you only use 8 of them, then you have eleven bits left over that can be used to create a custom mask. This mask can then be used and checked in code to create custom tile collisions or whatever.</p><p>The bit mask is "and"-ed <span class="inline2">&amp;</span> against the tile data when the tile map is <i>drawn</i> (so it doesn't affect any of the other functionality), meaning that bits which aren't in the mask are ignored, but can still be read and written to by the user for their own purposes.</p><p>However, you would normally not need to create your own tile data blobs, and would instead use the function&nbsp;<span class="inline3_func"><a href="tilemap_get.htm">tilemap_get</a></span> to get the tile data, then you would manipulate it using the functions for <a href="Tile_Map_Layers.htm#editing_individual_tiles">Editing Individual Tiles</a>, and then you would set it again using <span class="inline3_func"><a href="tilemap_set.htm">tilemap_set</a></span>.</p><p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;Aside from a mask per tile map, there is also a <a href="tilemap_set_global_mask.htm">global</a> one. The two are bitwise "and"-ed <span class="inline2">&amp;</span> together internally by <span data-keyref="GameMaker Name">GameMaker</span> before being used for drawing.</p><h3 id="calculating_the_mask_bits">Calculating the Mask Bits</h3><p>To get an initial index mask value you take the number of tiles in the tile set and subtract 1, so a 16x16 tile set has 256 tiles and a mask value of 255 (or $ff in hexadecimal). If the tile set has a number of tiles that's not a power of two, then round up to the nearest power of two to get the mask, for example a tile set that is 20x20 has 400 tiles, which you would round up to 512, and so get a mask index value of 511 ($1ff in hexadecimal). Apart from the index mask, normally you would want to preserve the flip, rotate and mirror values that are assigned to a tile too, to help with that there are the constants under&nbsp;<a href="Tile_Map_Layers.htm#table" title="Tile Mask Constant Table">Tile Mask Constant</a> that can be used. These can be bitwise "or"-ed <span class="inline2">|</span> together with the index mask value to preserve those bits of data.</p><p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;See&nbsp;<a href="../../../../../Additional_Information/Bitwise_Operators.htm">Bitwise Operators</a>&nbsp;for more information on how to work with binary and bit masks.</p><h2 id="func_ref">Function Reference</h2><h3 id="func_ref_editing_tile_map_layers">Editing&nbsp;<span data-field="title" data-format="default" id="">Tile Map Elements</span></h3><ul class="colour"><li><a href="layer_tilemap_get_id.htm">layer_tilemap_get_id</a></li><li><a href="layer_tilemap_exists.htm">layer_tilemap_exists</a></li><li><a href="layer_tilemap_create.htm">layer_tilemap_create</a></li><li><a href="layer_tilemap_destroy.htm">layer_tilemap_destroy</a></li><li><a href="tilemap_tileset.htm">tilemap_tileset</a></li><li><a href="tilemap_clear.htm">tilemap_clear</a></li><li><a href="tilemap_x.htm">tilemap_x</a></li><li><a href="tilemap_y.htm">tilemap_y</a></li><li><a href="tilemap_set.htm">tilemap_set</a></li><li><a href="tilemap_set_at_pixel.htm">tilemap_set_at_pixel</a></li><li><a href="tilemap_set_mask.htm">tilemap_set_mask</a></li><li><a href="tilemap_set_global_mask.htm">tilemap_set_global_mask</a></li><li><a href="tilemap_set_width.htm">tilemap_set_width</a></li><li><a href="tilemap_set_height.htm">tilemap_set_height</a></li><li><a href="tilemap_get_mask.htm">tilemap_get_mask</a></li><li><a href="tilemap_get_global_mask.htm">tilemap_get_global_mask</a></li><li><a href="tilemap_get_tileset.htm">tilemap_get_tileset</a></li><li><a href="tilemap_get_frame.htm">tilemap_get_frame</a></li><li><a href="tilemap_get_tile_width.htm">tilemap_get_tile_width</a></li><li><a href="tilemap_get_tile_height.htm">tilemap_get_tile_height</a></li><li><a href="tilemap_get_width.htm">tilemap_get_width</a></li><li><a href="tilemap_get_height.htm">tilemap_get_height</a></li><li><a href="tilemap_get_x.htm">tilemap_get_x</a></li><li><a href="tilemap_get_y.htm">tilemap_get_y</a></li><li><a href="tilemap_get.htm">tilemap_get</a></li><li><a href="tilemap_get_at_pixel.htm">tilemap_get_at_pixel</a></li><li><a href="tilemap_get_cell_x_at_pixel.htm">tilemap_get_cell_x_at_pixel</a></li><li><a href="tilemap_get_cell_y_at_pixel.htm">tilemap_get_cell_y_at_pixel</a></li><li><a href="../../../Drawing/Sprites_And_Tiles/draw_tilemap.htm">draw_tilemap</a></li></ul><h3 id="func_ref_editing_individual_tiles">Editing Individual Tiles</h3><ul class="colour"><li><a href="tile_get_empty.htm">tile_get_empty</a></li><li><a href="tile_get_index.htm">tile_get_index</a></li><li><a href="tile_get_flip.htm">tile_get_flip</a></li><li><a href="tile_get_mirror.htm">tile_get_mirror</a></li><li><a href="tile_get_rotate.htm">tile_get_rotate</a></li><li><a href="tile_set_empty.htm">tile_set_empty</a></li><li><a href="tile_set_index.htm">tile_set_index</a></li><li><a href="tile_set_flip.htm">tile_set_flip</a></li><li><a href="tile_set_mirror.htm">tile_set_mirror</a></li><li><a href="tile_set_rotate.htm">tile_set_rotate</a></li><li><a href="../../../Drawing/Sprites_And_Tiles/draw_tile.htm">draw_tile</a></li></ul><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back:&nbsp;<a href="../Rooms.htm">Rooms</a></div><div style="float:right">Next:&nbsp;<a href="../Background_Layers/Background_Layers.htm">Background Elements</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>