<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption,blockquote").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption,.expandtext").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../../..",gTopicId="8.2.2.3.14.2.0_12"</script><script type="text/javascript" src="../../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>tilemap_set_global_mask</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../../assets/css/default.css" type="text/css"><script src="../../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining the function tilemap_set_global_mask"><meta name="rh-index-keywords" content="tilemap_set_global_mask,tile_rotate,tile_mirror,tile_flip,tile_index_mask"><meta name="search-keywords" content="tilemap_set_global_mask,tile_rotate,tile_mirror,tile_flip,tile_index_mask"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Rooms/Tile_Map_Layers/tilemap_set_width.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Rooms/Tile_Map_Layers/tilemap_set_mask.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="tilemap_set_global_mask"><span>tilemap_set_global_mask</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">tilemap_set_global_mask</span></h1><p>This function sets the&nbsp;<a data-rhwidget="HyperlinkPopover" href="Tile_Map_Layers.htm#tile_map_bit_mask">Tile Map Bit Mask</a> for all tile maps in the game.</p><p>The idea is that if you have, for example, pretty small tile sets of 16 x 16 tiles then you'll have a total of 256 different tiles in each tile set, which only uses up 8 bits of your index in the&nbsp;<a data-rhwidget="HyperlinkPopover" href="Tile_Map_Layers.htm#h3"></a> (from an available&nbsp;<span data-keyref="Const_Tile_Data_Max_Index_Bits">19</span> bits of data). These bits can be "masked" and then the rest of the tile data can be used to store additional values.&nbsp;See&nbsp;<a href="Tile_Map_Layers.htm#calculating_the_mask_bits">Calculating the Mask Bits</a>.</p><p>Tile map bit masking is an advanced feature and allows you to use bits of the tile data "blob" for your own use. For example, the user could reserve a bit to mean "solid" in the tile-data structure and then this can be checked for fast collisions. Basically, the bit mask is "and"-ed against the tile data when the tile map is <i>drawn</i> (so it doesn't affect any of the other functionality), meaning that bits which aren't in the mask are ignored, but can still be read and written to by the user for their own purposes.</p><p class="note"><span data-conref="../../../../../assets/snippets/Tag_important.hts"><span class="important">IMPORTANT</span></span>&nbsp;You should make sure to always have at least the same bits set in the global mask to make the per tile map masks (<span class="inline3_func"><a href="tilemap_set_mask.htm">tilemap_set_mask</a></span>) work the way you'd expect. For example, a global mask of <span class="inline2">0b0000111111111101</span>&nbsp;will force bit 1 to 0 in any tile map mask because of the "and"-ing of the two masks, no matter if the bit is set there or not.</p><p>&nbsp;</p><h4>Syntax:</h4><p class="code"><span data-field="title" data-format="default">tilemap_set_global_mask</span>(mask);</p><table><tbody><tr><th>Argument</th><th>Type</th><th>Description</th></tr><tr><td>mask</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../../../GML_Overview/Data_Types.htm">Real</a></span></td><td>The mask value to use</td></tr></tbody></table><p>&nbsp;</p><h4>Returns:</h4><p class="code"><span data-keyref="Type_Void">N/A</span></p><p>&nbsp;</p><h4>Example 1: Basic Use</h4><p class="code">var _mask = tile_mirror | tile_flip | tile_rotate | 255;<br>tilemap_set_global_mask(_mask);</p><p>The above code sets the global tile map bit mask to 8bits (binary <span class="inline2">0b11111111</span>, i.e. the value <span class="inline2">255</span>), while also preserving the flip, mirror, and rotate values.</p><p>&nbsp;</p><h4>Example 2: Combining Global and Tile Map Mask</h4><p class="code">var _transform_bits =&nbsp;tile_mirror | tile_flip | tile_rotate;<br>var _mask_global =&nbsp;_transform_bits&nbsp;| 0b11111111;<br>var _mask_small_ts = _transform_bits | 0b1111;<br>tilemap_set_global_mask(_mask_global);<br><br>var _lay_id = layer_get_id("Tiles_sky");<br>var _map_id = layer_tilemap_get_id(_lay_id);<br>tilemap_set_mask(_map_id, _mask_small_ts);</p><p>The above code sets the global tile map bit mask using&nbsp;<span class="inline3_func"><span data-field="title" data-format="default">tilemap_set_global_mask</span></span>.&nbsp;8 bits can be used for the tile index and the mirror, flip and rotate bits are&nbsp;preserved. For the tile map at a layer named "Tiles_sky" a custom mask is set that allows only 4 bits for the tile index. The transform bits are, however, also preserved.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back:&nbsp;<a href="Tile_Map_Layers.htm">Tile Map Elements</a></div><div style="float:right">Next:&nbsp;<a href="tilemap_set_width.htm">tilemap_set_width</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>