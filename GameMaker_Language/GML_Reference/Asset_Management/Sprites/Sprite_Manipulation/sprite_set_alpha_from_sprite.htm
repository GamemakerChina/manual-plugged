<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../../../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../../../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../../../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../../../../assets/import/main.css"><script>let str;removeHtml=function(e){return e=(e=(e=(e=e.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(e){return e.match(/(<([^>]+)>)/gi)},setTranslator=function(e,t,a){let o;o=a?e.attr(a):e.html();let i=t[removeHtml(o)];if(null!=i&&i.length){t=retHtml(o);let n=0;t&&t.forEach(function(e,t){var a=i.replace("{"+n+"}",e);i=a===i?i.replace("{}",e):a,n++}),a?e.attr(a,i):e.html(i)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){var e=`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`;$(".header").length?$(".header").append(e):($(".topic-header").append(e),$(".topic-header button").css("position","relative").css("top","44px"))},removeExtensionFromHash=function(e){return e.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")};let json_global,json_file={"Below is an image that illustrates how this function works:":"下图说明了此函数的工作原理：","In this extended example we show how you can create a special effect sprite from two sprite resources. To start with we need to have a controller variable in the {}Create Event{} of the instance. This variable is to ensure that the sprite is only created once:":"在这个扩展的例子中，我们展示了如何从两个精灵资源中创建一个特殊效果精灵。首先，我们需要在实例的{}创建事件{}中有一个控制器变量。此变量用于确保只创建一次sprite：","Once that is done we need to then go to the {}Draw Event{} and add in this code:":"完成后，我们需要转到{}Draw事件{}并添加以下代码：","The above code first checks to see if the control variable is true or not, and if it is, it then runs the code to set the sprite alpha, setting the variable to false to prevent the code from running more than once. In this case, it creates a surface the size of the alpha mask that we wish to use, then draws the sprite that is to have its alpha changed onto the surface and creates a new sprite from it, assigning it as the {}sprite_index{} of the object. The code then clears the surface and draws the alpha map sprite to it and creates another new sprite, storing its index in a local variable. Finally, the new sprite assigned to the object gets its alpha set from this temporary sprite, the surface is freed and the temporary sprite is removed.":"上面的代码首先检查控制变量是否为true，如果为true，则运行代码以设置sprite alpha，将变量设置为false以防止代码多次运行。在本例中，它创建了一个我们希望使用的alpha遮罩大小的表面，然后将要更改其alpha的精灵绘制到该表面上，并从中创建一个新的精灵，将其指定为对象的{}sprite_索引{}。然后，代码清除表面并将Alpha Map Sprite绘制到该表面，并创建另一个新的精灵，将其索引存储在局部变量中。最后，分配给对象的新sprite从该临时sprite获得其alpha集，释放表面并移除临时sprite.","The index of the sprite to change the transparency map of.":"要更改透明贴图的精灵的索引。","The index of the sprite to take the transparency map data from.":"要从中获取透明贴图数据的精灵的索引。","There is one final thing to do here, and that is remove the sprite that has been created for the object from memory when not in use. This would either be done in the {}Destroy Event{} or the {}Room End Event{} like this:":"这里还有最后一件事要做，那就是在不使用时从内存中删除为对象创建的精灵.这将在{}销毁事件{}或{}房间结束事件{}中完成，如下所示：",'This function uses the value/saturation of one sprite and multiplies it with the alpha of the target sprite. Ideally the sprite being used to generate the new alpha map should be grey-scale, with the white areas having an equivalent alpha value of 1 (opaque), the black areas being equivalent to alpha 0 (transparent), and the grey areas being an alpha in between 0 and 1. The sprite that you are setting the alpha of {}cannot be a permanent resource{}, nor can the sprite you use to set the alpha, as this will give an error. This means that you must create two completely new sprites "on the fly" in some way for the function to work correctly. This can be achieved by using surfaces, or by creating a sprite from the screen (the code example below shows how the effect can be achieved with surfaces).':"此函数使用一个精灵的值/饱和度，并将其与目标精灵的Alpha相乘。理想地，用于生成新的阿尔法图的精灵应该是灰度级的，其中白色区域具有等效的阿尔法值1(不透明)，黑色区域等效于阿尔法0(透明)，而灰色区域是介于0和1之间的阿尔法。您正在设置{}的alpha的精灵不能是永久资源{}，您用来设置alpha的精灵也不能是永久资源{}，因为这样会出错。这意味着您必须以某种方式“即时”创建两个全新的精灵，才能使该函数正常工作。这可以通过使用表面或从屏幕创建精灵来实现(下面的代码示例显示了如何使用表面实现该效果)。","{}NOTE{}: This function is only useful for {}bitmap{} sprites and will not work with SWF or JSON (Spine) sprites.":"{}注意{}：此函数仅适用于{}位图{}精灵，不适用于SWF或JSON(Spine)精灵。","{}{}{}NOTE{}{}{} This function is only useful for {}bitmap{} sprites and will not work with SWF or JSON (Spine) sprites.":"{}{}{}注意{}{}{}此函数仅对{}位图{}精灵有用，不适用于 SWF 或 JSON(Spine) 精灵。"},get_json_global=$.ajax({url:"/global.json",type:"GET",dataType:"json",async:!1,success:function(e){json_global=e}});$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json_file)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../../..",gTopicId="8.2.2.3.3.2.0_14"</script><script type="text/javascript" src="../../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>sprite_set_alpha_from_sprite</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../../assets/css/default.css" type="text/css"><script src="../../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page explaining the function sprite_set_alpha_from_sprite"><meta name="rh-index-keywords" content="sprite_set_alpha_from_sprite"><meta name="search-keywords" content="sprite_set_alpha_from_sprite"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_nineslice_create.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_merge.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="sprite_set_alpha_from_sprite"><span>sprite_set_alpha_from_sprite</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>sprite_set_alpha_from_sprite</h1><p>This function uses the value/saturation of one sprite and multiplies it with the alpha of the target sprite. Ideally the sprite being used to generate the new alpha map should be grey-scale, with the white areas having an equivalent alpha value of 1 (opaque), the black areas being equivalent to alpha 0 (transparent), and the grey areas being an alpha in between 0 and 1. The sprite that you are setting the alpha of <i>cannot be a permanent resource</i>, nor can the sprite you use to set the alpha, as this will give an error. This means that you must create two completely new sprites "on the fly" in some way for the function to work correctly. This can be achieved by using surfaces, or by creating a sprite from the screen (the code example below shows how the effect can be achieved with surfaces).</p><p class="note"><b><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span></b> This function is only useful for <b>bitmap</b> sprites and will not work with SWF or JSON (Spine) sprites.</p><p>Below is an image that illustrates how this function works:</p><p><img alt="Sprite Set Alpha Example" class="center" src="../../../../../assets/Images/Scripting_Reference/GML/Reference/Sprites/spr_alpha.png"></p><p>&nbsp;</p><h4>Syntax:</h4><p class="code">sprite_set_alpha_from_sprite(ind, spr);</p><table><tbody><tr><th>Argument</th><th>Type</th><th>Description</th></tr><tr><td>ind</td><td><span data-keyref="Type_Asset_Sprite"><a target="_blank" href="../../../../../The_Asset_Editors/Sprites.htm">Sprite Asset</a></span></td><td>The index of the sprite to change the transparency map of.</td></tr><tr><td>spr</td><td><span data-keyref="Type_Asset_Sprite"><a target="_blank" href="../../../../../The_Asset_Editors/Sprites.htm">Sprite Asset</a></span></td><td>The index of the sprite to take the transparency map data from.</td></tr></tbody></table><p>&nbsp;</p><h4>Returns</h4><p class="code"><span data-keyref="Type_Void">N/A</span></p><p>&nbsp;</p><h4>Extended Example:</h4><p>In this extended example we show how you can create a special effect sprite from two sprite resources. To start with we need to have a controller variable in the <b>Create Event</b> of the instance. This variable is to ensure that the sprite is only created once:</p><p class="code">spr_create = true;</p><p>Once that is done we need to then go to the <b>Draw Event</b> and add in this code:</p><p class="code">if (spr_create)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;spr_create = false;<br>&nbsp; &nbsp; var _sw =&nbsp;sprite_get_width(spr_Explosion_Alpha);<br>&nbsp; &nbsp; var _sh =&nbsp;sprite_get_height(spr_Explosion_Alpha);<br>&nbsp; &nbsp; var _xo =&nbsp;sprite_get_xoffset(spr_Gradient);<br>&nbsp; &nbsp; var _yo =&nbsp;sprite_get_yoffset(spr_Gradient);<br>&nbsp; &nbsp; var _surf = surface_create(_sw, _sh);<br>&nbsp;&nbsp;&nbsp;&nbsp;surface_set_target(_surf);<br>&nbsp;&nbsp;&nbsp;&nbsp;draw_clear_alpha(c_black, 0);<br>&nbsp;&nbsp;&nbsp;&nbsp;draw_sprite(spr_Gradient, 0, 0, 0);<br>&nbsp;&nbsp;&nbsp;&nbsp;sprite_index = sprite_create_from_surface(_surf, 0, 0, _sw, _sh, false, false, _xo, _yo);<br>&nbsp;&nbsp;&nbsp;&nbsp;draw_clear_alpha(c_black, 0);<br>&nbsp;&nbsp;&nbsp;&nbsp;draw_sprite(spr_Explosion_Alpha, 0, _xo, _yo);<br>&nbsp; &nbsp; var _spr = sprite_create_from_surface(_surf, 0, 0, _sw, _sh, false, false, _xo, _yo);<br>&nbsp;&nbsp;&nbsp;&nbsp;surface_reset_target();<br>&nbsp;&nbsp;&nbsp;&nbsp;surface_free(_surf);<br>&nbsp;&nbsp;&nbsp;&nbsp;sprite_set_alpha_from_sprite(sprite_index, _spr);<br>&nbsp;&nbsp;&nbsp;&nbsp;sprite_delete(_spr);<br>}<br><br>draw_sprite(sprite_index, 0, x, y);</p><p>The above code first checks to see if the control variable is true or not, and if it is, it then runs the code to set the sprite alpha, setting the variable to false to prevent the code from running more than once. In this case, it creates a surface the size of the alpha mask that we wish to use, then draws the sprite that is to have its alpha changed onto the surface and creates a new sprite from it, assigning it as the <span class="inline">sprite_index</span> of the object. The code then clears the surface and draws the alpha map sprite to it and creates another new sprite, storing its index in a local variable. Finally, the new sprite assigned to the object gets its alpha set from this temporary sprite, the surface is freed and the temporary sprite is removed.</p><p>There is one final thing to do here, and that is remove the sprite that has been created for the object from memory when not in use. This would either be done in the <b>Destroy Event</b> or the <b>Room End Event</b> like this:</p><p class="code">sprite_delete(sprite_index);</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="Sprite_Manipulation.htm">Sprite Manipulation</a></div><div style="float:right">Next:&nbsp;<a href="sprite_set_cache_size.htm">sprite_set_cache_size</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>