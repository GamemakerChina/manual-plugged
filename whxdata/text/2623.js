rh._.exports({"0":[[" ","with"]],"1":[["with"]],"2":[["with"]],"3":[[" ","with"]],"4":[[" ","As indicated in the section ","Addressing Variables in Other Instances",", it is possible to read and change the value of variables in instances and ","structs"," other than the one currently executing any given code. However, in a number of cases you want to do a lot more than just change a single variable within those other instances, and may want to perform more complex code actions that require multiple functions and lines of code. For example, imagine that you want to move all the instances of a ball object in your game 8 pixels down. You may think that this is achieved simply by the following piece of code:"," ","obj_ball.y = obj_ball.y + 8;"," ","But this is not correct, as the right side of the assignment gets the value of the y-coordinate of the first ball and adds 8 to it. Next this new value is set as the y-coordinate of ","all ","balls, so the result is that all balls get the same y-coordinate, and even if you use the following:"," ","obj_ball.y += 8;"," ","it will have exactly the same effect because it is simply an abbreviation of the first statement. So how ","do"," we achieve something like this? This is why the ","with"," statement exists in GML. The ","with"," statement has the following syntax:"," ","with (<expression>)","\n    {","\n        <statement>;","\n        <statement>;","\n        ...","\n    }"," ","For the ","expression",", you can indicate one or more instances (or a struct) to perform the code on, using an instance ID, the object ID (which indicates that ","all instances"," in the room of this object are to run the code block), the struct ID, or one of the special ","keywords"," (","all"," or ","other","). This will then change the ","scope"," of the code within the curly brackets ","{}"," from the instance, struct or function that actually holds the code to the instance (or instances or struct) given in the expression."," ","Once the expression has set the scope of the ","with",", the ","statement"," will then be executed for each of the indicated instances, as if that instance is the current ( ","self",") instance. So, returning to our original problem, to move all instances of the ball object 8 pixels down you would type:"," ","with (obj_ball)","\n    {","\n        y += 8;","\n    }"," ","Essentially this is a loop, and each ","iteration"," of the loop, the code will run on one instance of the object ","obj_ball","."," ","If you want to execute multiple statements, just include them in the curly brackets, the same as you would around any other code block. So for example, to move all the balls in our example to a random position and give them a random speed and direction, you would use:"," ","with (obj_ball)","\n    {","\n        x = random(room_width);","\n        y = random(room_height);","\n        speed = 1 + random(2);","\n        direction = random(360);","\n    }"," ","As mentioned above, within the statement(s), the indicated instance or struct has become the target (","self",") instance that runs the code block, which means that the original instance (that contains the ","with"," and the entire code block) has become the ","other"," instance. So - for example - to move all balls to the position of the current instance that actually contains the code, you can type this:"," ","with (obj_ball)","\n    {","\n        x = other.x;","\n        y = other.y;","\n    }"," ","The ","with"," statement is an extremely powerful tool and is useful in many, many circumstances so it is important that you understand fully how it can be used. To help there are a few more examples of use below:"," ","with (instance_create_layer(x, y, \"Instances\", obj_Ball))","\n    {","\n        speed = other.speed;","\n        direction = other.direction;","\n    }"," ","The above code will create an instance of ","obj_Ball"," and assign it the speed and direction of the instance that runs the whole code block."," ","with (instance_nearest(x, y, obj_Ball))","\n    {","\n        instance_destroy();","\n    }"," ","The above code will destroy the instance of ","obj_Ball"," nearest to the instance running the code."," ","with(clone_struct)","\n    {","\n        xx = other.x;","\n        yy = other.y;","\n        spd = other.speed;","\n        dir = other.direction;","\n    }"," ","The above code uses ","with"," to target a struct and set the given struct member variables to the values stored in the instance variables from the instance calling the code."," ","var _inst = noone;","\n    with (obj_ball)","\n    {","\n        if (str > other.str)","\n        {","\n            _inst = id;","\n        }","\n    }","\n    if (_inst != noone)","\n    {","\n        target = _inst;","\n    }"," ","The above code is slightly more complex than previous ones due to it using a ","local variable",". This variable is ","local ","to either the ","event"," or the ","script ","function"," and not to the instance or struct and so can be used and accessed by all instances that are referenced within the code block. So, in the code above we have set a local variable to the special keyword ","noone"," and then use the ","with"," construction to have every instance of ","obj_Ball"," check their ","str"," variable against that of the instance running the code block. If the value of the variable is larger, then they store their unique ID in the ","inst"," local variable, meaning that at the end of the code, only the instance with a value greater than the calling instance (or the keyword ","noone"," if none are larger) will be stored in the local variable ","_inst","."," ","It is worth noting that you can use the special ","break"," and ","continue"," statements within a ","with"," call too. Using ","break"," will immediately exit the ","with"," code block and move on to any code that is in the event or function after the ","with"," should have finished, eg:"," ","var count = 0;","\n    with (obj_Enemy)","\n    {","\n        if (++count > 10)","\n        {","\n            break;","\n        }","\n        hp = 100;","\n    }"," ","The above code loops through the instances in the room of the object ","obj_Enemy"," and sets the variable ","hp"," to 100 for the first 10 it finds. If any more than 10 instances exist, the with code will call ","break"," and end."," ","An example of using ","continue"," in a ","with"," loop would be:"," ","with (obj_Enemy_Parent)","\n    {","\n        if (invulnerable == true)","\n        {","\n            continue;","\n        }","\n        hp -= 25;","\n    }"," ","This code will loop through all instance with the parent ","obj_Enemy_Parent",", then checks each instance to see if the ","invulnerable"," instance variable is ","true"," or not. If it is, the ","continue"," keyword ends the current iteration of the loop and moves on to the next available instance, otherwise it removes 25 from the ","hp"," variable. This will repeat until all instances with that parent have been checked."," ","NOTE"," Instances in a room are created in a certain ","order",", and their Create events are also executed as they are created one-by-one. This means that you must be careful when reading variables from other instances in the Create event, as that other instance may not have run its Create event yet!"," ","\n    For example: let's say ","ObjectA"," is created before ","ObjectB",", and you have the following code in those objects' Create events:"," ","ObjectA ","Create - ","myValue = objectB.myValue;"," ","ObjectB ","Create - ","myValue = 10;"," ","\n    ObjectA is created first and its Create event runs, which then crashes the game:"," ","\"Variable objectB.myValue(100003, -2147483648) not set before reading it.\""," ","\n    That's simply because ObjectB has not even been created yet, so any variables initialised in its Create event do not yet exist. This is why you must take caution when referencing other instances like this in the Create event, including any code run inside ","with()"," blocks.\n  "," ","Back: ","Language Features"," ","Next: ","return"]],"6":[[" ","© Copyright YoYo Games Ltd. 2023 All Rights Reserved"]],"id":"2623"})