<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../assets/import/main.css"><script>let str;removeHtml=function(e){return e=(e=(e=(e=e.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(e){return e.match(/(<([^>]+)>)/gi)},setTranslator=function(e,t,o){let n;n=o?e.attr(o):e.html();let i=t[removeHtml(n)];if(null!=i&&i.length){t=retHtml(n);let a=0;t&&t.forEach(function(e,t){var o=i.replace("{"+a+"}",e);i=o===i?i.replace("{}",e):o,a++}),o?e.attr(o,i):e.html(i)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){var e=`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`;$(".header").length?$(".header").append(e):($(".topic-header").append(e),$(".topic-header button").css("position","relative").css("top","44px"))},removeExtensionFromHash=function(e){return e.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")};let json_global,json_file={'Click on the second commit (the "Hello World" commit).':'点击第二个提交("Hello World"提交)。',"First of all create a new resource - in this example we'll make a Script resource - and initially you'll see no status icon since as far as source control is concerned it doesn't exist exist yet. In the script resource add a simple line of code, like:":"首先，创建一个新的资源 -- 在本例中，我们将创建一个脚本资源 -- 最初您将不会看到任何状态图标，因为就源代码管理而言，它还不存在。在脚本资源中添加一行简单的代码，如下所示：","If we now right click {}{}{}&nbsp;on the file we changed we'll get a context menu with an option to {}Revert Path{}:":"如果我们现在在我们更改的文件上右键单击{}{}{}，我们将看到一个上下文菜单，其中包含一个选项以{}还原路径{}：","If you now close the code editor, the script will save and the modified file icon {}&nbsp;will appear beside it in the {}Asset Browser{}. Now, open up the {}Commit {}window and you'll see there are four staged changes, as new resources automatically get added:":"如果现在关闭代码编辑器，脚本将保存，修改后的文件图标{}将显示在{}资源浏览器{}中的文件旁边。现在，打开{}提交{}窗口，您将看到有四个阶段性更改，因为会自动添加新资源：","In the previous sections you've seen how to {}create a repository{} and {}commit things to it{}, but what happens if you make a mistake and want to \"roll back\" to a previous commit? Let's make a deliberate error and see how we can deal with it then...":'在前面的小节中，您已经了解了如何{}创建仓库{}和{}向其提交内容{}，但是如果您犯了一个错误并希望"回滚"到上一次提交，会发生什么呢？让我们犯一个故意的错误，然后看看我们如何处理它。',"Now we are back to having the erroneous file in the project again! Well, we can take this opportunity to revert only that file path instead of reverting everything to a previous revision. For that we need to do the following:":"现在，我们又回到了项目中的错误文件！那么，我们可以利用这个机会只恢复该文件路径，而不是将所有内容恢复到以前的版本。为此，我们需要做以下工作：",'Now we commit it as before to get it under source control. So, this was a bad idea and we want to roll back, which means to start with we need to open the {}Source Control{} &gt; {}View History{} window. Here we will see a list of all previous commits now in this window, starting with the initial commit, the commit for the script, and then the commit for the script that we have edited as a "bad idea":':'现在，我们像以前一样提交它，以使其处于源代码控制之下。因此，这不是一个好主意，我们想要回滚，这意味着首先我们需要打开{}源代码管理{}>{}查看历史记录{}窗口。现在，我们将在此窗口中看到所有先前提交的列表，首先是初始提交、脚本的提交，然后是我们已编辑为"Bad idea"的脚本的提交：',"Open the {}Commit Changes{}&nbsp;window.":"打开{}提交更改{}窗口。","Open the {}View History{} window.":"打开{}查看历史记录{}窗口。","Reverting Files":"回滚文件","Right click {}{}{}&nbsp;and {}Revert Path{}.":"右键单击{}{}{}，然后单击{}还原路径{}。","Right click {}{}{}&nbsp;on our script GML in the Files pane and select {}Revert Path{}.":"在文件窗格中的脚本 GML 上右键单击{}{}{}，然后选择{}还原路径{}。",'Right click {}{}{}&nbsp;our second commit in the {}Commit History{} pane (the "Hello World" commit).':'在{3}提交历史记录{4}窗格("Hello World"提交)中，右键单击{}{}{}我们的第二次提交。',"Select {}Revert To This Revision{} and then choose {}ReLoad{} on the warning message.":"选择{}恢复到此修订版本{}，然后在警告消息上选择{}重新加载{}。","That's all great for when you edit something and want to change back without having already performed a commit, but what about when you have committed one or more changes and want to roll back to a {}previous {}commit? Well, let's edit our script again to say:":"当您编辑某些内容并想要在没有执行提交的情况下更改时，这一切都很好，但是当您提交了一个或多个更改并希望回滚到{}前一个{}提交时，情况又会怎样呢？好吧，让我们再次编辑我们的脚本，如下所示：","To revert a change we first need to open up the commit window again, so we go to {}Source Control{} &gt; {}Commit Changes{} once more. Our changed file will again be staged ready for committing, but this isn't what we want so we click the button {}Unstage All{} to take it out of the staging area.":"要恢复更改，我们首先需要再次打开提交窗口，因此我们再次转到{}源代码管理{}>{}提交更改{}。我们更改的文件将再次暂存以供提交，但这不是我们想要的，因此我们单击按钮{}全部取消暂存{}将其移出暂存区域。",'Unstage the script with the "Hello World" code in it.':'取消暂存包含"Hello World"代码的脚本。','We should be back to having our "Hello World" code and we can then do a fresh commit to update the source control again with the corrected file.':'我们应该返回到我们的"Hello World"代码，然后我们可以执行新的提交，以使用更正后的文件再次更新源代码管理。',"When we close the code editor, again a red icon {}&nbsp;will be shown beside the script, but we've realised that we made a mistake with our code and we want to roll back to a previous version to fix it (obviously, you could just open the script and fix it easily, since the example is so simple, but in large projects that's not normally a feasible approach). What we need to do is {}revert {}our changes.":"当我们关闭代码编辑器时，脚本旁边将再次显示一个红色图标{}，但我们已经意识到我们的代码犯了一个错误，我们希望回滚到以前的版本来修复它(显然，您只需打开脚本并轻松修复它，因为示例非常简单，但在大型项目中，这通常不是一个可行的方法)。我们需要做的是{}恢复{}我们的更改。","You should see that the script now has a red status icon {}, and if we open it up, we'll have the following:":"您应该看到该脚本现在有一个红色的状态图标{}，如果我们打开它，我们将看到以下内容：","You should type in a commit message and then click the {}Commit {}button, just as we explained previously. Now, we go back to our script and change the line of code to (for example):":"您应该键入一条提交消息，然后单击{}提交{}按钮，就像我们前面解释的那样。现在，我们返回到我们的脚本并将代码行更改为(例如)：","a view file":"查看文件","the GML script itself":"GML 脚本本身","the {}.yyp{} project file":"{}.yyp{} 项目文件","the {}.yy{} file referencing it":"引用它的 {}.yy{} 文件","{}IMPORTANT!{} When you revert you will get a message asking you to reload or save the current project due to the file checker detecting changes on disk:{} {}You must hit Reload and not save, as saving will save what is memory rather than reloading the reverted files. ":"{}重要！{} 当您还原时，您将收到一条消息，要求您重新加载或保存当前项目，因为文件检查器检测到磁盘上的更改：{}{}您必须点击重新加载而不是保存，因为保存将节省内存，而不是重新加载还原的文件。","{}The changes staged will be:":"{}暂存的更改将包括：",'{}We can then do a commit on the project and we\'ll be back to where we were once again. However we can also undo that action for the file and get our "bad idea" commit back by doing the following:':'{}然后我们可以在项目上做出提交，我们将再次回到我们所处的位置。但是，我们也可以通过执行以下操作来撤消对该文件操作，并重新提交我们的"bad idea"：',"{}We now have two choices. We can revert an entire revision - which will revert all files that were changed to those of the chosen commit - or we can choose to revert a path - which will simply revert a single file. Let's do the first option to start with:":"{}我们现在有两个选择。我们可以还原整个修订版本-将更改的所有文件还原为选定提交的文件-或者我们可以选择还原路径-这将简单地还原单个文件。让我们从第一个选项开始：","{}When you select this option, you will revert the files back to the previous state that they were in.":"{}当您选择此选项时，您将把文件恢复到它们所处的以前状态。"},get_json_global=$.ajax({url:"/global.json",type:"GET",dataType:"json",async:!1,success:function(e){json_global=e}});$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json_file)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../..",gTopicId="4.3.2.0_4"</script><script type="text/javascript" src="../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Reverting Files</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../assets/css/default.css" type="text/css"><script src="../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Section that covers Source Control reverting files"><meta name="rh-index-keywords" content="Source Control - Reverting Files"><meta name="search-keywords" content="revert files"><meta name="brsnext" value="IDE_Tools/Source_Control/Cloning_A_Repository.htm"><meta name="brsprev" value="IDE_Tools/Source_Control/Standard_Workflow.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Reverting Files"><span>Reverting Files</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>Reverting Files</h1><p>In the previous sections you've seen how to <a href="Repository_Options.htm">create a repository</a> and <a href="Standard_Workflow.htm">commit things to it</a>, but what happens if you make a mistake and want to "roll back" to a previous commit? Let's make a deliberate error and see how we can deal with it then...</p><p>First of all create a new resource - in this example we'll make a Script resource - and initially you'll see no status icon since as far as source control is concerned it doesn't exist exist yet. In the script resource add a simple line of code, like:</p><p class="code">show_debug_message("Hello World");</p><p>If you now close the code editor, the script will save and the modified file icon <img alt="SCM Modified Icon" class="icon" src="../../assets/Images/Icons/SCM_Modified.png">&nbsp;will appear beside it in the <a href="../../Introduction/The_Asset_Browser.htm">Asset Browser</a>. Now, open up the <strong>Commit</strong> window and you'll see there are four staged changes, as new resources automatically get added:</p><p><img alt="Source Control Staged Changes" class="center" src="../../assets/Images/IDE Tools/SCM_StagedChanges.png">The changes staged will be:</p><ul class="colour"><li>the <span class="inline">.yyp</span> project file</li><li>a view file</li><li>the GML script itself</li><li>the <span class="inline">.yy</span> file referencing it</li></ul><p>You should type in a commit message and then click the <strong>Commit</strong> button, just as we explained previously. Now, we go back to our script and change the line of code to (for example):</p><p class="code">show_debug_message("Hello World, how are you?");</p><p>When we close the code editor, again a red icon <img alt="SCM Modified Icon" class="icon" src="../../assets/Images/Icons/SCM_Modified.png">&nbsp;will be shown beside the script, but we've realised that we made a mistake with our code and we want to roll back to a previous version to fix it (obviously, you could just open the script and fix it easily, since the example is so simple, but in large projects that's not normally a feasible approach). What we need to do is <strong>revert</strong> our changes.</p><p>To revert a change we first need to open up the commit window again, so we go to <strong>Source Control</strong> &gt; <strong>Commit Changes</strong> once more. Our changed file will again be staged ready for committing, but this isn't what we want so we click the button <strong>Unstage All</strong> to take it out of the staging area.</p><p>If we now right click <strong><img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21"></strong>&nbsp;on the file we changed we'll get a context menu with an option to <strong>Revert Path</strong>:</p><p><img alt="Source Control Revert Path" class="center" src="../../assets/Images/IDE Tools/SCM_RevertPath.png">When you select this option, you will revert the files back to the previous state that they were in.</p><p class="note"><strong>IMPORTANT!</strong> When you revert you will get a message asking you to reload or save the current project due to the file checker detecting changes on disk:<br><img alt="Source Control Warning" class="center" src="../../assets/Images/IDE Tools/SCM_Warning.png">You must hit Reload and not save, as saving will save what is memory rather than reloading the reverted files.</p><p>That's all great for when you edit something and want to change back without having already performed a commit, but what about when you have committed one or more changes and want to roll back to a <em>previous</em> commit? Well, let's edit our script again to say:</p><p class="code">show_debug_message("This is a bad idea");</p><p>Now we commit it as before to get it under source control. So, this was a bad idea and we want to roll back, which means to start with we need to open the <strong>Source Control</strong> &gt; <strong>View History</strong> window. Here we will see a list of all previous commits now in this window, starting with the initial commit, the commit for the script, and then the commit for the script that we have edited as a "bad idea":</p><p><img alt="Source Control Bad Idea History" class="center" src="../../assets/Images/IDE Tools/SCM_BadIdea.png">We now have two choices. We can revert an entire revision - which will revert all files that were changed to those of the chosen commit - or we can choose to revert a path - which will simply revert a single file. Let's do the first option to start with:</p><ul class="colour"><li>Right click <strong><img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21"></strong>&nbsp;our second commit in the <strong>Commit History</strong> pane (the "Hello World" commit).</li><li>Select <strong>Revert To This Revision</strong> and then choose <strong>ReLoad</strong> on the warning message.</li></ul><p>You should see that the script now has a red status icon <img alt="SCM Modified Icon" class="icon" src="../../assets/Images/Icons/SCM_Modified.png">, and if we open it up, we'll have the following:</p><p><img alt="Source Control Revert To Revision" class="center" src="../../assets/Images/IDE Tools/SCM_RevertToRevision.png">We can then do a commit on the project and we'll be back to where we were once again. However we can also undo that action for the file and get our "bad idea" commit back by doing the following:</p><ul class="colour"><li>Open the <strong>Commit Changes</strong>&nbsp;window.</li><li>Unstage the script with the "Hello World" code in it.</li><li>Right click <strong><img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21"></strong>&nbsp;and <strong>Revert Path</strong>.</li></ul><p>Now we are back to having the erroneous file in the project again! Well, we can take this opportunity to revert only that file path instead of reverting everything to a previous revision. For that we need to do the following:</p><ul class="colour"><li>Open the <strong>View History</strong> window.</li><li>Click on the second commit (the "Hello World" commit).</li><li>Right click <strong><img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21"></strong>&nbsp;on our script GML in the Files pane and select <strong>Revert Path</strong>.</li></ul><p>We should be back to having our "Hello World" code and we can then do a fresh commit to update the source control again with the corrected file.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="../Source_Control.htm">Source Control</a></div><div style="float:right">Next: <a href="Cloning_A_Repository.htm">Cloning A Repository</a>&nbsp;</div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>