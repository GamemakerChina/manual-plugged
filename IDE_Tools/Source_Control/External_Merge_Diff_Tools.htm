<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../../assets/import/layer/layer.js"></script><script type="text/javascript" src="../../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../..",gTopicId="4.3.2.0_7"</script><script type="text/javascript" src="../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>External Merge/Diff Tools</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../assets/css/default.css" type="text/css"><script src="../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Section that covers Source Control merge and diff tools"><meta name="rh-index-keywords" content="Source Control - Esternal Merge/Dif Tools"><meta name="search-keywords" content="merge,diff,external tools"><meta name="brsnext" value="IDE_Tools/Project_Tool.htm"><meta name="brsprev" value="IDE_Tools/Source_Control/Conflicts.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="External Merge/Diff Tools"><span>External Merge/Diff Tools</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>External Merge/Diff Tools</h1><h2>Merge Tool</h2><p>When you work on a project with other people, there's always a chance there could be a conflict, as multiple people edit the same file and most source control systems can make a good attempt at merging any conflicted files, but when there are changes in the same place, it requires a bit of help to know what to do – this is where a <strong>merge tool</strong> comes in to show you the changes, and let you decide.</p><p>As each merge tool is different, there are four macros that can be used to help specify files to it which can be set up from the <strong>Conflicts</strong> window by clicking the button labelled <strong>Choose Merge Tool</strong><strong></strong>:</p><p><img alt="Source Control Conflict Window" class="center" src="../../assets/Images/IDE Tools/SCM_ConflictsWindow.png"></p><p>When you click that button the <a href="../../Setting_Up_And_Version_Information/IDE_Preferences/Plugin_Preferences.htm">Preferences</a> window will open on the Git plugin:</p><p><img alt="Source Control Choose Merge Tool" class="center" src="../../assets/Images/IDE Tools/SCM_ChooseMergeTool.png">Here you provide a path to the chosen merge tool and then a <strong>Merge Tool Options</strong> macro (or macros) to use when deciding what to do, with the following options available:</p><ul class="colour"><li><span class="inline">${scm_mine}</span>: path to your version</li><li><span class="inline">${scm_theirs}</span>: path to their version</li><li><span class="inline">${scm_base}</span>: path to the version before the conflicted changes occurred</li><li><span class="inline">${scm_merged}</span>: path to where the merge tool should save to</li></ul><p>As a help to setting up, when you give a path to certain merge tools, <span data-keyref="GameMaker Name">GameMaker</span> will fill in some defaults to get started with, depending on the tool chosen:</p><ul class="colour"><li><strong>KDiff3</strong>: <span class="inline"><span>"${scm_theirs} "${scm_mine}" -o "${scm_merged}"</span></span></li><li><strong>Meld</strong>: <span class="inline"><span>"${scm_mine}" "${scm_merged}" "${scm_theirs}"</span></span></li><li><strong>Notepad++</strong>: <span class="inline">${scm_merged}</span></li><li><strong>TortoiseMerge</strong>: <span class="inline"><span>/base:"${scm_base}" /theirs:"${scm_theirs}" /mine:"${scm_mine}" /merged:"${scm_merged}"</span></span></li><li><strong>DiffMerge</strong>: <strong>"<span class="inline"><span>${scm_mine}" "${scm_merged}" "${scm_theirs}"</span></span></strong></li></ul><p>Note that if you don't have (or don't want to use) a merge tool, then you can open up the script in the IDE and attempt to fix it from there.</p><p>So, back to our example Conflict as stated in the section on <a href="Conflicts.htm">Conflicts</a>... We have done a pull from master and one of the files is conflicted. This opens the Source Control <strong>Conflicts</strong> window, where you can click on the conflicted script, and now click on <strong>Merge</strong>, since you have configured your merge tool. Clicking merge will now open the tool where you can deal with the conflict and then use the macro(s) supplied to make the required changes. Once you have finished and closed the merge tool, the <span data-keyref="GameMaker Name">GameMaker</span> IDE will show the following confirmation window:</p><p><img alt="Source Control Merge Confirm" class="center" src="../../assets/Images/IDE Tools/SCM_MergeConfirm.png">Simply answer "Yes" to this prompt as you've just done it yourself using the merge tool, and then you need to commit this change to signify the end of the merge operation (<strong>Source Control</strong> &gt; <strong>Commit Changes</strong>). The Commit window will now show that a merge is in progress as well as show some unstaged files:</p><p><img alt="Source Control Merge In Progress" class="center" src="../../assets/Images/IDE Tools/SCM_MergeInProgress.png">These unstaged files are our script file with the addition of <span class="inline">.base</span>, <span class="inline">.ours</span> and <span class="inline">.theirs</span>. We can safely delete all these so click&nbsp;<img alt="LMB Icon" class="icon" height="22" src="../../assets/Images/Icons/Icon_LMB.png" style="cursor:nwse-resize" width="20">&nbsp;on the top one and then <img alt="Shift Icon" class="icon" height="20" src="../../assets/Images/Icons/Icon_Shift.png" width="55">&nbsp;+ <img alt="LMB Icon" class="icon" height="22" src="../../assets/Images/Icons/Icon_LMB.png" style="cursor:nwse-resize" width="20">&nbsp;on the bottom one to select them all. Next, we right click on the selected files and choose <strong>Delete Path</strong> to remove them. There's also a commit message pre-filled for us as well, stating that this was a merge, and that there was a conflict (we can add to this or edit it as we wish).</p><p>We can click <strong>Commit</strong> now.</p><p>Due to the fact that you can have issues with other files, it means that your workflow when using remote or shared repositories should be as follows:</p><p class="code">Make Changes &gt; Save &gt; Commit &gt; Pull &gt; Merge &gt; Push</p><h2>Diff Tool</h2><p>You should also set up a <strong>Diff Tool</strong> for use when doing commits to a repository. This is set up from the <a href="../../Setting_Up_And_Version_Information/IDE_Preferences/Plugin_Preferences.htm">Preferences</a>, same as for the Merge tool:</p><p><img alt="Source Control Choose Diff Tool" class="center" src="../../assets/Images/IDE Tools/SCM_ChooseDiffTool.png" style="cursor:nwse-resize">The Diff tool is configured in much the same manner as the Merge tool, but only uses the <span class="inline">${scm_base}</span> and <span class="inline">${scm_theirs}</span> options - in this case, <span class="inline">${scm_base}</span> represents the unmodified file whereas <span class="inline">${scm_theirs}</span> represents the current state of the file. The Tool Options should be pre-populated with the default options for <strong>Meld</strong>, <strong>KDiff3</strong> and <strong>TortoiseMerge</strong>, just as they were for the Merge tool. Note that <span data-keyref="GameMaker Name">GameMaker</span> does <em>not</em> support the outputting of single file diff patches, therefore there is no default for <strong>Notepad++</strong>.</p><p>In order to view changes between current and previous revisions using the Diff tool, simply open up the Commit window and then double click on a file. If the tool has been setup correctly, it will be launched and you'll be able to see the changes between the files.</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="../Source_Control.htm">Source Control</a></div><div style="float:right">Next: <a href="Setting_Up_Git_Plugin.htm">Setting Up The Git Plugin</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>