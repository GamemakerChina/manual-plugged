<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" src="../assets/import/jquery-3.6.1.min.js"></script><script type="text/javascript" src="../assets/import/layer/layer.js"></script><script type="text/javascript" src="../assets/import/pangu.min.js"></script><link rel="stylesheet" type="text/css" href="../assets/import/layer/layui_btn.css"><link rel="stylesheet" type="text/css" href="../assets/import/layer/layui_col.css"><link rel="stylesheet" type="text/css" href="../assets/import/layer/theme/default/layer.css"><link rel="stylesheet" type="text/css" href="../assets/import/main.css"><script>let str;removeHtml=function(t){return t=(t=(t=(t=t.replace(/(<([^>]+)>)/gi,"{}")).replace(/\r\n/g,"\n")).replace(/\n/g,"")).replace(/ {2,}/g," ")},retHtml=function(t){return t.match(/(<([^>]+)>)/gi)},setTranslator=function(t,n,a){let e;e=a?t.attr(a):t.html();let l=n[removeHtml(e)];if(null!=l&&l.length){n=retHtml(e);let o=0;n&&n.forEach(function(t,n){var a=l.replace("{"+o+"}",t);l=a===l?l.replace("{}",t):a,o++}),a?t.attr(a,l):t.html(l)}},noTranslationState=function(){return"true"==window.localStorage.getItem("noTranslationState")},noTranslationStateToggle=function(){window.localStorage.setItem("noTranslationState",!noTranslationState())},addNoTranslationStateButton=function(){$(".header").length&&$(".header").append(`
		
		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		window.location.replace('gmmt://'+document.location.hash)
		"
		>打开编辑器</button>

		<button style="
			float: right;
			font-size: 16px;
			padding: 4px 12px;
		"
		onclick="
		noTranslationStateToggle();
		location.reload();
    	event.stopPropagation();
		"
		>切换翻译</button>
		`)},removeExtensionFromHash=function(t){return t.replaceAll("#t=","").replaceAll("%2F","/").replaceAll(".htm","")},$(function(){if(addNoTranslationStateButton(),noTranslationState())return!1;$("div.footer a,h4,caption").each(function(){setTranslator($(this),json_global)}),$("p,h1,h2,h3,td,li,a,div.dropspotnote,figcaption").each(function(){setTranslator($(this),json)}),$("th,.warning,.important,.optional").each(function(){setTranslator($(this),json_global)}),$(".header").length&&(window.setInterval(function(){$("#toc-panel a:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)}),$(".GlossDefinitionText:not('isTranslate')").each(function(){$(this).addClass("isTranslate"),setTranslator($(this),json_global)})},250),console.log("成功啦!现在正在疯狂翻译菜单中!")),$(".tooltip").each(function(){setTranslator($(this),json_global,"title")})}),document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="..",gTopicId="7.0_10"</script><script type="text/javascript" src="../template/scripts/rh.min.js"></script><script type="text/javascript" src="../template/scripts/common.min.js"></script><script type="text/javascript" src="../template/scripts/topic.min.js"></script><script type="text/javascript" src="../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Guide To Using Blendmodes</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../assets/css/default.css" type="text/css"><script src="../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page that explains how blendmodes work."><meta name="rh-index-keywords" content="blendmodes,Guide To Using Blendmodes"><meta name="search-keywords" content="blendmodes,blending,blend modes"><meta name="brsnext" value="Additional_Information/Project_Format.htm"><meta name="brsprev" value="Additional_Information/Guide_To_Primitives_And_Vertex_Building.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Guide To Using Blendmodes"><span>Guide To Using Blendmodes</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>Guide To Using Blend Modes</h1><p>If you've been using <span data-keyref="GameMaker Name">GameMaker</span> for any length of time, you will almost certainly have come across <a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/GPU_Control.htm">blend modes</a>, and probably even used them in your games. Blend modes are a great way to change how something is drawn to give interesting and specific graphical effects, but do you know how they work and how to use them? This is a subject that can confuse people and so in this section we hope to dispel some of the mystery surrounding blend modes and enable you to use them to their fullest extent in your games.</p><h2>Overview</h2><p>Blend modes basically tell your game to draw certain things blended with whatever else is already drawn beforehand. Everything you draw to the screen is made up of four component parts - <strong>Red</strong>, <strong>Green</strong>, <strong>Blue</strong> and <strong>Alpha</strong> - and by default they are drawn to the screen using the blend mode <span class="inline">bm_normal</span>.</p><p>This blend mode draws all pixels with their colour and alpha values essentially unchanged (although, later in this section you'll see that this isn't <em>quite</em> true...), but <span data-keyref="GameMaker Name">GameMaker</span> has a number of <a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode.htm">built-in blend modes</a> that can be set to change this behaviour.</p><h2>How Things Are Drawn</h2><p>When <span data-keyref="GameMaker Name">GameMaker</span> goes to draw a pixel, there's a <strong>source colour</strong> (the colour of the pixel you are going to draw) and a <strong>destination colour</strong> (the colour that's already in the pixel we're drawing to). For example, if you're drawing a pink colour after having drawn a yellow colour at the same pixel, pink is the <strong>source</strong>&nbsp;(what you're drawing), and yellow is the <strong>destination</strong> (as it's already there).</p><p>When determining the final colour of a pixel, GameMaker will combine the source and destination colours according to the <strong>blend mode</strong>&nbsp;-- basically asking, "how should I combine the pink and the yellow?".</p><h2>Calculating Final Colour</h2><p>Both the source colour and destination colour contain RGBA (<strong>Red</strong>, <strong>Green</strong>, <strong>Blue</strong> and <strong>Alpha</strong>) components, each of which are floating point values between 0 and 1.</p><p>The final colour of a pixel is calculated by multiplying each component of the source and destination by a <a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode_ext.htm">factor</a>, and then bringing them together according to the set <a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendequation.htm">equation</a>.</p><p>This means that the way a final pixel colour is calculated is the following: <span class="inline2">(source * factor) + (destination * factor)</span>.</p><p>Here, both values are finally <strong>added together</strong>, as the default equation is <span class="inline2">bm_add</span>, however you can change that to subtract or to use some other equation (covered later on this page).</p><h2>Basic Blend Modes</h2><p>Use the function <span class="inline3_func"><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode.htm">gpu_set_blendmode</a></span>&nbsp;to apply a set of blend factors and equation <strong>at the same time</strong>, as a "preset" blend mode.</p><p>You would call this before (for example) drawing a sprite, then reset it afterwards, something like this:</p><p class="code">gpu_set_blendmode(bm_add);<br>draw_self();<br>gpu_set_blendmode(bm_normal);</p><p>That code draws the instance sprite using an <strong>additive</strong> blend mode. The additive blend mode is set using one of the available GML constants, of which there are six for basic modes:</p><div data-conref="../assets/snippets/Table_Gpu_blend_modes.hts"><table><colgroup><col><col><col><col></colgroup><tbody><tr><th colspan="4"><span data-keyref="Type_Constant_Draw_Blend_Mode"><a target="_blank" href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_get_blendmode.htm">Blend Mode Constant</a></span></th></tr><tr><th>Constant</th><th>Description</th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode_ext.htm">Extended Blend Mode</a></th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendequation.htm">Blend Equation</a></th></tr><tr><td><span class="inline">bm_normal</span></td><td>Normal blending (the default blend mode).</td><td>(<span class="inline">bm_src_alpha</span>, <span class="inline">bm_inv_src_alpha</span>)</td><td><span class="inline">bm_eq_add</span></td></tr><tr><td><span class="inline">bm_add</span></td><td>Additive blending. Luminosity values of light areas are added.</td><td>(<span class="inline">bm_src_alpha</span>, <span class="inline">bm_one</span>)</td><td><span class="inline">bm_eq_add</span></td></tr><tr><td><span class="inline">bm_subtract</span></td><td>Subtractive blending. Source is subtracted from the destination.</td><td>(<span class="inline">bm_src_alpha</span>, <span class="inline">bm_one</span>)</td><td><span class="inline">bm_eq_subtract</span></td></tr><tr><td><span class="inline">bm_reverse_subtract</span></td><td>Reverse subtractive blending. Destination is subtracted from the source.</td><td>(<span class="inline">bm_src_alpha</span>, <span class="inline">bm_one</span>)</td><td><span class="inline">bm_eq_reverse_subtract</span></td></tr><tr><td><span class="inline">bm_min</span></td><td>Smaller value from source and destination is selected.</td><td>(<span class="inline">bm_one</span>, <span class="inline">bm_one</span>)</td><td><span class="inline">bm_eq_min</span></td></tr><tr><td><span class="inline">bm_max</span></td><td>Max blending. Similar to additive blending.</td><td>(<span class="inline">bm_src_alpha</span>, <span class="inline">bm_inv_src_colour</span>)</td><td><span class="inline">bm_eq_add</span></td></tr></tbody></table></div><p>The "Extended Blend Mode" column shows the factors that are applied to the source and the destination (respectively), and the "Blend Equation" column shows the equation used to bring those two values together.</p><p>Let's now look through how each basic blend mode works.</p><p class="note"><span data-conref="../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;These examples demonstrate blend modes using a green background, with a blue square drawn on it, both of which count as the destination. A grey square is drawn as the source, using each of the blend modes.</p><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down9" href="#"><span data-open-text="true" data-skip-index="true">bm_normal</span><span data-close-text="true">bm_normal</span></a></p><div class="droptext" data-targetname="drop-down9"><table class="cke_show_border"><tbody><tr><th>Constant</th><th>Description</th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode_ext.htm">Extended Blend Mode</a></th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendequation.htm">Blend Equation</a></th></tr><tr><td><span class="inline">bm_normal</span></td><td>Normal blending (the default blend mode).</td><td>(<span class="inline">bm_src_alpha</span>, <span class="inline">bm_inv_src_alpha</span>)</td><td><span class="inline">bm_add</span></td></tr></tbody></table><p class="dropspot"><span class="inline2">bm_normal</span> is the default blend mode, which multiplies the source colour with its alpha, and multiplies the destination colour with the&nbsp;<em>inverse</em>&nbsp;of the source alpha (to make space for the source colour to fit in). Finally it adds both together (as the equation is <span class="inline2">bm_add</span>):</p><p><img alt="bm_normal example" class="center" src="../assets/Images/Scripting_Reference/Additional_Information/guide_blend_modes/bm_normal.png"></p><p class="dropspot">The background colour in this example is <span class="inline2">(50, 100, 0, 255)</span>.</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down" href="#"><span data-open-text="true" data-skip-index="true">bm_add</span><span data-close-text="true">bm_add</span></a></p><div class="droptext" data-targetname="drop-down"><table class="cke_show_border"><tbody><tr><th>Constant</th><th>Description</th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode_ext.htm">Extended Blend Mode</a></th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendequation.htm">Blend Equation</a></th></tr><tr><td><span class="inline">bm_add</span></td><td>Additive blending. Luminosity values of light areas are added.</td><td>(<span class="inline">bm_src_alpha</span>, <span class="inline">bm_one</span>)</td><td><span class="inline">bm_add</span></td></tr></tbody></table><p class="dropspot">This blend mode multiplies the source colour with its alpha, just like <span class="inline2">bm_normal</span>, however it keeps the destination as-is (<span class="inline2">bm_one</span>). It then adds both together, resulting in a lighter colour. Note that colour values can't go over 255 (or under 0), so anything that adds up to more than that will be clamped to 255.</p><p class="dropspot"><img alt="bm_add example" class="center" src="../assets/Images/Scripting_Reference/Additional_Information/guide_blend_modes/bm_add.png">The background colour in this example is <span class="inline2">(50, 100, 0, 255)</span>.</p><p class="dropspot">Using this blend mode is a great way to get that "neon glow" look, and is most often used for lighting effects, lasers or just about anything that you want to appear to glow or have luminescence.</p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down1" href="#"><span data-open-text="true" data-skip-index="true">bm_subtract</span><span data-close-text="true">bm_subtract</span></a></p><div class="droptext" data-targetname="drop-down1"><table class="cke_show_border"><tbody><tr><th>Constant</th><th>Description</th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode_ext.htm">Extended Blend Mode</a></th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendequation.htm">Blend Equation</a></th></tr><tr><td><span class="inline">bm_subtract</span></td><td>Subtractive blending. Source is subtracted from the destination.</td><td>(<span class="inline">bm_src_alpha</span>, <span class="inline">bm_one</span>)</td><td><span class="inline">bm_subtract</span></td></tr></tbody></table><p class="dropspot">This mode uses the same factors as <span class="inline2">bm_add</span>, however it uses the subtract equation so the source colour is subtracted from the destination colour (i.e. foreground is removed from the background).</p><p class="dropspot"><img class="center" src="../assets/Images/Scripting_Reference/Additional_Information/guide_blend_modes/bm_subtract.png">The background colour in this example is <span class="inline2">(50, 100, 0, 255)</span>.</p><p class="dropspot">This is useful for removing parts of an image using a mask, as shown in an example later on this page under "<strong>Blend Equations</strong>".</p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down2" href="#"><span data-open-text="true" data-skip-index="true">bm_reverse_subtract</span><span data-close-text="true">bm_reverse_subtract</span></a></p><div class="droptext" data-targetname="drop-down2"><table class="cke_show_border"><tbody><tr><th>Constant</th><th>Description</th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode_ext.htm">Extended Blend Mode</a></th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendequation.htm">Blend Equation</a></th></tr><tr><td><span class="inline">bm_reverse_subtract</span></td><td>Reverse subtractive blending. Destination is subtracted from the source.</td><td>(<span class="inline">bm_src_alpha</span>, <span class="inline">bm_one</span>)</td><td><span class="inline">bm_reverse_subtract</span></td></tr></tbody></table><p class="dropspot">This again uses the same factors as both <span class="inline2">bm_add</span> and <span class="inline2">bm_subtract</span>, but uses the reverse-subtract equation, so the destination colour is subtracted from the source colour (i.e. background is removed from the foreground).</p><p class="dropspot"><img class="center" src="../assets/Images/Scripting_Reference/Additional_Information/guide_blend_modes/bm_reverse_subtract.png">The background colour in this example is <span class="inline2">(50, 100, 0, 255)</span>.</p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-open-text="" data-rhwidget="DropSpot" data-target="drop-down6" href="#"><span data-open-text="true" data-skip-index="true">bm_min</span><span data-close-text="true">bm_min</span></a></p><div class="droptext" data-targetname="drop-down6"><table class="cke_show_border"><tbody><tr><th>Constant</th><th>Description</th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode_ext.htm">Extended Blend Mode</a></th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendequation.htm">Blend Equation</a></th></tr><tr><td><span class="inline">bm_min</span></td><td>Smaller value from source and destination is selected.</td><td>(<span class="inline">bm_one</span>, <span class="inline">bm_one</span>)</td><td><span class="inline">bm_min</span></td></tr></tbody></table><p class="dropspot">This uses the <span class="inline2">bm_one</span> factor for both source and destination colours, so they are not changed at all. Then it makes use of the minimum equation, so that whichever component value is smaller between the source and the destination (for each of R, G, B and A) is used for the final pixel.</p><p class="dropspot"><img class="center" src="../assets/Images/Scripting_Reference/Additional_Information/guide_blend_modes/bm_min.png">The background colour in this example is <span class="inline2">(50, 100, 0, 255)</span>.</p><p class="dropspot">&nbsp;</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down8" href="#"><span data-open-text="true" data-skip-index="true">bm_max</span><span data-close-text="true">bm_max</span></a></p><div class="droptext" data-targetname="drop-down8"><table><tbody><tr><th>Constant</th><th>Description</th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode_ext.htm">Extended Blend Mode</a></th><th><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendequation.htm">Blend Equation</a></th></tr><tr><td><span class="inline">bm_max</span></td><td>Max blending. Similar to additive blending.</td><td>(<span class="inline">bm_src_alpha</span>, <span class="inline">bm_inv_src_colour</span>)</td><td><span class="inline">bm_eq_add</span></td></tr></tbody></table><p class="dropspot"><span>This blend mode is more complex to explain, but it basically multiplies the source colours by the source alpha, then adds them to the destination colour values multiplied by the inverse source colour values. The actual maths behind <span class="inline2">bm_max</span> (and the other blend modes) we'll cover in part two of our article, but all you need to know is that the result will be a more "saturated" and brighter colour, without leading to the same pure white brilliance that using<span>&nbsp;</span></span><span class="inline2">bm_add</span><span><span>&nbsp;</span>will cause.</span></p><p class="dropspot"><img class="center" src="../assets/Images/Scripting_Reference/Additional_Information/guide_blend_modes/bm_max.png">The background colour in this example is <span class="inline2">(50, 100, 0, 255)</span>.</p><p class="dropspot">&nbsp;</p></div><p>&nbsp;</p><p>Now you know the very basics behind using a blend mode in <span data-keyref="GameMaker Name">GameMaker</span>. It takes the RGBA values for the source image (what is being drawn) and it then blends these with the RGBA values of the destination (what is being drawn to).</p><p>This blending is done by multiplying the individual components for each pixel colour and alpha by different amounts, depending on the effects that we wish to achieve, and then calculating the final pixel value from both using the set equation.</p><p>With this knowledge, you can start to use blend modes in your games to get glowing lasers, realistic shadows, or saturated transition effects, but there is still more to be learned here! Below&nbsp;we look at the <strong>extended blend modes</strong> (factors), as well as explore a bit of the maths behind them, so that you can create your own blending effects like multiply or overlay.</p><h2>Extended Blend Modes (Factors)</h2><p>Above&nbsp;we have talked about the function <span class="inline3_func"><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode.htm">gpu_set_blendmode</a></span>, but now we are going to look at <span class="inline3_func"><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode_ext.htm">gpu_set_blendmode_ext</a></span>.</p><p>We saw that each of the built-in blend modes applies <strong>factors</strong> to the <strong>source</strong> and <strong>destination</strong> colours. For example, <span class="inline2">bm_add</span> multiplies the source with its alpha, and multiplies the destination with 1.</p><p>With <span class="inline3_func"><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode_ext.htm">gpu_set_blendmode_ext</a></span>, you can <strong>manually set the factors</strong> for the source and destination colours, separately. This gives you a ton more options to draw your pixels, as you can now manually choose what the source multiplies with, and then what the destination multiplies with.</p><h3>Denoting Components</h3><p>As you already know, both source and destination colours have RGBA components.&nbsp;Each of these components are values between 0 and 1.</p><p>We denote the source RGBA as <span class="inline2">(Rs, Gs, Bs, As)</span> and destination RGBA as <span class="inline2">(Rd, Gd, Bd, Ad)</span>.</p><p>Knowing these will help you understand how each factor works, as one factor may use e.g. the <span class="inline2">Rs</span> value (source red), but another may use&nbsp;<span class="inline2">Rd</span> (destination red), and so on.</p><h3>Calculating The Final Pixel</h3><p>When you go to draw something, the GPU gets this:</p><ul class="colour"><li><span class="inline2">(Rs, Gs, Bs, As)</span> = the RGB and Alpha of the colour you are going to draw.</li><li><span class="inline2">(Rd, Gd, Bd, Ad)</span> = the RGB and Alpha of the colour that is already there at the pixel position.</li></ul><p>Then it does the following for every single pixel:</p><p class="code">final_pixel_colour = &nbsp;(Rs,Gs,Bs,As) * source_blend_factor + (Rd,Gd,Bd,Ad) * destination_blend_factor</p><p>As you can see, it is multiplying the source and destination RGBAs with their set factors. It then adds them together as per the default <a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendequation.htm">equation</a>.</p><p>Blend factors are defined in <span data-keyref="GameMaker Name">GameMaker</span> by a number of GML constants. Each constant is a factor that you can use for the source or destination (or both). The following factors are available:</p><div data-conref="../assets/snippets/Table_Gpu_blend_modes_ext.hts"><table><colgroup><col><col></colgroup><tbody><tr><th colspan="2"><span data-keyref="Type_Constant_Draw_Blend_Mode_Factor"><a target="_blank" href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_get_blendmode_ext.htm">Blend Mode Factor Constant</a></span></th></tr><tr><th>Constant</th><th>Blend factor (Red, Green, Blue, Alpha)</th></tr><tr><td><span class="inline">bm_zero</span></td><td>(0, 0, 0, 0)</td></tr><tr><td><span class="inline">bm_one</span></td><td>(1, 1, 1, 1)</td></tr><tr><td><span class="inline">bm_src_colour</span></td><td>(Rs, Gs, Bs, As)</td></tr><tr><td><span class="inline">bm_inv_src_colour</span></td><td>(1-Rs, 1-Gs, 1-Bs, 1-As)</td></tr><tr><td><span class="inline">bm_src_alpha</span></td><td>(As, As, As, As)</td></tr><tr><td><span class="inline">bm_inv_src_alpha</span></td><td>(1-As, 1-As, 1-As, 1-As)</td></tr><tr><td><span class="inline">bm_dest_alpha</span></td><td>(Ad, Ad, Ad, Ad)</td></tr><tr><td><span class="inline">bm_inv_dest_alpha</span></td><td>(1-Ad, 1-Ad, 1-Ad, 1-Ad)</td></tr><tr><td><span class="inline">bm_dest_colour</span></td><td>(Rd, Gd, Bd, Ad)</td></tr><tr><td><span class="inline">bm_inv_dest_colour</span></td><td>(1-Rd, 1-Gd, 1-Bd, 1-Ad)</td></tr><tr><td><span class="inline">bm_src_alpha_sat</span></td><td>(f, f, f, 1) where f = min(As, 1-Ad)</td></tr></tbody></table></div><p>The second column shows you what values each of the R, G, B, A components are multiplied with, when that factor is being used.</p><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down4" href="#"><span data-open-text="true" data-skip-index="true">Example of how bm_normal Works</span><span data-close-text="true">Example of how bm_normal Works</span></a></p><div class="droptext" data-targetname="drop-down4"><p class="dropspot">Time to look at a practical example of how this comes together for drawing in <span data-keyref="GameMaker Name">GameMaker</span>. For this, we are going to look at the&nbsp;<span class="inline2">bm_normal</span>&nbsp;blend mode, which is simply:</p><p class="code">gpu_set_blendmode_ext(bm_src_alpha, bm_inv_src_alpha);<br>gpu_set_blendequation(bm_add);</p><p class="dropspot">One of the problems people have with blend modes is visualising the results, so to show the maths behind them, we'll use this blend mode as our test subject since it's the blend mode that everyone uses the most and we know exactly what to expect from it. Imagine we are drawing a rectangle with the colour <span class="inline2">(128, 255, 64, 255)</span> over a background with the colour <span class="inline2">(64, 128, 255, 255)</span>:</p><p class="dropspot"><img alt="Example of bm_normal" class="center" src="../assets/Images/Scripting_Reference/Additional_Information/BlendModes2_Example1.png">So, our blending calculations look like this:</p><p class="code_plain"><strong>Colours:</strong><br>Source: (128, 255, 64, 255) = (0.5, 1, 0.25, 1)<br>Destination: (64, 128, 255, 255) = (0.25, 0.5, 1, 1)<br><br><strong>Factors:</strong><br>bm_src_alpha (As, As, As, As) = (255, 255, 255, 255) = (1, 1, 1, 1)<br>bm_inv_src_alpha (1-As, 1-As, 1-As, 1-As) = &nbsp;(0, 0, 0, 0)<br><br><strong>Formula:</strong><br>(Rs,Gs,Bs,As) * bm_src_alpha + (Rd,Gd,Bd,Ad) * bm_inv_src_alpha<br><br><strong>Apply factors</strong>:<br>(0.5, 1, 0.25, 1) * (1, 1, 1, 1) + (0.25, 0.5, 1, 1) * (0, 0, 0, 0)<br><br><strong>Apply equation</strong>:<br>(0.5, 1, 0.25, 1) + (0, 0, 0, 0)<br><br><strong>Final pixel</strong>:<br>(0.5, 1, 0.25, 1) = (128, 255, 64, 255)</p><p class="dropspot">As you can see, we multiply the destination values by 0, which gives them a value of 0 too, meaning that the source colours are unchanged, so our final colour value is&nbsp;<span class="inline2">(128, 255, 64, 255)</span>.</p><p class="dropspot">You can see how the inclusion of a lower alpha affects this calculation:</p><p class="code_plain"><strong>Colours:</strong><br>Source (128, 255, 64, 128) = (0.5, 1, 0.25, 0.5)<br>Destination: (64, 128, 255, 255) = (0.25, 0.5, 1, 1)<br><br><strong>Factors:</strong><br>bm_src_alpha (As, As, As, As) = (128, 128, 128, 128) = (0.5, 0.5, 0.5, 0.5)<br>bm_inv_src_alpha (1-As, 1-As, 1-As, 1-As) = (0.5, 0.5, 0.5, 0.5)<br><br><strong>Formula:</strong><br>(Rs,Gs,Bs,As) * bm_src_alpha + (Rd,Gd,Bd,Ad) * bm_inv_src_alpha<br><br><strong>Apply factors</strong>:<br>(0.5, 1, 0.25, 0.5) * (0.5, 0.5, 0.5, 0.5) + (0.25, 0.5, 1, 1) * (0.5, 0.5, 0.5, 0.5)<br><br><strong>Apply equation</strong>:<br>(0.25, 0.5, 0.125, 0.25) + (0.125, 0.25, 0.5, 0.5)<br><br><strong>Final pixel</strong>:<br>(0.375, 0.75, 0.625, 0.75) = (96, 192, 159, 192)</p><p class="dropspot">This gives a final pixel colour <span class="inline2">(96, 192, 159, 192)</span>, and will give an image like that shown below:</p><p class="dropspot"><img alt="Example Of bm_normal With Alpha" class="center" src="../assets/Images/Scripting_Reference/Additional_Information/BlendModes2_Example2.png"></p><p class="dropspot">Hopefully you can see clearly now what the blend mode factors do, and how combining them can change what is drawn to create some interesting effects.</p></div><p>We will now look at a practical example of how to combine these factors to create your own custom blend modes.</p><h2>Creating Your Own Blend Modes</h2><p>Using the different factors available, you can create your own blend modes to achieve blending options that are not available to you normally. In this example, we are going to create a <strong>multiply</strong> effect like that used in Photoshop. We can simulate this blend mode using two of our above mentioned blend mode factor constants like this:</p><p class="code">gpu_set_blendmode_ext(bm_dest_colour, bm_zero);</p><p>Before we actually draw something using this blend mode, let's have a look at how it should look in Photoshop:</p><p><img alt="The &quot;Multiply&quot; Blend Mode In Photoshop" class="center" src="../assets/Images/Scripting_Reference/Additional_Information/BlendModes2_Multiply.png">Using our extended blend mode we get the following:</p><p class="code">(Rs, Gs, Bs, As) * (Rd, Gd, Bd, Ad) + (Rd, Gd, Bd, Ad) * (0,0,0,0) = (Rs, Gs, Bs, As) * (Rd, Gd, Bd, Ad)<br>Source colour * dest colour + dest colour * zero = source colour * dest colour</p><p>The blend factor <span class="inline2">bm_zero</span> effectively removes the destination colour from the equation (as zero times anything is zero), so we are left with the source colour multiplied by the blend factor of the destination colour, hence the name "multiply" for the mode. To use this in <span data-keyref="GameMaker Name">GameMaker</span>, you would simply have something like this in your <strong>Draw Event</strong>:</p><p class="code">gpu_set_blendmode_ext(bm_dest_colour, bm_zero);<br>draw_self();<br>gpu_set_blendmode(bm_normal);</p><p>The next image was taken from a test project in GameMaker using this exact code:</p><p><img alt="The &quot;Multiply&quot; Blend Mode In GameMaker" class="center" src="../assets/Images/Scripting_Reference/Additional_Information/BlendModes2_MultiplyGMS.png">Can you spot the difference? Probably not! There will, however, be some deviation between the two due to differences between the render tools used, but it's almost exactly as you would expect.</p><p>Note though that not all the blend modes used by art programs are available to you within <span data-keyref="GameMaker Name">GameMaker</span> due to the fact some of them can actually force the colour values to go over 255 and so create special effects, but that doesn't mean you can't create passable imitations of these effects, or even brand new effects, using them.</p><p>It's worth mentioning that with <span data-keyref="GameMaker Name">GameMaker</span> you can take this one step further using the function <span class="inline3_func"><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode_ext_sepalpha.htm">gpu_set_blendmode_ext_sepalpha</a></span>. This permits you to separate out the alpha component of the different blend mode factors and use them individually to create even more possible combinations. We won't cover this function here as it's explained in depth already in the manual, but it's worth mentioning just so you know it's available for use.</p><h2>Blend Equations</h2><p>Through reading this guide, you should already have a basic understanding of what a blend equation is. It controls how the source and destination colours are mixed together, after the factors have been applied.</p><p>By default, both the source and destination values are <strong>added</strong> together, as the default equation is <span class="inline2">bm_eq_add</span>.</p><p>The following equations are available in&nbsp;<span data-keyref="GameMaker Name">GameMaker</span>, which can be set using&nbsp;<span class="inline3_func"><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendequation.htm">gpu_set_blendequation</a></span>:</p><div data-conref="../assets/snippets/Table_Gpu_blend_equations.hts"><table><colgroup><col><col><col></colgroup><tbody><tr><th colspan="3"><span data-keyref="Type_Constant_Draw_Blend_Mode_Equation"><a target="_blank" href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendequation.htm">Blend Mode Equation Constant</a></span></th></tr><tr><th>Constant</th><th>Description</th><th>Equation</th></tr><tr><td><span class="inline">bm_eq_add</span></td><td>Add both together (the default equation).</td><td>source + destination</td></tr><tr><td><span class="inline">bm_eq_subtract</span></td><td>Subtract source from destination.</td><td>destination - source</td></tr><tr><td><span class="inline">bm_eq_reverse_subtract</span></td><td>Subtract destination from source.</td><td>source - destination</td></tr><tr><td><span class="inline">bm_eq_min</span></td><td>Use whichever value is smaller.</td><td>min(source, destination)</td></tr><tr><td><span class="inline">bm_eq_max</span></td><td>Use whichever value is larger.</td><td>max(source, destination)</td></tr></tbody></table><p class="note"><span data-conref="../assets/snippets/Tag_important.hts"><span class="important">IMPORTANT</span></span>&nbsp;<a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendmode_ext.htm">Blend factors</a> are not applied when <span class="inline2">bm_eq_min</span> or <span class="inline2">bm_eq_max</span> is used as the blend equation, which is effectively the same as using&nbsp;<span class="inline2">bm_one</span>&nbsp;as the factors.</p></div><p>You can also set the equation used for RGB and Alpha separately using&nbsp;<span class="inline3_func"><a href="../GameMaker_Language/GML_Reference/Drawing/GPU_Control/gpu_set_blendequation_sepalpha.htm">gpu_set_blendequation_sepalpha</a></span>.</p><h3>Using Equations</h3><p>You can use the <span class="inline2">bm_eq_subtract</span> equation to achieve the following effect:</p><p><video class="center" src="../assets/Images/Scripting_Reference/GML/Reference/Drawing/bm_eq_subtract.mp4" width="480" height="320" controls=""></video></p><p>Here, we're drawing a sprite to a <a href="../GameMaker_Language/GML_Reference/Drawing/Surfaces/Surfaces.htm">surface</a>, and then drawing a circle that subtracts whatever is in the surface. The surface is then drawn to the screen.</p><p>This can be achieved with the following <strong>Create</strong> and <strong>Draw</strong> event code:</p><p class="code_heading">Create Event</p><p class="code">surf = surface_create(128, 128);<br>surf_x = 175;<br>surf_y = 90;</p><p class="code_heading">Draw Event</p><p class="code">if (!surface_exists(surf))<br>{<br>&nbsp;&nbsp; &nbsp;surf = surface_create(128, 128);<br>}<br><br>// Draw to surface<br>surface_set_target(surf);<br>&nbsp;&nbsp; &nbsp;<br>draw_sprite(spr_box, 0, 0, 0);<br>&nbsp;&nbsp; &nbsp;<br>gpu_set_blendequation(bm_eq_subtract);<br>draw_circle(mouse_x - surf_x, mouse_y - surf_y, 32, 0);<br>gpu_set_blendequation(bm_add);<br>&nbsp;&nbsp; &nbsp;<br>surface_reset_target();<br>&nbsp;&nbsp; &nbsp;<br>// Draw surface to screen<br>draw_surface(surf, surf_x, surf_y);</p><p>First we create a surface and define its room position. Then in the Draw event, we check if the surface doesn't exist, and then recreate it.</p><p>Then we draw the following to that surface:</p><ul class="colour"><li>A sprite, drawn normally. Parts of this will be "removed" so we can see through it.</li><li>A <a href="../GameMaker_Language/GML_Reference/Drawing/Basic_Forms/draw_circle.htm">circle</a>, drawn at the mouse position, using the <span class="inline2">bm_eq_subtract</span> equation.</li></ul><p>The circle will subtract its alpha value from whatever is already in the surface, allowing us to see through it.</p><p>The surface is then drawn in the room at its defined position.</p><h2>Surfaces And Alpha</h2><p>One final thing is worth noting about blend modes, and that is how they affect the <strong>alpha</strong> component of a colour. When simply drawing to the <a class="tooltip" title="The application surface is a special built-in surface that GameMaker Studio 2 will draw everything to in the Draw Events of a game (a surface is essentially an area of memory reserved for graphics). This surface is then drawn to the display buffer at the end of each game frame, displaying its contents to the player.">application surface</a> or the <a class="tooltip" title="The display buffer is the 'canvas' where everything is finally drawn. Some events target this directly (like the Pre Draw event), while others will first draw to the application surface and then draw that to the display buffer.">display buffer</a>, you don't really need to take into consideration the destination alpha value as it will <em>always</em> be one. However surfaces that you make yourself are different, since you can clear a surface to have any alpha value from zero to one that you wish. This leads to some interesting effects that are contrary to what most people would expect.</p><p>To illustrate this, we are going to look at drawing using the basic default <span class="inline">bm_normal</span>. Most people think that having a surface cleared to alpha 0, and then drawing something with an alpha of 0.5 will give a resulting alpha value 0.5 too... <strong>but this is not the case</strong> and is something that many people think is a "bug" in how <span data-keyref="GameMaker Name">GameMaker</span> renders things. However, as you will see, it's not a bug at all!</p><p>Say you have surface with every pixel at alpha 0, then you draw a circle on it with alpha 0.5 using the <span class="inline">bm_normal</span> blend mode. The entire surface is still going to be alpha 0, but in the circle the alpha will actually be 0.25, since:</p><p class="code">0.5 * 0.5 + 0 * 0.5 = 0.5 * 0.5 = 0.25</p><p>If you then proceed to draw another circle in the existing circle, also with an alpha of 0.5, then the alpha outside the circles would be 0, in between the circles 0.25, and in the smaller circle it would be 0.375:</p><p class="code">0.5 * 0.5 + 0.25 * 0.5 = 0.25 + 0.125 = 0.375</p><p>If you were to continue to draw a number of 0.5 alpha circles to a surface with 0 alpha, and then draw this surface to the room, you would be able to clearly see this:</p><p><img alt="Surface Alpha Illustration" class="center" src="../assets/Images/Scripting_Reference/Additional_Information/BlendModes2_Surface.png">If you are still a bit confused about the alpha, try to picture it as just another colour. It behaves like a colour and all calculations on it are done in a similar manner. It's just not really visible, although the effect it has on other colours is. Which brings us to the final thing to note when using surfaces and blend modes (even <span class="inline">bm_normal</span>)...</p><p>Even if the alpha of the surface is 0, <em><strong>the colour components are still there and exist and will influence in all blending operations</strong></em>. So drawing to a zero alpha cleared surface that has been cleared using the colour red (for example) will blend the source colours with the destination colours and give different effects to what you may think. The above image was created on a surface cleared to black, but if we clear the surface to red, we get this instead:</p><p><img class="center" src="../assets/Images/Scripting_Reference/Additional_Information/BlendModes2_SurfaceRed.png">Hopefully you can now work out why this happens for yourself using the formulas we've outlined above and applying the appropriate figures for <span class="inline">bm_normal</span>.</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="Additional_Information.htm">Additional Information</a></div><div style="float:right">Next:&nbsp;<a href="Guide_To_Using_JSON.htm">Guide To Using JSON</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>